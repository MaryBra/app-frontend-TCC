

### ARQUIVO: globals.css ###
@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

/* Dark mode styles */
.dark {
  --background: #0a0a0a;
  --foreground: #ededed;
}

.dark body {
  background: var(--background);
  color: var(--foreground);
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
  transition: background-color 0.3s ease, color 0.3s ease;
}

button {
  cursor: pointer;
}

input,
textarea {
  cursor: text;
}

.cursor-default {
  cursor: default;
}

a,
.cursor-pointer {
  cursor: pointer;
}

button:disabled,
.cursor-not-allowed {
  cursor: not-allowed;
}

input::placeholder,
textarea::placeholder {
  color: #6b7280 !important;
  opacity: 1 !important;
}

.text-red-100 {
  color: #fef2f2 !important;
}

.text-gray-400 {
  color: #9ca3af !important;
}

.text-gray-500 {
  color: #6b7280 !important;
}

/* Dark mode specific styles */
.dark .bg-white {
  background-color: #1f2937 !important;
}

.dark .bg-gray-100 {
  background-color: #111827 !important;
}

.dark .bg-gray-50 {
  background-color: #374151 !important;
}

.dark .bg-gray-200 {
  background-color: #374151 !important;
}

.dark .bg-gray-300 {
  background-color: #4b5563 !important;
}

.dark .bg-\[\#ECECEC\] {
  background-color: #111827 !important;
}

.dark .text-gray-900 {
  color: #f9fafb !important;
}

.dark .text-gray-800 {
  color: #f3f4f6 !important;
}

.dark .text-gray-700 {
  color: #e5e7eb !important;
}

.dark .text-gray-600 {
  color: #d1d5db !important;
}

.dark .text-black {
  color: #f9fafb !important;
}

.dark .border-gray-200 {
  border-color: #374151 !important;
}

.dark .border-gray-300 {
  border-color: #4b5563 !important;
}

.dark .shadow-md {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5) !important;
}

.dark .shadow-lg {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5) !important;
}

.dark .text-gray-500 {
  color: #9ca3af !important;
}

.dark .bg-red-800 {
  background-color: #991b1b !important;
}

.dark .bg-red-700 {
  background-color: #b91c1c !important;
}

.dark .hover\:bg-red-800:hover {
  background-color: #991b1b !important;
}

.dark .hover\:bg-red-700:hover {
  background-color: #b91c1c !important;
}

/* Classes espec√≠ficas para cores vermelhas customizadas */
.dark .bg-custom-red {
  background-color: #b91c1c !important;
}

.dark .hover\:bg-custom-red-dark:hover {
  background-color: #991b1b !important;
}

.dark .text-custom-red {
  color: #fca5a5 !important;
}

.dark .border-custom-red {
  border-color: #fca5a5 !important;
}

.dark .bg-gradient-to-br.from-gray-50.to-gray-100 {
  background: linear-gradient(to bottom right, #374151, #111827) !important;
}

.dark .bg-gradient-to-br.from-red-400.to-red-600 {
  background: linear-gradient(to bottom right, #dc2626, #b91c1c) !important;
}

.dark .bg-gradient-to-r.from-custom-red-dark.to-custom-red-darker {
  background: linear-gradient(to right, #dc2626, #991b1b) !important;
}

/* Para elementos que usam bg-[#990000] - vamos usar uma classe customizada */
.bg-custom-red {
  background-color: #990000 !important;
}

.text-custom-red {
  color: #990000 !important;
}

.border-custom-red {
  border-color: #990000 !important;
}

.hover\:bg-custom-red-dark:hover {
  background-color: #7a0000 !important;
}

.bg-gradient-to-r.from-custom-red-dark.to-custom-red-darker {
  background: linear-gradient(to right, #b30000, #660000) !important;
}

/* Header vermelho no dark mode */
.dark .bg-\[\#990000\] {
  background-color: #b91c1c !important;
}

.dark .bg-red-800 {
  background-color: #991b1b !important;
}

/* Cards e containers */
.dark .bg-gray-100 {
  background-color: #111827 !important;
}

.dark .bg-white {
  background-color: #1f2937 !important;
}

.dark .bg-gray-50 {
  background-color: #374151 !important;
}

/* Textos espec√≠ficos */
.dark .text-white {
  color: #f9fafb !important;
}

.dark .text-gray-300 {
  color: #d1d5db !important;
}

.dark .text-gray-400 {
  color: #9ca3af !important;
}

/* Borders */
.dark .border-gray-100 {
  border-color: #374151 !important;
}

.dark .border-gray-200 {
  border-color: #4b5563 !important;
}

/* Hover states */
.dark .hover\:bg-gray-100:hover {
  background-color: #374151 !important;
}

.dark .hover\:bg-gray-50:hover {
  background-color: #4b5563 !important;
}

/* Inputs */
.dark input,
.dark textarea {
  background-color: #374151 !important;
  color: #f9fafb !important;
  border-color: #4b5563 !important;
}

.dark input::placeholder,
.dark textarea::placeholder {
  color: #9ca3af !important;
}

/* Modal backgrounds */
.dark .bg-black\/50 {
  background-color: rgba(0, 0, 0, 0.7) !important;
}

/* Menu lateral */
.dark .bg-gray-800 {
  background-color: #1f2937 !important;
}

.dark .border-gray-600 {
  border-color: #4b5563 !important;
}

/* Corrigir a barra lateral no modo claro */
.bg-white {
  background-color: #ffffff !important;
}

.dark .bg-white {
  background-color: #1f2937 !important;
}

/* Corrigir texto nas caixas de instru√ß√£o no dark mode */
.dark .bg-gradient-to-br.from-red-50.to-pink-50 {
  background: linear-gradient(to bottom right, #374151, #4b5563) !important;
}

.dark .border-red-100 {
  border-color: #4b5563 !important;
}

.dark .text-gray-700 {
  color: #e5e7eb !important;
}

/* Corrigir cores espec√≠ficas do menu lateral */
.dark .text-gray-300 {
  color: #d1d5db !important;
}

.dark .hover\:text-red-400:hover {
  color: #f87171 !important;
}

/* Corrigir cores dos √≠cones no menu lateral */
.dark .text-black {
  color: #d1d5db !important;
}

/* Garantir que o menu lateral mude corretamente */
aside.bg-white {
  background-color: #ffffff !important;
}

.dark aside.bg-white {
  background-color: #1f2937 !important;
}

/* Corrigir texto em caixas vermelhas claras */
.bg-red-50 {
  background-color: #fef2f2 !important;
}

.dark .bg-red-50 {
  background-color: #7f1d1d !important;
}

.dark .text-red-700 {
  color: #fca5a5 !important;
}

/* Corrigir bordas no dark mode */
.border-gray-200 {
  border-color: #e5e7eb !important;
}

.dark .border-gray-200 {
  border-color: #374151 !important;
}

/* Corrigir hover states no menu lateral */
.hover\:bg-gray-100:hover {
  background-color: #f3f4f6 !important;
}

.dark .hover\:bg-gray-100:hover {
  background-color: #374151 !important;
}

/* Corrigir cores espec√≠ficas para a p√°gina de verifica√ß√£o de email */
.dark .bg-white.rounded-2xl {
  background-color: #1f2937 !important;
}

.dark .text-gray-900 {
  color: #f9fafb !important;
}

.dark .text-gray-600 {
  color: #d1d5db !important;
}

/* Corrigir a caixa de instru√ß√µes espec√≠fica da p√°gina de verifica√ß√£o */
.bg-gradient-to-br.from-red-50.to-pink-50 {
  background: linear-gradient(to bottom right, #fef2f2, #fdf2f8) !important;
}

.dark .bg-gradient-to-br.from-red-50.to-pink-50 {
  background: linear-gradient(to bottom right, #7f1d1d, #831843) !important;
}

.border-red-100 {
  border-color: #fee2e2 !important;
}

.dark .border-red-100 {
  border-color: #991b1b !important;
}

.text-gray-700 {
  color: #374151 !important;
}

.dark .text-gray-700 {
  color: #e5e7eb !important;
}

/* Corrigir texto em bot√µes e links */
.dark .text-custom-red {
  color: #fca5a5 !important;
}

.dark .hover\:text-red-700:hover {
  color: #fca5a5 !important;
}

/* Corrigir fundos de cards */
.bg-gray-50 {
  background-color: #f9fafb !important;
}

.dark .bg-gray-50 {
  background-color: #374151 !important;
}

/* Corrigir sombras no dark mode */
.shadow-xl {
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
    0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
}

.dark .shadow-xl {
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5),
    0 10px 10px -5px rgba(0, 0, 0, 0.3) !important;
}

/* Corrigir √≠cone de email na p√°gina de verifica√ß√£o */
.bg-red-50 {
  background-color: #fef2f2 !important;
}

.dark .bg-red-50 {
  background-color: #7f1d1d !important;
}

.text-\[\#990000\] {
  color: #990000 !important;
}

.dark .text-\[\#990000\] {
  color: #fca5a5 !important;
}

/* Melhorar contraste do √≠cone de email */
.w-20.h-20.rounded-full {
  background-color: #fef2f2 !important;
}

.dark .w-20.h-20.rounded-full {
  background-color: #7f1d1d !important;
}

/* Corrigir pulse ring para ser vis√≠vel em ambos os temas */
.bg-\[\#990000\] {
  background-color: #990000 !important;
}

.dark .bg-\[\#990000\] {
  background-color: #b91c1c !important;
}

/* CORRE√á√ïES ADICIONAIS PARA OS PROBLEMAS RELATADOS */

/* Garantir que inputs no modo claro tenham fundo branco */
input,
textarea {
  background-color: #ffffff !important;
  color: #1f2937 !important;
}

/* Corrigir especificamente inputs em modais no modo claro */
.bg-white input:not([readonly]) {
  background-color: #ffffff !important;
  color: #1f2937 !important;
}

.bg-white input:not([readonly])::placeholder {
  color: #6b7280 !important;
}

/* Garantir contraste dos √≠cones no menu lateral no modo claro */
aside.bg-white button {
  color: #374151 !important;
}

aside.bg-white button:hover {
  color: #990000 !important;
}

/* Corrigir cores do menu lateral no dark mode */
.dark aside.bg-white {
  background-color: #1f2937 !important;
}

.dark aside.bg-white button {
  color: #d1d5db !important;
}

.dark aside.bg-white button:hover {
  color: #f87171 !important;
}

/* Corrigir barra de busca no dark mode */
.dark .flex.items-center.bg-white {
  background-color: #374151 !important;
  border-color: #4b5563 !important;
}

.dark .flex.items-center.bg-white input {
  background-color: #374151 !important;
  color: #f9fafb !important;
}

.dark .flex.items-center.bg-white input::placeholder {
  color: #9ca3af !important;
}

/* Corre√ß√µes espec√≠ficas para a barra de busca na home e pesquisa */
.dark .bg-white.rounded-lg.shadow-md {
  background-color: #374151 !important;
}

.dark .bg-white.rounded-lg.shadow-md input {
  background-color: #374151 !important;
  color: #f9fafb !important;
}

.dark .bg-white.rounded-lg.shadow-md input::placeholder {
  color: #9ca3af !important;
}

/* Garantir que inputs readonly mantenham estilo correto */
input[readonly] {
  background-color: #f9fafb !important;
  color: #6b7280 !important;
}

.dark input[readonly] {
  background-color: #374151 !important;
  color: #9ca3af !important;
}

/* PADR√ÉO PARA TODAS AS CAIXAS DE TEXTO NO DARK MODE */
.dark input:not([readonly]),
.dark textarea:not([readonly]),
.dark select:not([readonly]) {
  background-color: #374151 !important;
  color: #f9fafb !important;
  border-color: #4b5563 !important;
}

.dark input:not([readonly])::placeholder,
.dark textarea:not([readonly])::placeholder {
  color: #9ca3af !important;
}

/* Estilo padr√£o para inputs em formul√°rios */
.input-padrao {
  @apply w-full px-4 py-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-200 dark:focus:ring-red-800 text-gray-900 dark:text-gray-100 transition-colors duration-300;
}

.input-padrao::placeholder {
  @apply text-gray-500 dark:text-gray-400;
}

/* Estilo para inputs readonly */
.input-readonly {
  @apply w-full px-4 py-3 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-700 dark:text-gray-400 cursor-not-allowed;
}

/* Corre√ß√£o espec√≠fica para telas de login e cadastro */
.form-input-login {
  @apply w-full px-4 py-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-200 dark:focus:ring-red-800 text-gray-900 dark:text-gray-100 transition-colors duration-300;
}

.form-input-login::placeholder {
  @apply text-gray-500 dark:text-gray-400;
}


### ARQUIVO: layout.tsx ###
import type { Metadata } from "next";
import { Geist, Geist_Mono, Poppins } from "next/font/google";
import "./globals.css";
import { ThemeProvider } from "next-themes";

const poppins = Poppins({
  subsets: ["latin"],
  weight: ["400", "500", "600", "700"],
  variable: "--font-poppins",
});

export const metadata: Metadata = {
  title: "LaVerse",
  description: "Plataforma para conex√£o entre pesquisadores e empresas.",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="pt-BR" className={poppins.variable} suppressHydrationWarning>
      <body className={`${poppins.className} antialiased`}>
        <ThemeProvider attribute="class" defaultTheme="system" enableSystem>
          {children}
        </ThemeProvider>
      </body>
    </html>
  );
}


### ARQUIVO: not-found.tsx ###
"use client";

import { useRouter } from "next/navigation";
import { useState, useEffect } from "react";
import Image from "next/image";
import { Home, ArrowLeft } from "lucide-react";

export default function NotFound() {
  const router = useRouter();
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
  }, []);

  return (
    <div className="min-h-screen bg-gray-100 flex flex-col">
      {/* Header */}
      <header className="bg-white shadow-sm fixed w-full top-0 z-40">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center h-16">
            <div className="flex items-center">
              <Image
                src="/images/logo_1.png"
                alt="Logo"
                width={150}
                height={150}
                quality={100}
                priority
                className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer"
                onClick={() => router.push("/")}
              />
            </div>

          </div>
        </div>
      </header>

      {/* Main Content */}
      <main className="flex-grow flex items-center justify-center pt-16">
        <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
          <div
            className={`transition-all duration-1000 ${
              mounted
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            {/* 404 Illustration */}
            <div className="mb-8">
              <h1 className="text-9xl font-bold text-[#990000]">
                404
              </h1>
            </div>

            {/* Error Message */}
            <h2
              className={`text-4xl font-bold text-gray-900 mb-4 transition-all duration-1000 delay-200 ${
                mounted
                  ? "opacity-100 translate-y-0"
                  : "opacity-0 translate-y-10"
              }`}
            >
              P√°gina n√£o encontrada
            </h2>

            <p
              className={`text-xl text-gray-600 mb-8 max-w-2xl mx-auto transition-all duration-1000 delay-300 ${
                mounted
                  ? "opacity-100 translate-y-0"
                  : "opacity-0 translate-y-10"
              }`}
            >
              Desculpe, n√£o conseguimos encontrar a p√°gina que voc√™ est√°
              procurando. A p√°gina pode ter sido movida, exclu√≠da ou nunca
              existiu.
            </p>

            {/* Action Buttons */}
            <div
              className={`flex flex-col sm:flex-row gap-4 justify-center items-center transition-all duration-1000 delay-500 ${
                mounted
                  ? "opacity-100 translate-y-0"
                  : "opacity-0 translate-y-10"
              }`}
            >
              <button
                onClick={() => router.back()}
                className="flex items-center gap-2 px-6 py-3 border-2 border-[#990000] text-[#990000] rounded-lg hover:bg-[#990000] hover:text-white transition-all duration-300 hover:shadow-lg"
              >
                <ArrowLeft className="w-5 h-5" />
                Voltar
              </button>

              <button
                onClick={() => router.push("/")}
                className="flex items-center gap-2 px-6 py-3 bg-[#990000] text-white rounded-lg hover:bg-red-800 transition-all duration-300 hover:shadow-lg hover:scale-105"
              >
                <Home className="w-5 h-5" />
                Ir para In√≠cio
              </button>
            </div>

            {/* Helpful Links */}
            <div
              className={`mt-16 p-8 bg-white rounded-lg shadow-md transition-all duration-1000 delay-700 ${
                mounted
                  ? "opacity-100 translate-y-0"
                  : "opacity-0 translate-y-10"
              }`}
            >
              <h3 className="text-xl font-bold text-[#990000] mb-4">
                Talvez voc√™ esteja procurando por:
              </h3>
              <div className="grid md:grid-cols-3 gap-4 text-left">
                <button
                  onClick={() => router.push("/login")}
                  className="p-4 border border-gray-200 rounded-lg hover:border-[#990000] hover:shadow-md transition-all duration-300 text-gray-700 hover:text-[#990000]"
                >
                  <div className="font-semibold mb-1">Fazer Login</div>
                  <div className="text-sm text-gray-500">
                    Acesse sua conta
                  </div>
                </button>

                <button
                  onClick={() => router.push("/criarConta")}
                  className="p-4 border border-gray-200 rounded-lg hover:border-[#990000] hover:shadow-md transition-all duration-300 text-gray-700 hover:text-[#990000]"
                >
                  <div className="font-semibold mb-1">Criar Conta</div>
                  <div className="text-sm text-gray-500">
                    Cadastre-se na plataforma
                  </div>
                </button>

                <button
                  onClick={() => {
                    router.push("/");
                    setTimeout(() => {
                      document
                        .getElementById("contato")
                        ?.scrollIntoView({ behavior: "smooth" });
                    }, 100);
                  }}
                  className="p-4 border border-gray-200 rounded-lg hover:border-[#990000] hover:shadow-md transition-all duration-300 text-gray-700 hover:text-[#990000]"
                >
                  <div className="font-semibold mb-1">Fale Conosco</div>
                  <div className="text-sm text-gray-500">
                    Entre em contato
                  </div>
                </button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  );
}

### ARQUIVO: page.tsx ###
"use client";

import { useRouter } from "next/navigation";
import { useState, useEffect } from "react";
import Image from "next/image";
import { Lightbulb } from "lucide-react";
import { CircleHelp } from "lucide-react";
import { Workflow } from "lucide-react";
import { SearchCheck } from "lucide-react";
import { CircleUser } from "lucide-react";
import { Earth } from "lucide-react";

export default function Inicio() {
  const router = useRouter();
  const [currentSection, setCurrentSection] = useState(0);
  const [isVisible, setIsVisible] = useState({});

  const sections = [
    "hero",
    "projeto",
    "como-funciona",
    "beneficios",
    "video",
    "integrantes",
    "contato",
  ];

  const integrantes = [
        { nome: "Mariana Braguim", foto: "/images/mariana.png" },
        { nome: "Arthur Santos", foto: "/images/arthur.jpeg" },
        { nome: "Giovanni Policene", foto: "/images/giovanni.jpg" },
        { nome: "Matheus Hoerlle", foto: "/images/matheus.jpeg" },
        { nome: "Lucas Carvalho", foto: "/images/lucas.jpeg" },
      ];

  useEffect(() => {
    const observerOptions = {
      threshold: 0.3,
      rootMargin: "-10% 0px -10% 0px",
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          setIsVisible((prev) => ({
            ...prev,
            [entry.target.id]: true,
          }));

          const sectionIndex = sections.indexOf(entry.target.id);
          if (sectionIndex !== -1) {
            setCurrentSection(sectionIndex);
          }
        }
      });
    }, observerOptions);

    sections.forEach((section) => {
      const element = document.getElementById(section);
      if (element) observer.observe(element);
    });

    return () => observer.disconnect();
  }, []);

  const scrollToSection = (sectionId) => {
    document.getElementById(sectionId)?.scrollIntoView({
      behavior: "smooth",
      block: "start",
    });
  };

  const scrollToNext = () => {
    const nextIndex = (currentSection + 1) % sections.length;
    scrollToSection(sections[nextIndex]);
  };

  return (
    <div className="min-h-screen bg-gray-100">
      {/* Navigation Dots */}
      <div className="fixed bottom-3 left-1/2 transform -translate-x-1/2 z-50">
        {sections.map((section, index) => (
          <button
            key={section}
            onClick={() => scrollToSection(section)}
            className={`w-3 h-3 rounded-full transition-all duration-300 mr-1 ${
              currentSection === index
                ? "bg-[#990000] scale-125"
                : "bg-gray-400 hover:bg-gray-600"
            }`}
            title={section.charAt(0).toUpperCase() + section.slice(1)}
          />
        ))}
      </div>

      {/* Scroll to Next Button */}
      <button
        onClick={scrollToNext}
        className="fixed bottom-6 right-6 bg-[#990000] text-white p-3 rounded-full shadow-lg hover:bg-red-800 transition-all duration-300 hover:scale-110 z-50"
      >
        <svg
          className="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeWidth={2}
            d="M19 14l-7 7m0 0l-7-7m7 7V3"
          />
        </svg>
      </button>

      {/* Header */}
      <header className="bg-white shadow-sm fixed w-full top-0 z-40 transition-all duration-300">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center h-16">
            <div className="flex items-center">
              <Image
                src="/images/logo_1.png"
                alt="Logo"
                width={150}
                height={150}
                quality={100}
                priority
                className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer mx-auto"
              />
            </div>
            <nav className="hidden md:flex space-x-8">
              <button
                onClick={() => scrollToSection("projeto")}
                className="text-gray-800 hover:text-[#990000] transition-colors"
              >
                Projeto
              </button>
              <button
                onClick={() => scrollToSection("integrantes")}
                className="text-gray-800 hover:text-[#990000] transition-colors"
              >
                Integrantes
              </button>
              <button
                onClick={() => scrollToSection("contato")}
                className="text-gray-800 hover:text-[#990000] transition-colors"
              >
                Contato
              </button>
            </nav>
            <div className="flex space-x-4">
              <button
                onClick={() => router.push("/login")}
                className="px-4 py-2 border-2 border-[#990000] text-[#990000] rounded hover:bg-[#990000] hover:text-white transition-all duration-300"
              >
                Entrar
              </button>
              <button
                onClick={() => router.push("/criarConta")}
                className="px-4 py-2 bg-[#990000] text-white rounded hover:bg-red-800 transition-all duration-300 hover:shadow-lg"
              >
                Cadastro
              </button>
            </div>
          </div>
        </div>
      </header>

      {/* Hero Section */}
      <section
        id="hero"
        className="bg-white py-20 pt-20 min-h-screen flex items-center"
      >
        <div className="mx-auto w-full pr-10">
          <div className="flex flex-col lg:flex-row items-center">
            <div
              className={`lg:w-1/2 lg:pr-12 transition-all duration-1000 ${
                isVisible.hero
                  ? "opacity-100 translate-x-0"
                  : "opacity-0 -translate-x-10"
              }`}
            >
              <Image
                src="/images/note.png"
                alt="Logo"
                width={1048}
                height={1048}
                quality={100}
                priority
                className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer mx-auto"
              />
            </div>
            <div
              className={`lg:w-1/2 mt-10 lg:mt-0 transition-all duration-1000 delay-300 ${
                isVisible.hero
                  ? "opacity-100 translate-x-0"
                  : "opacity-0 translate-x-10"
              }`}
            >
              <h1 className="text-4xl font-bold text-gray-900 mb-6 mr-20">
                Plataforma de pesquisa unificada para pesquisadores e empresas
              </h1>
              <p className="text-gray-700 mb-8 mr-20">
                Conectamos pesquisadores e empresas com um √∫nico ecossistema a
                busca por talentos, inova√ß√£o e oportunidades.
              </p>
              <button className="bg-[#990000] text-white px-8 py-3 rounded-lg hover:bg-red-800 transition-all duration-300  hover:shadow-lg hover:scale-105">
                Veja como funciona!
              </button>
            </div>
          </div>
        </div>
      </section>

      {/* Projeto Section */}
      <section
        id="projeto"
        className="bg-gray-50 py-20 min-h-screen flex items-center"
      >
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
          <h2
            className={`text-3xl mb-8 font-bold text-center text-[#990000] transition-all duration-1000 ${
              isVisible.projeto
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Projeto
          </h2>

          <div className="grid md:grid-cols-2 gap-12 items-center mb-16">
            <div
              className={`transition-all duration-1000 delay-300 ${
                isVisible.projeto
                  ? "opacity-100 translate-x-0"
                  : "opacity-0 -translate-x-10"
              }`}
            >
              <div className="flex items-start mb-6 group">
                <div className="bg-[#990000] p-2 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold mr-4 mt-1 group-hover:scale-110 transition-transform duration-300">
                  <CircleHelp />
                </div>
                <div>
                  <h3 className="text-2xl text-[#990000] mb-2">
                    O que √© a plataforma?
                  </h3>
                  <p className="text-gray-700">
                    A plataforma conecta pesquisadores especializados com
                    empresas que buscam solu√ß√µes inovadoras atrav√©s de um
                    sistema de pesquisa por palavra-chave, facilitando a
                    comunica√ß√£o e colabora√ß√£o entre ambos os lados.
                  </p>
                </div>
              </div>

              <div className="flex items-start group">
                <div className="bg-[#990000] p-2 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold mr-4 mt-1 group-hover:scale-110 transition-transform duration-300">
                  <Lightbulb />
                </div>
                <div>
                  <h3 className="text-2xl  text-[#990000] mb-2">
                    Por que criamos essa solu√ß√£o?
                  </h3>
                  <p className="text-gray-700">
                    Identificamos a necessidade de uma ponte entre o
                    conhecimento acad√™mico e as demandas do mercado. Nossa
                    plataforma oferece uma solu√ß√£o eficiente para conectar
                    talentos especializados com empresas que buscam inova√ß√£o e
                    solu√ß√µes espec√≠ficas.
                  </p>
                </div>
              </div>
            </div>

            <div
              className={`transition-all duration-1000 delay-500 ${
                isVisible.projeto
                  ? "opacity-100 translate-x-0"
                  : "opacity-0 translate-x-10"
              }`}
            >
              <Image
                src="/images/note2.png"
                alt="Logo"
                width={400}
                height={400}
                quality={100}
                priority
                className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer mx-auto"
              />
            </div>
          </div>
        </div>
      </section>

      {/* Como a plataforma resolve isso? */}
      <section
        id="como-funciona"
        className="bg-[#990000] py-20 min-h-screen flex items-center"
      >
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center w-full">
          <h2
            className={`text-3xl font-bold text-white mb-4 transition-all duration-1000 ${
              isVisible["como-funciona"]
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Como a plataforma resolve isso?
          </h2>
          <p
            className={`text-red-50 mb-12 max-w-3xl mx-auto transition-all duration-1000 delay-200 ${
              isVisible["como-funciona"]
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Nossa plataforma atua como intermedi√°ria entre pesquisadores e
            empresas, facilitando encontros estrat√©gicos que geram valor real
            para ambos os lados atrav√©s de funcionalidades espec√≠ficas.
          </p>

          <div className="grid md:grid-cols-4 gap-6">
            {[
              {
                icon: <Workflow className="w-14 h-14" />,
                title: "Integra√ß√£o Inteligente",
                desc: "Encontre especialistas atrav√©s de palavras-chave relacionadas √† sua √°rea de interesse.",
              },
              {
                icon: <SearchCheck className="w-14 h-14" />,
                title: "Busca Avan√ßada",
                desc: "Utilize filtros espec√≠ficos para encontrar o perfil ideal para seu projeto.",
              },
              {
                icon: <CircleUser className="w-14 h-14" />,
                title: "Perfil Completo",
                desc: "Visualize informa√ß√µes detalhadas sobre forma√ß√£o, experi√™ncia e projetos.",
              },
              {
                icon: <Earth className="w-14 h-14" />,
                title: "Conex√£o Direta",
                desc: "Conecte-se diretamente com pesquisadores atrav√©s de nossa plataforma.",
              },
            ].map((item, index) => (
              <div
                key={index}
                className={`bg-white p-8 rounded-lg hover:shadow-xl hover:scale-105 transition-all duration-500 ${
                  isVisible["como-funciona"]
                    ? "opacity-100 translate-y-0"
                    : "opacity-0 translate-y-10"
                }`}
                style={{ transitionDelay: `${400 + index * 100}ms` }}
              >
                <div className="bg-gray-100 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-4 hover:bg-gray-200 transition-colors duration-300">
                  <span className="text-5xl text-[#990000]">{item.icon}</span>
                </div>
                <h3 className="font-bold mb-2 text-xl text-[#990000]">
                  {item.title}
                </h3>
                <p className="text-md text-gray-600">{item.desc}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Por que usar a plataforma? */}
      <section
        id="beneficios"
        className="bg-white py-20 min-h-screen flex items-center relative overflow-hidden"
      >
        <div className="w-full">
          <h2
            className={`text-3xl font-bold text-center text-[#990000] transition-all duration-1000 ${
              isVisible.beneficios
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Por que usar a plataforma?
          </h2>

          {/* Imagem de fundo */}
          <div
            className={`absolute top-10 -translate-x-1/2 z-0 transition-all duration-1000 delay-300 ${
              isVisible.beneficios
                ? "opacity-100 translate-x-0"
                : "opacity-0 -translate-x-10"
            }`}
          >
            <Image
              src="/images/fundo.png"
              alt="Logo"
              width={400}
              height={400}
              quality={100}
              priority
              className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer"
            />
          </div>

          {/* Conte√∫do principal */}
          <div className="relative flex justify-center z-10">
            <div className="lg:w-2/3 lg:mb-20 mt-20 mx-auto">
              <div className="grid md:grid-cols-2 gap-8">
                <div
                  className={`bg-[#990000] text-white p-12 rounded-lg hover:shadow-xl hover:scale-105 transition-all duration-500 ${
                    isVisible.beneficios
                      ? "opacity-100 translate-y-0"
                      : "opacity-0 translate-y-10"
                  }`}
                  style={{ transitionDelay: "500ms" }}
                >
                  <h3 className="text-xl font-bold mb-4">Para Pesquisadores</h3>
                  <ul className="space-y-2 text-sm">
                    <li>‚Ä¢ Maior visibilidade fora do meio acad√™mico;</li>
                    <li>‚Ä¢ Oportunidade de aplicar conhecimento em projetos reais;</li>
                    <li>‚Ä¢ Conex√£o com empresas que valorizam inova√ß√£o.</li>
                  </ul>
                </div>

                <div
                  className={`bg-[#990000] text-white p-12 rounded-lg hover:shadow-xl hover:scale-105 transition-all duration-500 ${
                    isVisible.beneficios
                      ? "opacity-100 translate-y-0"
                      : "opacity-0 translate-y-10"
                  }`}
                  style={{ transitionDelay: "700ms" }}
                >
                  <h3 className="text-xl font-bold mb-4">Para Empresas</h3>
                  <ul className="space-y-2 text-sm">
                    <li>‚Ä¢ Acesso r√°pido a especialistas qualificados;</li>
                    <li>
                      ‚Ä¢ Redu√ß√£o de tempo na busca por profissionais;
                    </li>
                    <li>‚Ä¢ Apoio √† inova√ß√£o e pesquisa de alto n√≠vel.</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Video Section */}
      <section
        id="video"
        className="bg-[#990000] py-20 min-h-screen flex items-center"
      >
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center w-full">
          <p
            className={`text-red-50 mb-8 transition-all duration-1000 ${
              isVisible.video
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Assista ao tutorial completo de como se cadastrar na plataforma
            abaixo
          </p>
          <h2
            className={`text-2xl font-bold text-white mb-12 transition-all duration-1000 delay-200 ${
              isVisible.video
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Como exportar o meu curriculo lattes para o LaVerse?
          </h2>

          <div className="flex flex-col lg:flex-row items-center justify-center gap-12">
            <div
              className={`w-96 h-64 rounded-lg overflow-hidden shadow-lg transition-all duration-500 hover:scale-105 ${
                isVisible.video
                  ? "opacity-100 translate-x-0"
                  : "opacity-0 -translate-x-10"
              }`}
              style={{ transitionDelay: "400ms" }}
            >
              <iframe
                className="w-full h-full"
                src="https://www.youtube.com/embed/mTZFA9_V2Qk?si=CM5RjuAxd0srXLoM"
                title="YouTube video"
                frameBorder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowFullScreen
              ></iframe>
            </div>

            <div
              className={`text-center max-w-md transition-all duration-1000 delay-600 ${
                isVisible.video
                  ? "opacity-100 translate-x-0"
                  : "opacity-0 translate-x-10"
              }`}
            >
              <h3 className="text-xl font-bold text-white mb-4">
                üîí Seguran√ßa garantida:{" "}
                <span className="font-normal">
                  Seus dados sens√≠veis s√£o protegidos e utilizados apenas para
                  fins de conex√£o entre pesquisadores e empresas, em
                  conformidade com a LGPD.
                </span>
              </h3>
              <Image
                src="/images/video.png"
                alt="Logo"
                width={250}
                height={250}
                quality={100}
                priority
                className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer"
              />
            </div>
          </div>
        </div>
      </section>

      {/* Integrantes */}
      <section
        id="integrantes"
        className="bg-white py-20 min-h-screen flex items-center"
      >
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
          <h2
            className={`text-3xl font-bold text-center mb-16 text-[#990000] transition-all duration-1000 ${
              isVisible.integrantes
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Integrantes
          </h2>

          <div
            className={`bg-[#990000] p-8  mb-8 hover:shadow-xl transition-all duration-500 ${
              isVisible.integrantes
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
            style={{ transitionDelay: "300ms" }}
          >
            <div className="flex justify-center space-x-8">
              {integrantes.map((item, index) => (
                <div key={index} className="text-center group">
                  <div className="w-24 h-24 rounded-full mx-auto mb-2 overflow-hidden group-hover:scale-110 transition-transform duration-300">
                    <img
                      src={item.foto}
                      alt={item.nome}
                      className="w-full h-full object-cover"
                    />
                  </div>

                  <p className="text-white text-sm">{item.nome}</p>
                </div>
              ))}
            </div>
          </div>

          <div className="flex justify-between items-start">
            <div
              className={`max-w-2xl transition-all duration-1000 delay-500 ${
                isVisible.integrantes
                  ? "opacity-100 translate-x-0"
                  : "opacity-0 -translate-x-10"
              }`}
            >
              <p className="text-gray-700 mb-4 mt-10 text-lg font-bold">
                O projeto foi desenvolvido por um grupo de estudantes
                comprometidos em criar solu√ß√µes inovadoras que conectem a
                pesquisa acad√™mica ao mercado. Cada integrante contribuiu com
                suas habilidades para tornar essa plataforma poss√≠vel.
              </p>
            </div>
            <div
              className={`bg-[#990000] p-8  mb-8 hover:shadow-xl transition-all duration-500 ${
                isVisible.integrantes
                  ? "opacity-100 translate-y-0"
                  : "opacity-0 translate-y-10"
              }`}
              style={{ transitionDelay: "300ms" }}
            >
              <div className="flex justify-center space-x-8">
                {[1].map((i) => (
                  <div key={i} className="text-center group">
                    <div className="w-24 h-24 bg-white rounded-full mx-auto mb-2 overflow-hidden group-hover:scale-110 transition-transform duration-300">
                      <img
                        src={"/images/aryel.png"}
                        alt="aryel"
                        className="w-full h-full object-cover"
                      />
                    </div>
                    <p className="text-white text-sm">Orientador - Aryel</p>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Contato */}
      <section
        id="contato"
        className="bg-gray-50 py-20 min-h-screen flex flex-col justify-between"
      >
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center w-full">
          <h2
            className={`text-3xl font-bold mb-8 text-[#990000] transition-all duration-1000 ${
              isVisible.contato
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Contato
          </h2>
          <div className="max-w-2xl mx-auto">
            <p
              className={`text-gray-700 mb-12 transition-all duration-1000 delay-200 ${
                isVisible.contato
                  ? "opacity-100 translate-y-0"
                  : "opacity-0 translate-y-10"
              }`}
            >
              Tem interesse em conhecer mais sobre o projeto ou falar com a
              nossa equipe? Estamos dispon√≠veis para tirar d√∫vidas, receber
              sugest√µes e compartilhar mais detalhes sobre a plataforma.
            </p>

            <div
              className={`flex justify-center transition-all duration-1000 delay-400 ${
                isVisible.contato
                  ? "opacity-100 scale-100"
                  : "opacity-0 scale-95"
              }`}
            >
              <Image
                src="/images/contato.png"
                alt="Logo"
                width={400}
                height={400}
                quality={100}
                priority
                className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer"
              />
            </div>
          </div>
        </div>

        {/* Footer dentro da se√ß√£o */}
        <div className="bg-[#990000] text-white py-20">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p className="flex items-center justify-center gap-2 mb-4">
              <span className="text-xl">‚úâÔ∏è</span> projetolaverse@gmail.com
            </p>
            <p className="text-sm text-red-200">
              ¬© 2025 Todos os direitos reservados. Este projeto √© resultado do
              Trabalho de Conclus√£o de Curso desenvolvido pelos alunos da
              Universidade Positiva.
            </p>
          </div>
        </div>
      </section>
    </div>
  );
}


### ARQUIVO: aguardandoVerificacao\page.tsx ###
"use client";

import Image from "next/image";
import { useSearchParams } from "next/navigation";
import { motion } from "framer-motion";
import { useEffect, useRef } from "react";

export default function AguardandoVerificacao() {
  const params = useSearchParams();
  const email = localStorage.getItem("email");
  const emailEnviadoRef = useRef(false);

  useEffect(() => {
    // Verifica se j√° enviou o email nesta sess√£o
    const emailJaEnviado = localStorage.getItem("emailVerificacaoEnviado");

    const verificarEmail = async () => {
      // Previne m√∫ltiplos envios
      if (emailEnviadoRef.current || emailJaEnviado) {
        console.log("Email j√° enviado, pulando...");
        return;
      }

      try {
        const token = localStorage.getItem("token");
        const email = localStorage.getItem("email");
        console.log("Enviando email de verifica√ß√£o para:", email);

        emailEnviadoRef.current = true;
        localStorage.setItem("emailVerificacaoEnviado", "true");

        const res = await fetch(
          `http://localhost:8080/api/email/enviarVerificacao?email=${email}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
          }
        );

        if (!res.ok) {
          console.error("Erro ao verificar e-mail:", res.status);
          // Se deu erro, permite tentar novamente
          emailEnviadoRef.current = false;
          localStorage.removeItem("emailVerificacaoEnviado");
        } else {
          console.log("E-mail enviado com sucesso!");
        }
      } catch (e) {
        console.error("Erro na requisi√ß√£o de verifica√ß√£o:", e);
        // Se deu erro, permite tentar novamente
        emailEnviadoRef.current = false;
        localStorage.removeItem("emailVerificacaoEnviado");
      }
    };

    verificarEmail();
  }, []); // Array de depend√™ncias vazio - executa apenas uma vez

  // Fun√ß√£o para reenviar email manualmente
  const reenviarEmail = async () => {
    try {
      const token = localStorage.getItem("token");
      const email = localStorage.getItem("email");
      console.log("Reenviando email para:", email);

      const res = await fetch(
        `http://localhost:8080/api/email/enviarVerificacao?email=${email}`,
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
        }
      );

      if (!res.ok) {
        console.error("Erro ao reenviar e-mail:", res.status);
        alert("Erro ao reenviar email. Tente novamente.");
      } else {
        console.log("E-mail reenviado com sucesso!");
        alert("Email reenviado com sucesso!");
      }
    } catch (e) {
      console.error("Erro ao reenviar email:", e);
      alert("Erro ao reenviar email. Tente novamente.");
    }
  };

  // Fun√ß√£o para ocultar parte do email
  const maskEmail = (email: string | null) => {
    if (!email) return "seu e-mail";
    const [user, domain] = email.split("@");
    if (user.length <= 3) return `${user[0]}***@${domain}`;
    return `${user.slice(0, 3)}***@${domain}`;
  };

  return (
    <div className="min-h-screen bg-white flex items-center justify-center px-6 py-12 relative overflow-hidden">
      {/* Elementos decorativos de fundo */}
      <div className="absolute top-0 left-0 w-96 h-96 bg-[#990000] opacity-5 rounded-full blur-3xl"></div>
      <div className="absolute bottom-0 right-0 w-96 h-96 bg-[#990000] opacity-5 rounded-full blur-3xl"></div>
      <motion.div
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.6 }}
        className="w-full max-w-lg"
      >
        {/* Card principal */}
        <div className="bg-white rounded-2xl shadow-xl p-8 md:p-12 relative overflow-hidden">
          {/* Detalhe decorativo vermelho no topo */}
          <div className="absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-[#990000] via-red-600 to-[#990000]"></div>

          {/* Logo */}
          <div className="mb-8 flex justify-center">
            <motion.div
              initial={{ scale: 0.8, opacity: 0 }}
              animate={{ scale: 1, opacity: 1 }}
              transition={{ delay: 0.2, duration: 0.5 }}
            >
              <Image
                src="/images/logo_1.png"
                alt="Logo"
                width={180}
                height={180}
                quality={100}
                priority
                className="drop-shadow-lg"
              />
            </motion.div>
          </div>

          {/* √çcone de email */}
          <motion.div
            initial={{ scale: 0 }}
            animate={{ scale: 1 }}
            transition={{ delay: 0.4, type: "spring", stiffness: 200 }}
            className="mb-6 flex justify-center"
          >
            <div className="relative">
              <div className="w-20 h-20 rounded-full bg-red-50 flex items-center justify-center">
                <svg
                  className="w-10 h-10 text-[#990000]"
                  fill="none"
                  stroke="currentColor"
                  strokeWidth={2}
                  viewBox="0 0 24 24"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                  />
                </svg>
              </div>
            </div>
          </motion.div>

          {/* T√≠tulo */}
          <h1 className="text-3xl md:text-4xl font-bold text-gray-900 mb-4 text-center">
            Verifique seu e-mail
          </h1>

          {/* Descri√ß√£o */}
          <p className="text-gray-600 text-center leading-relaxed mb-6">
            Enviamos um link de confirma√ß√£o para
            <br />
            <span className="font-semibold text-[#990000] inline-block mt-2">
              {maskEmail(email)}
            </span>
          </p>

          {/* Instru√ß√µes */}
          <div className="bg-gradient-to-br from-red-50 to-pink-50 rounded-xl p-6 mb-6 border border-red-100">
            <p className="text-gray-700 text-sm text-center leading-relaxed">
              Clique no link recebido para confirmar seu cadastro e ativar sua
              conta. O link √© v√°lido por 24 horas.
            </p>
          </div>

          {/* Bot√£o para reenviar email */}
          <div className="text-center mb-6">
            <button
              onClick={reenviarEmail}
              className="text-[#990000] hover:text-red-700 font-medium underline transition"
            >
              Reenviar email de verifica√ß√£o
            </button>
          </div>

          {/* Nota de rodap√© */}
          <div className="pt-6 border-t border-gray-100">
            <p className="text-xs text-gray-500 text-center leading-relaxed">
              N√£o recebeu o e-mail? Verifique sua pasta de spam ou lixo
              eletr√¥nico.
            </p>
          </div>
        </div>

        {/* Link de suporte (opcional) */}
        <p className="text-center mt-6 text-sm text-gray-500">
          Precisa de ajuda?{" "}
          <a
            href="#"
            className="text-[#990000] hover:text-red-700 font-medium transition"
          >
            Entre em contato
          </a>
        </p>
      </motion.div>
    </div>
  );
}


### ARQUIVO: cadastro-empresa\CompanyRegistration.tsx ###
"use client";

import { useRouter } from "next/navigation";
import Image from "next/image";
import React, { useState } from "react";

export default function CompanyRegistration() {
  const router = useRouter();

  // Aba ativa
  const [abaAtiva, setAbaAtiva] = useState("empresa");

  // Estados para cada campo
  const [nomeComercial, setEmpresa] = useState("");
  const [cnpj, setCNPJ] = useState("");
  const [nomeRegistro, setNomeRegistro] = useState("");
  const [telefone, setTelefone] = useState("");
  const [email, setEmail] = useState("");
  const [site, setSite] = useState("");
  const [setor, setSetor] = useState("");
  const [frase, setFrase] = useState("");
  const [textoEmpresa, setTextoEmpresa] = useState("");

  // Endere√ßo
  const [logradouro, setLogradouro] = useState("");
  const [bairro, setBairro] = useState("");
  const [numeroEndereco, setNumero] = useState("");
  const [cidade, setCidade] = useState("");
  const [estado, setEstado] = useState("");
  const [cep, setCep] = useState("");

  const handleLogoClick = () => {
    window.location.href = "http://localhost:3000";
  };

  // M√°scara para telefone
  const handleTelefoneChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    let value = e.target.value.replace(/\D/g, "");
    if (value.length > 11) value = value.slice(0, 11);
    value = value.replace(/^(\d{2})(\d)/g, "($1) $2");
    value = value.replace(/(\d{5})(\d)/, "$1-$2");
    setTelefone(value);
  };

  //Fun√ß√£o que preenche as informa√ß√µes de endere√ßo com base no cep
  const buscarCep = async (valor: string) => {
    const cepFormatado = valor.replace(/\D/g, ""); // remove n√£o num√©ricos
    setCep(valor);

    if (cepFormatado.length === 8) {
      // s√≥ chama API se tiver 8 d√≠gitos
      try {
        const res = await fetch(
          `https://viacep.com.br/ws/${cepFormatado}/json/`
        );
        const data = await res.json();

        if (!data.erro) {
          setLogradouro(data.logradouro || "");
          setBairro(data.bairro || ""); // <- corrigido
          setCidade(data.localidade || ""); // <- cidade
          setEstado(data.uf || ""); // <- estado
        } else {
        }
      } catch (error) {
        console.error("Erro ao buscar CEP:", error);
      }
    }
  };

  // Fun√ß√£o para enviar os dados ao backend
  const handleSubmit = async () => {
    const idUsuario = localStorage.getItem("usuarioId");
    const token = localStorage.getItem("token");
    console.log(token);

    const dados = {
      nomeRegistro,
      nomeComercial,
      cnpj,
      numeroEndereco,
      bairro,
      cidade,
      estado,
      cep,
      telefone,
      email,
      site,
      setor,
      frase,
      textoEmpresa,
      logradouro,
    };

    try {
      const res = await fetch(
        "http://localhost:8080/api/empresas/salvarEmpresa",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
          body: JSON.stringify(dados),
        }
      );

      if (res.ok) {
        const empresaCriada = await res.json(); //Back retorna o id cadastrado
        console.log(token);

        if (token != null) {
          localStorage.setItem("token", token);
        }

        router.push(`/perfilEmpresa/${idUsuario}`); // vai direto para o perfil certo
      } else {
        const errorText = await res.text();
        console.error("Erro do backend:", errorText);
      }
    } catch (error) {
      console.error(error);
    }
  };

  // Valida√ß√£o da primeira aba antes de prosseguir
  const handleNext = () => {
    if (
      !nomeComercial ||
      !nomeRegistro ||
      !cnpj ||
      !telefone ||
      !email ||
      !setor
    ) {
      return;
    }
    setAbaAtiva("endereco");
  };

  const handleCNPJChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    let valor = e.target.value.replace(/\D/g, ""); // remove tudo que n√£o for n√∫mero
    if (valor.length > 14) valor = valor.slice(0, 14); // limita 14 d√≠gitos

    // aplica a m√°scara 00.000.000/0000-00
    valor = valor.replace(/^(\d{2})(\d)/, "$1.$2");
    valor = valor.replace(/^(\d{2})\.(\d{3})(\d)/, "$1.$2.$3");
    valor = valor.replace(/\.(\d{3})(\d)/, ".$1/$2");
    valor = valor.replace(/(\d{4})(\d)/, "$1-$2");

    setCNPJ(valor);
  };

  return (
    <div className="flex items-center justify-between h-screen bg-gray-100">
      {/* MENU LATERAL */}
      <div className="bg-[#990000] w-1/5 h-full flex flex-col items-center relative">
        <h2 className="text-white text-2xl font-bold text-center mt-20 mr-20">
          Criar Conta
        </h2>
        <div className="absolute top-1/2 transform -translate-y-1/2 flex flex-col items-start gap-6">
          {/* Aba Empresa */}
          <div
            className="cursor-pointer"
            onClick={() => setAbaAtiva("empresa")}
          >
            <h2 className="text-white text-lg font-bold">Dados da Empresa</h2>
            {abaAtiva === "empresa" && (
              <div className="bg-white h-0.5 w-full mt-1"></div>
            )}
          </div>

          {/* Aba Endere√ßo */}
          <div
            className="cursor-pointer"
            onClick={() => setAbaAtiva("endereco")}
          >
            <h2 className="text-white text-lg font-bold">Endere√ßo</h2>
            {abaAtiva === "endereco" && (
              <div className="bg-white h-0.5 w-full mt-1"></div>
            )}
          </div>
        </div>
      </div>

      {/* CONTE√öDO */}
      <div className="bg-white p-8 shadow-md w-4/5 h-full flex items-center justify-start flex-col overflow-y-auto">
        <Image
          src="/images/logo_1.png"
          alt="Logo"
          width={150}
          height={150}
          quality={100}
          priority
          className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer"
          onClick={handleLogoClick}
        />

        {/* CONTE√öDO DA ABA EMPRESA */}
        {abaAtiva === "empresa" && (
          <div className="w-full flex flex-col items-center">
            {/* Nome de registro da empresa */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={nomeRegistro}
                onChange={(e) => setNomeRegistro(e.target.value)}
                placeholder=" "
                required
                className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                            focus:border-red-700 focus:outline-none focus:ring-0
                            text-gray-700 py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                            peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                            peer-placeholder-shown:top-2
                            peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Nome de Registro *
              </label>
            </div>
            {/* Nome da Empresa */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={nomeComercial}
                onChange={(e) => setEmpresa(e.target.value)}
                placeholder=" "
                required
                className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                            focus:border-red-700 focus:outline-none focus:ring-0
                            text-gray-700 py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                            peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                            peer-placeholder-shown:top-2
                            peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Nome Comercial *
              </label>
            </div>

            {/* CNPJ */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={cnpj}
                onChange={handleCNPJChange}
                placeholder=" "
                required
                className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                            focus:border-red-700 focus:outline-none focus:ring-0
                            text-gray-700 py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                            peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                            peer-placeholder-shown:top-2
                            peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                CNPJ *
              </label>
            </div>

            {/* Telefone + Email */}
            <div className="flex gap-4 mt-8 w-2/3">
              <div className="relative w-1/3">
                <input
                  type="text"
                  value={telefone}
                  onChange={handleTelefoneChange}
                  placeholder=" "
                  required
                  className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 py-2 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  Telefone *
                </label>
              </div>
              <div className="relative w-2/3">
                <input
                  type="text"
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                  placeholder=" "
                  required
                  className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                            focus:border-red-700 focus:outline-none focus:ring-0
                            text-gray-700 py-2 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                            peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                            peer-placeholder-shown:top-2
                            peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  Email *
                </label>
              </div>
            </div>

            {/* site */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={site}
                onChange={(e) => setSite(e.target.value)}
                placeholder=" "
                className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                            focus:border-red-700 focus:outline-none focus:ring-0
                            text-gray-700 py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                            peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                            peer-placeholder-shown:top-2
                            peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Site
              </label>
            </div>

            {/* setor */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={setor}
                onChange={(e) => setSetor(e.target.value)}
                placeholder=" "
                required
                className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                            focus:border-red-700 focus:outline-none focus:ring-0
                            text-gray-700 py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                            peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                            peer-placeholder-shown:top-2
                            peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Setor *
              </label>
            </div>

            {/* frase */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={frase}
                onChange={(e) => setFrase(e.target.value)}
                placeholder=" "
                className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                            focus:border-red-700 focus:outline-none focus:ring-0
                            text-gray-700 py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                            peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                            peer-placeholder-shown:top-2
                            peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Frase
              </label>
              {/* √çcone de ? */}
              <div className="absolute right-0 top-0 mt-1 flex items-center">
                <span className="group relative cursor-pointer text-gray-500 font-bold text-lg">
                  ?{/* Tooltip */}
                  <span
                    className="absolute bottom-full mb-2 w-80 left-1/2 -translate-x-1/2 
                                    bg-gray-700 text-white text-xs rounded py-1 px-2 opacity-0 
                                    group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"
                  >
                    Use esse campo para adicionar um texto complementar, um
                    subtitulo que complemente o objetivo da sua empresa!
                  </span>
                </span>
              </div>
            </div>

            {/* texto da empresa */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={textoEmpresa}
                onChange={(e) => setTextoEmpresa(e.target.value)}
                placeholder=" "
                className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                            focus:border-red-700 focus:outline-none focus:ring-0
                            text-gray-700 py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                            peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                            peer-placeholder-shown:top-2
                            peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Descri√ß√£o da Empresa
              </label>
              {/* √çcone de ? */}
              <div className="absolute right-0 top-0 mt-1 flex items-center">
                <span className="group relative cursor-pointer text-gray-500 font-bold text-lg">
                  ?{/* Tooltip */}
                  <span
                    className="absolute bottom-full mb-2 w-80 left-1/2 -translate-x-1/2 
                                    bg-gray-700 text-white text-xs rounded py-1 px-2 opacity-0 
                                    group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"
                  >
                    Use esse campo para descrever a sua empresa, todas as
                    informa√ß√µes que voc√™ gostaria que as pessoas vissem sobre.
                  </span>
                </span>
              </div>
            </div>

            {/* Bot√£o de pr√≥ximo */}
            <div className="flex justify-end mt-8 w-2/3">
              <button
                onClick={handleNext}
                className="px-6 py-3 bg-red-700 text-white rounded-lg hover:bg-red-800 transition"
              >
                Pr√≥ximo
              </button>
            </div>
          </div>
        )}

        {/* CONTE√öDO DA ABA ENDERE√áO */}
        {abaAtiva === "endereco" && (
          <div className="w-full flex flex-col items-center">
            {/* CEP */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={cep}
                onChange={(e) => buscarCep(e.target.value)}
                maxLength={9} // formato 00000-000
                placeholder=" "
                required
                className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                            focus:border-red-700 focus:outline-none focus:ring-0
                            text-gray-700 py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                            peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                            peer-placeholder-shown:top-2
                            peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                CEP *
              </label>
            </div>

            {/* Logradouro */}
            <div className="flex gap-4 mt-8 w-2/3">
              <div className="relative w-3/4">
                <input
                  type="text"
                  value={logradouro}
                  onChange={(e) => setLogradouro(e.target.value)}
                  placeholder=" "
                  required
                  className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 py-2 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  Logradouro *
                </label>
              </div>
              <div className="relative w-1/4">
                <input
                  type="text"
                  value={numeroEndereco}
                  onChange={(e) => setNumero(e.target.value)}
                  placeholder=" "
                  required
                  className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 py-2 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  N√∫mero *
                </label>
              </div>
            </div>

            {/* Cidade + Estado */}
            <div className="flex gap-4 mt-8 w-2/3">
              <div className="relative w-1/3">
                <input
                  type="text"
                  value={bairro}
                  onChange={(e) => setBairro(e.target.value)}
                  placeholder=" "
                  required
                  className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 py-2 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  Bairro *
                </label>
              </div>

              <div className="relative w-1/3">
                <input
                  type="text"
                  value={cidade}
                  onChange={(e) => setCidade(e.target.value)}
                  placeholder=" "
                  required
                  className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 py-2 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  Cidade *
                </label>
              </div>

              <div className="relative w-1/3">
                <input
                  type="text"
                  value={estado}
                  onChange={(e) => setEstado(e.target.value)}
                  placeholder=" "
                  required
                  className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 py-2 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-0 -top-3.5 text-gray-500 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  Estado *
                </label>
              </div>
            </div>

            {/* Bot√£o de cadastrar */}
            <div className="flex justify-end mt-8 w-2/3">
              <button
                onClick={handleSubmit}
                className="px-6 py-3 bg-red-700 text-white rounded-lg hover:bg-red-800 transition"
              >
                Cadastrar
              </button>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}


### ARQUIVO: cadastro-empresa\page.tsx ###
import { Suspense } from 'react';
import CompanyRegistration from './CompanyRegistration';

export default function Inicio() {
  return (
        <div>
          <Suspense fallback={<p>Carregando...</p>}>
            <CompanyRegistration />
          </Suspense>
        </div>
      );
}


### ARQUIVO: cadastro-pesquisador\page.tsx ###
import { Suspense } from 'react';
import ResearcherRegistration from './ResearcherRegistration';

export default function Home() {
  return (
      <div>
        <Suspense fallback={<p>Carregando...</p>}>
          <ResearcherRegistration />
        </Suspense>
      </div>
    );
}


### ARQUIVO: cadastro-pesquisador\ResearcherRegistration.tsx ###
"use client";

import { useState, useRef } from "react";
import { useRouter } from "next/navigation";
import Image from "next/image";
import { motion, AnimatePresence } from "framer-motion";
import { TokenPayload } from "../types/auth.types";
import { jwtDecode } from "jwt-decode";

export default function ResearcherRegistration() {
  const [arquivo, setArquivo] = useState<File | null>(null);
  const [isDragging, setIsDragging] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const fileInputRef = useRef<HTMLInputElement>(null);
  const router = useRouter();

  const handleLogoClick = () => {
    window.location.href = "http://localhost:3000";
  };

  const handleDragEnter = (e: React.DragEvent<HTMLDivElement>) => {
    e.preventDefault();
    e.stopPropagation();
    setIsDragging(true);
    setError(null);
  };

  const handleDragLeave = (e: React.DragEvent<HTMLDivElement>) => {
    e.preventDefault();
    e.stopPropagation();
    setIsDragging(false);
  };

  const handleDragOver = (e: React.DragEvent<HTMLDivElement>) => {
    e.preventDefault();
    e.stopPropagation();
  };

  const handleDrop = (e: React.DragEvent<HTMLDivElement>) => {
    e.preventDefault();
    e.stopPropagation();
    setIsDragging(false);

    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {
      const file = e.dataTransfer.files[0];
      if (file.type === "text/xml" || file.name.endsWith(".xml")) {
        setArquivo(file);
        setError(null);
      } else {
        setError("Por favor, selecione um arquivo XML v√°lido.");
      }
    }
  };

  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    if (e.target.files && e.target.files.length > 0) {
      const file = e.target.files[0];
      if (file.type === "text/xml" || file.name.endsWith(".xml")) {
        setArquivo(file);
        setError(null);
      } else {
        setError("Por favor, selecione um arquivo XML v√°lido.");
      }
    }
  };

  const enviarArquivo = async (e: React.FormEvent) => {
    e.preventDefault();

    const token = localStorage.getItem("token");
    console.log(token);

    if (!arquivo) {
      setError("Selecione um arquivo XML.");
      return;
    }

    setIsLoading(true);
    setError(null);

    try {
      const idSalvo = localStorage.getItem("usuarioId");
      console.log(idSalvo);

      if (!idSalvo || idSalvo === "null" || idSalvo === "undefined") {
        console.error("ID do usu√°rio inv√°lido no localStorage:", idSalvo);
        setError("Erro: ID do usu√°rio n√£o encontrado. Fa√ßa o login novamente.");
        setIsLoading(false);
        return;
      }

      const formData = new FormData();
      const email = localStorage.getItem("email") || "";
      console.log(email);
      formData.append("xml", arquivo);
      formData.append("usuarioEmail", email);
      // Faz upload do XML
      const respostaUpload = await fetch("http://localhost:8080/api/upload", {
        method: "POST",
        body: formData,
      });

      if (!respostaUpload.ok) {
        throw new Error("Erro ao enviar o arquivo para upload.");
      }

      // L√™ o conte√∫do de palavras-chave que o backend respondeu
      const resultadoUpload = await respostaUpload.json();
      console.log(resultadoUpload);
      const palavrasChave = resultadoUpload.keywords;

      const requisicaoTokenAtualizado = await fetch(
        "http://localhost:8080/api/auth/refresh-token",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
        }
      );

      if (!requisicaoTokenAtualizado.ok) {
        throw new Error("Erro ao obter o novo token.");
      }

      const data = await requisicaoTokenAtualizado.json();
      const novoToken = data.token;
      localStorage.setItem("token", novoToken);

      const payload = jwtDecode<TokenPayload>(novoToken);
      localStorage.setItem("usuarioId", idSalvo);
      localStorage.setItem("tipo_usuario", payload.tipo_usuario);
      console.log(resultadoUpload.idPesquisador);

      const idPesquisador = resultadoUpload.idPesquisador;
      // Por fim, redireciona para a tela de tags com id + tags
      const tagsQuery = encodeURIComponent(palavrasChave.join(","));
      router.push(
        `/selecionandoTags?idPesquisador=${idPesquisador}&tags=${tagsQuery}`
      );
    } catch (error) {
      console.error("Erro no processo:", error);
      setError("Erro ao processar o arquivo ou salvar o pesquisador.");
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="flex flex-col md:flex-row min-h-screen font-[family-name:var(--font-geist-sans)] bg-white">
      {/* Lado esquerdo */}
      <motion.div
        initial={{ opacity: 0, x: -20 }}
        animate={{ opacity: 1, x: 0 }}
        transition={{ duration: 0.5 }}
        className="w-full md:w-1/2 bg-gradient-to-br from-gray-50 to-gray-100 flex flex-col items-center justify-center py-8 md:py-12 px-4"
      >
        <div className="w-full max-w-md flex flex-col items-center justify-center">
          <motion.div
            initial={{ scale: 0.9 }}
            animate={{ scale: 1 }}
            transition={{ type: "spring", stiffness: 200, damping: 10 }}
            className="flex flex-col items-center"
          >
            <Image
              src="/images/logo_1.png"
              alt="Logo"
              width={200}
              height={200}
              quality={100}
              priority
              className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer"
              onClick={handleLogoClick}
            />
            <motion.p
              className="text-center mt-6 text-gray-700 text-xl md:text-2xl font-medium"
              initial={{ opacity: 0, y: 10 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: 0.2, duration: 0.5 }}
            >
              Fa√ßa o Upload do seu curr√≠culo Lattes para finalizar o seu
              cadastro
            </motion.p>
          </motion.div>
        </div>

        <motion.div
          className="w-full max-w-2xl flex justify-center mt-8"
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          transition={{ delay: 0.4, duration: 0.5 }}
        >
          <Image
            src="/images/ilustracao-importacao.png"
            alt="ilustracao-importacao"
            width={600}
            height={600}
            className="w-full max-w-md md:max-w-lg lg:max-w-xl h-auto object-contain transform hover:scale-105 transition-transform duration-500"
            quality={100}
            priority
          />
        </motion.div>
      </motion.div>

      {/* Lado direito */}
      <motion.div
        initial={{ opacity: 0, x: 20 }}
        animate={{ opacity: 1, x: 0 }}
        transition={{ duration: 0.5 }}
        className="w-full md:w-1/2 bg-gradient-to-br from-[#990000] to-[#660000] text-white flex flex-col items-center justify-center py-12 px-4"
      >
        <div className="w-full max-w-md flex flex-col items-center">
          <motion.h1
            className="text-2xl md:text-3xl font-bold mb-6 text-center"
            initial={{ opacity: 0, y: -10 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.2, duration: 0.5 }}
          >
            Upload do Curr√≠culo Lattes (XML)
          </motion.h1>

          <form onSubmit={enviarArquivo} className="w-full max-w-sm">
            <input
              id="arquivo"
              type="file"
              accept=".xml"
              onChange={handleFileChange}
              ref={fileInputRef}
              className="hidden"
            />

            <motion.div
              className={`w-full p-8 rounded-xl border-2 border-dashed min-h-[250px] ${
                isDragging ? "border-white bg-[#b30000]" : "border-[#ff9999]"
              } flex flex-col items-center justify-center cursor-pointer transition-all duration-300 mb-4`}
              onClick={() => fileInputRef.current?.click()}
              onDragEnter={handleDragEnter}
              onDragLeave={handleDragLeave}
              onDragOver={handleDragOver}
              onDrop={handleDrop}
              whileHover={{ scale: 1.02 }}
              whileTap={{ scale: 0.95 }}
            >
              <motion.div
                animate={{ y: isDragging ? [0, -5, 0] : 0 }}
                transition={{ repeat: isDragging ? Infinity : 0, duration: 1 }}
              >
                <Image
                  src="/images/upload.png"
                  alt="curriculo-import"
                  width={120}
                  height={120}
                  className="mb-4"
                />
              </motion.div>

              <p className="text-center text-lg font-medium mb-2">
                {isDragging
                  ? "Solte seu arquivo aqui"
                  : "Arraste e solte ou clique para selecionar"}
              </p>
              <p className="text-center text-sm opacity-80">
                Apenas arquivos XML s√£o aceitos
              </p>
            </motion.div>

            {/* Mensagem de erro */}
            <AnimatePresence>
              {error && (
                <motion.div
                  initial={{ opacity: 0, height: 0 }}
                  animate={{ opacity: 1, height: "auto" }}
                  exit={{ opacity: 0, height: 0 }}
                  className="mb-4 w-full overflow-hidden"
                >
                  <div className="bg-red-100 border-l-4 border-red-500 text-red-700 p-3 rounded">
                    <div className="flex items-center">
                      <svg
                        className="w-5 h-5 mr-2"
                        fill="currentColor"
                        viewBox="0 0 20 20"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          fillRule="evenodd"
                          d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                          clipRule="evenodd"
                        />
                      </svg>
                      <span className="font-medium">{error}</span>
                    </div>
                  </div>
                </motion.div>
              )}
            </AnimatePresence>

            {/* Arquivo selecionado */}
            <AnimatePresence>
              {arquivo && (
                <motion.div
                  initial={{ opacity: 0, height: 0 }}
                  animate={{ opacity: 1, height: "auto" }}
                  exit={{ opacity: 0, height: 0 }}
                  className="mb-6 overflow-hidden"
                >
                  <div className="bg-[#b30000] rounded-lg p-4 flex items-center justify-between">
                    <div className="flex items-center">
                      <svg
                        className="w-6 h-6 mr-2"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          strokeWidth={2}
                          d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                        />
                      </svg>
                      <span className="truncate max-w-xs">{arquivo.name}</span>
                    </div>
                    <button
                      type="button"
                      onClick={() => setArquivo(null)}
                      className="text-white hover:text-gray-200 transition-colors duration-200 cursor-pointer"
                    >
                      <svg
                        className="w-5 h-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          strokeWidth={2}
                          d="M6 18L18 6M6 6l12 12"
                        />
                      </svg>
                    </button>
                  </div>
                </motion.div>
              )}
            </AnimatePresence>

            <motion.button
              type="submit"
              className={`w-full py-3 px-6 rounded-lg font-medium text-[#990000] bg-white hover:bg-gray-100 transition-colors duration-300 flex items-center justify-center ${
                !arquivo ? "opacity-50 cursor-not-allowed" : "cursor-pointer"
              }`}
              disabled={!arquivo || isLoading}
              whileHover={arquivo ? { scale: 1.02 } : {}}
              whileTap={arquivo ? { scale: 0.95 } : {}}
            >
              {isLoading ? (
                <>
                  <svg
                    className="animate-spin -ml-1 mr-3 h-5 w-5 text-[#990000]"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                  >
                    <circle
                      className="opacity-25"
                      cx="12"
                      cy="12"
                      r="10"
                      stroke="currentColor"
                      strokeWidth="4"
                    ></circle>
                    <path
                      className="opacity-75"
                      fill="currentColor"
                      d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                    ></path>
                  </svg>
                  Processando...
                </>
              ) : (
                "Enviar Curr√≠culo Lattes"
              )}
            </motion.button>
          </form>
        </div>
      </motion.div>

      <style jsx global>{`
        .cursor-pointer {
          cursor: pointer;
        }
        .cursor-pointer:hover {
          cursor: pointer;
        }
        button,
        input[type="text"],
        .tag-item {
          transition: all 0.3s ease;
        }
      `}</style>
    </div>
  );
}


### ARQUIVO: components\CardContato.tsx ###
"use client";
import { useState, useEffect} from "react";
import { Mail, Phone, MapPin } from "lucide-react";
import { LoadingSpinner } from "./LoadingSpinner";
import { useRouter } from "next/navigation";
import Link from "next/link";

interface CardContatoProps {
  idPesquisador: number;
  aberto: boolean;
  onClose: () => void;
  podeEditar: boolean;
  exibirContato: boolean;
  email?: string;
  telefone?: string;
  cidade?: string;
  pais?: string;
}

export function CardContato({
  idPesquisador,
  aberto,
  onClose,
  podeEditar,
  exibirContato,
  email,
  telefone,
  cidade,
  pais
}: CardContatoProps) {
  const [mensagem, setMensagem] = useState("");
  const [loading, setLoading] = useState(false);
  const [status, setStatus] = useState<null | "success" | "cooldownWait" | "error">(null);
  const router = useRouter();

  useEffect(() => {
  if (!aberto) {
    setStatus(null);
    setMensagem("");
    setLoading(false);
  }
  }, [aberto]);

  if (!aberto) return null;


  const handleEnviarMensagem = async () => {

    setLoading(true);
    setStatus(null);

    try {

      const token = localStorage.getItem("token")
      const usuarioId = localStorage.getItem("usuarioId")
      const usuarioTipo = localStorage.getItem("tipo_usuario")

      const dados = {
        "texto" : mensagem,
        "idRemetente": usuarioId,
        "tipoRemetente": usuarioTipo,
        "idDestinatario": idPesquisador
      }

      const res = await fetch(`http://localhost:8080/api/email/enviarContato`, {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
        },
        body: JSON.stringify(dados)
      });
      

      if (res.ok) {
        setStatus("success");
        setMensagem("");
      } else if (res.status == 400){
        setStatus("cooldownWait")
      } else {
        setStatus("error");
      }

    } catch (err) {
      setStatus("error");
    }

    setLoading(false)

  };

  const IconWrapper = ({ children }: any) => (
    <div className="w-10 h-10 flex items-center justify-center rounded-full bg-gray-200 text-gray-600">
      {children}
    </div>
  );

  const Field = ({ icon, children }: any) => (
    <div className="flex items-center gap-3">
      <IconWrapper>{icon}</IconWrapper>
      <div className="flex-1">{children}</div>
    </div>
  );

  return (
    <div className="fixed inset-0 bg-gray-300/60 flex items-center justify-center z-50 p-4">
      <div
        className="bg-white rounded-2xl shadow-xl max-w-3xl w-full h-[450px] overflow-hidden flex flex-col"
        onClick={(e) => e.stopPropagation()}
      >
        {/* HEADER */}
        <div className="flex items-center justify-center relative p-6 border-b bg-gray-100 rounded-t-2xl">
          <h2 className="text-2xl font-semibold text-[#8B0000]">Informa√ß√µes de Contato</h2>
          <button
            onClick={onClose}
            className="absolute right-6 text-gray-400 hover:text-gray-600 transition-colors text-2xl"
          >
            ‚úñ
          </button>
        </div>

        {/* CONTE√öDO */}
        
        <div className="p-6 h-full flex flex-col items-center justify-center space-y-6">
          {/* CASO 1 - Pode editar & n√£o exibe */}
          {podeEditar && !exibirContato && (
            <div className="text-center space-y-4">
              <p className="text-sm text-black">
                Voc√™ n√£o configurou para exibir suas informa√ß√µes de contato para outros usu√°rios.
              </p>
              <Link href="/telaEdicaoPesquisador#contato" scroll={true}>
                    <button className="w-full bg-red-800 text-white p-3 rounded-lg hover:bg-red-900 transition disabled:opacity-50">
                        Configurar Informa√ß√µes de Contato
                    </button>
              </Link>
            </div>
          )}

          {/* CASO 2 - Pode editar & exibe */}
          {podeEditar && exibirContato && (
            <div className="space-y-6">
              <Field icon={<Mail size={20} />}>
                <p className="text-gray-900">{email || "N√£o informado"}</p>
              </Field>

              <Field icon={<Phone size={20} />}>
                <p className="text-gray-900">{telefone || "N√£o informado"}</p>
              </Field>

              <Field icon={<MapPin size={20} />}>
                <p className="text-gray-900">
                {cidade && pais
                    ? `${cidade}, ${pais}`
                    : cidade
                    ? cidade
                    : pais
                    ? pais
                    : "N√£o informado"}
                </p>
              </Field>      
            <Link href="/telaEdicaoPesquisador#contato" scroll={true}>
                <button className="w-full bg-red-800 text-white p-3 rounded-lg hover:bg-red-900 transition disabled:opacity-50">
                    Editar Informa√ß√µes
                </button>
            </Link>
              
            </div>
          )}


          {/* CASO 3 - N√£o pode editar & exibe */}
          {!podeEditar && exibirContato && (
            <div className="space-y-6">
              <Field icon={<Mail size={20} />}> 
                <p className="text-gray-900">{email || "N√£o informado"}</p>
              </Field>

              <Field icon={<Phone size={20} />}> 
                <p className="text-gray-900">{telefone || "N√£o informado"}</p>
              </Field>

              <Field icon={<MapPin size={20} />}> 
                <p className="text-gray-900">
                {cidade && pais
                    ? `${cidade}, ${pais}`
                    : cidade
                    ? cidade
                    : pais
                    ? pais
                    : "N√£o informado"}
                </p>
              </Field>
            </div>
          )}

          {/* CASO 4 - N√£o pode editar & n√£o exibe */}
          {!podeEditar && !exibirContato && (
            <div className="space-y-4">

              {loading ? (
                <div className="absolute inset-0 flex items-center justify-center ">
                  <LoadingSpinner />
                </div>
              ) : status === "success" ? (
                <div className="text-center space-y-4 py-6">
                  <div className="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto">
                    <svg className="w-8 h-8 text-[#990000]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                  </div>
                  <div>
                    <h3 className="text-lg font-semibold text-gray-900 mb-2">Mensagem enviada com sucesso!</h3>
                    <p className="text-sm text-gray-600">O pesquisador receber√° sua mensagem por e-mail.</p>
                  </div>
                </div>

              ) : status === "cooldownWait" ? (
              <div className="text-center space-y-4 py-6">
                <div className="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto">
                  <svg className="w-8 h-8 text-[#990000]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path 
                      strokeLinecap="round" 
                      strokeLinejoin="round" 
                      strokeWidth={2} 
                      d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" 
                    />
                  </svg>
                </div>

                <div>
                  <h3 className="text-lg font-semibold text-gray-900 mb-2">Voc√™ j√° entrou em contato recentemente</h3>
                  <p className="text-sm text-gray-600">
                    √â necess√°rio esperar o per√≠odo de <strong>sete dias</strong> antes de enviar outra mensagem.
                  </p>
                  </div>

                  
              </div>
                
              ) : status === "error" ? (
                <div className="text-center space-y-4 py-6">
                  <div className="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto">
                    <svg className="w-8 h-8 text-[#990000]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </div>
                  <div>
                    <h3 className="text-lg font-semibold text-gray-900 mb-2">Erro ao enviar mensagem</h3>
                    <p className="text-sm text-gray-600">Ocorreu um problema. Por favor, tente novamente.</p>
                  </div>
                  <button
                    onClick={() => setStatus(null)}
                    className="bg-[#990000] hover:bg-red-700 text-white px-5 py-1.5 rounded-lg shadow-md transition text-sm"
                  >
                    Tentar Novamente
                  </button>
                </div>
              ) : (
                <>
                  <p className="text-sm text-gray-700">
                    Este pesquisador optou por n√£o exibir suas informa√ß√µes de contato.
                    Voc√™ pode enviar uma mensagem que ser√° encaminhada por e-mail, formalizando seu interesse. 
                    Uma vez enviada a mensagem, √© necess√°rio esperar o per√≠odo de <strong>sete dias</strong> para 
                    destacar seu interesse novamente.
                  </p>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Sua mensagem (opcional)
                    </label>

                    <textarea
                      value={mensagem}
                      onChange={(e) => setMensagem(e.target.value)}
                      placeholder="Digite sua mensagem aqui..."
                      rows={5}
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg 
                                hover:border-gray-400 
                                focus:border-red-800 focus:ring-red-800 
                                resize-none text-black 
                                transition-colors duration-200
                                focus:ring-0 focus:outline-none"
                    />
                  </div>

                  <button
                    onClick={handleEnviarMensagem}
                    disabled={loading}
                    className="w-full bg-red-800 text-white p-3 rounded-lg hover:bg-red-900 transition disabled:opacity-50"
                  >
                    Enviar Mensagem
                  </button>
                </>
              )}
            </div>
          )}

        </div>
      </div>
    </div>
  );
}

### ARQUIVO: components\CardLinhaTempo.tsx ###
import Link from "next/link";
import React from "react";

interface ItemLinhaDoTempo {
  id?: number;
  ano: number;
  titulo: string;
  tipo: string;
}

interface CardLinhaDoTempoProps {
  items: ItemLinhaDoTempo[];
  podeEditar?: boolean;
  onClickAdicionar?: () => void;
  onClickAcessar?: (item: ItemLinhaDoTempo) => void;
}

export function CardLinhaDoTempo({ 
  items, 
  podeEditar = false,
  onClickAdicionar,
  onClickAcessar
}: CardLinhaDoTempoProps) {
  
  // Altura fixa - mesma dos outros cards
  const alturaCard = "h-[400px]";
  
  // Estado vazio
  if (items.length === 0) {
    return (
      <div className={`flex-1 bg-white rounded-2xl shadow-lg p-6 ${alturaCard} flex flex-col`}>
        <div className="relative mb-4">
          <div className="absolute inset-x-0 top-1/2 -translate-y-1/2 bg-gray-100 h-10 rounded-md"></div>
          <h2 className="relative z-10 text-center text-xl font-bold text-black tracking-wide">
            Linha do tempo - Destaques
          </h2>
        </div>

        <div className="flex-1 flex flex-col items-center justify-center px-4">
          <div className="text-center mb-4">
            <p className="text-gray-500 text-sm mb-1">
              Nenhum destaque adicionado ainda
            </p>
            <p className="text-gray-400 text-xs">
              {podeEditar 
                ? "Destaque suas conquistas e marcos importantes da sua trajet√≥ria acad√™mica"
                : "Este pesquisador ainda n√£o adicionou destaques √† linha do tempo"}
            </p>
          </div>
          
          {podeEditar && (
          <Link href="/telaEdicaoPesquisador#perfil-academico" scroll={true}>
            <button className="bg-[#990000] hover:bg-red-700 text-white px-5 py-1.5 rounded-lg shadow-md transition text-sm">
              Adicionar Destaques
            </button>
          </Link>
          )}
        </div>
      </div>
    );
  }

  // Lista com todos os itens
  return (
    <div className={`flex-1 bg-white rounded-2xl shadow-lg p-6 ${alturaCard} flex flex-col`}>
      <div className="relative mb-6">
        <div className="absolute inset-x-0 top-1/2 -translate-y-1/2 bg-gray-100 h-10 rounded-md"></div>
        <h2 className="relative z-10 text-center text-xl font-bold text-black tracking-wide">
          Linha do tempo - Destaques
        </h2>
      </div>

      <div className="flex-1 overflow-y-auto px-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100">
        <div className="relative border-l-2 border-gray-300 ml-12 space-y-8 pr-6">
          {items.map((item, idx) => (
            <div key={item.id || idx} className="flex items-start gap-6">
              <div className="absolute w-5 h-5 bg-red-700 rounded-full -left-[11px] mt-1"></div>

              <div className="ml-8 flex-1 min-w-0 flex items-start justify-between gap-6">
                <div className="flex flex-col gap-1 flex-1">
                  <p className="text-lg font-bold text-black">{item.ano} - {item.tipo}</p>
                  <p className="text-sm text-gray-800 leading-relaxed break-words">
                    {item.titulo}
                  </p>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>

      {items.length > 0 && (
        <div className="mt-4 pt-3 border-t border-gray-200 text-center">
          <p className="text-xs text-gray-500">
            {items.length} {items.length === 1 ? 'destaque' : 'destaques'} na linha do tempo
          </p>
        </div>
      )}
    </div>
  );
}

### ARQUIVO: components\CardLista.tsx ###
"use client";

import React, { useState } from "react";
import { ModalDetalhes } from "./ModalDetalhes";
import Link from "next/link";

interface ItemLista {
  id: number;
  titulo: string;
  subtitulo: string;
  detalhes?: Record<string, any>;
  destaque?: boolean;
}

interface CardListaProps {
  titulo: string;
  items: ItemLista[];
  textoBotao?: string;
  podeEditar?: boolean;
  tabName: string;
}

export function CardLista({ 
  titulo, 
  items, 
  textoBotao = "Ver tudo", 
  podeEditar = false,
  tabName,
}: CardListaProps) {

  const [modalAberto, setModalAberto] = useState(false);
  
  const alturaFixa = "h-[400px]";
  
  if (items.length === 0) {
    return (
      <div className={`flex-1 bg-white rounded-2xl shadow-lg p-6 ${alturaFixa} flex flex-col`}>
        <div className="relative mb-4">
          <div className="absolute inset-x-0 top-1/2 -translate-y-1/2 bg-gray-100 h-10 rounded-md"></div>
          <h2 className="relative z-10 text-center text-xl font-bold text-black tracking-wide">
            {titulo}
          </h2>
        </div>

        <div className="flex-1 flex flex-col items-center justify-center px-4">
          <div className="text-center mb-4">
            <p className="text-gray-500 text-sm mb-1">
              {podeEditar 
                ? `Nenhum item adicionado ainda`
                : `Este pesquisador n√£o adicionou informa√ß√µes sobre ${titulo.toLowerCase()}`
              }
            </p>
            <p className="text-gray-400 text-xs">
              {podeEditar && `Adicione informa√ß√µes sobre ${titulo.toLowerCase()} ao seu perfil`}
            </p>
          </div>
          
          {podeEditar && (

            <Link href= {{pathname: "/telaEdicaoPesquisador", query: {tab: tabName}, hash: "perfil-academico"}} scroll={true}>
                    <button className="bg-[#990000] hover:bg-red-700 text-white px-5 py-1.5 rounded-lg shadow-md transition text-sm">
                        Adicionar {titulo}
                    </button>
            </Link>

          )}
        </div>
      </div>
    );
  }

  const itemsExibidos = items.slice(0, 3);
  const mostrarBotaoVerTudo = items.length > 0;
  
  return (
    <>
      <div className={`flex-1 bg-white rounded-2xl shadow-lg p-6 ${alturaFixa} flex flex-col`}>
        <div className="relative mb-4">
          <div className="absolute inset-x-0 top-1/2 -translate-y-1/2 bg-gray-100 h-10 rounded-md"></div>
          <h2 className="relative z-10 text-center text-xl font-bold text-black tracking-wide">
            {titulo}
          </h2>
        </div>

        <div className="flex-1 overflow-hidden">
          <ul className="space-y-2">
            {itemsExibidos.map((item, index) => (
              <li key={item.id ?? index} className="flex items-center gap-6 bg-gray-50 rounded-xl p-3">
                <div className="w-4 h-4 bg-gray-400 rounded-full flex-shrink-0 self-center"></div>
                <div className="flex flex-col text-black leading-snug">
                  <p className="font-bold text-sm">{item.titulo}</p>
                  <p className="text-xs text-gray-700">{item.subtitulo}</p>
                </div>
              </li>
            ))}
          </ul>
        </div>

        {mostrarBotaoVerTudo && (
          <div className="mt-4 flex justify-end">
            <button 
              onClick={() => setModalAberto(true)}
              className="bg-[#990000] hover:bg-red-700 text-white px-5 py-1.5 rounded-lg shadow-md transition text-sm"
            >
              {textoBotao}
            </button>
          </div>
        )}
      </div>

      <ModalDetalhes
        isOpen={modalAberto}
        onClose={() => setModalAberto(false)}
        titulo={titulo}
        items={items}
      />
    </>
  );
}

### ARQUIVO: components\Dropdown.tsx ###
import { useState, useRef, useEffect } from "react";
import { ChevronDown } from "lucide-react";

interface DropdownProps {
  label: string;
  value: string;
  onChange: (value: string) => void;
  options: { label: string; value: string }[];
  placeholder?: string;
  required?: boolean;
  disabled?: boolean;
}

export default function Dropdown({
  label,
  value,
  onChange,
  options,
  placeholder,
  required = false,
  disabled = false,
}: DropdownProps) {
  const [open, setOpen] = useState(false);
  const ref = useRef<HTMLDivElement>(null);

  // Fecha ao clicar fora
  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (ref.current && !ref.current.contains(event.target as Node)) {
        setOpen(false);
      }
    };
    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, []);

  return (
    <div className="w-full" ref={ref}>
      <label className="block text-sm font-medium text-gray-800 mb-0.5">
        {label}
        {required && <span className="text-red-700 ml-0.5">*</span>}
      </label>

      <div className="relative">
        {/* Campo que abre o dropdown */}
        <button
          type="button"
          disabled={disabled}
          onClick={() => !disabled && setOpen(!open)}
          className={`
            w-full border border-gray-300 rounded-xl px-4 py-2 bg-white text-gray-700 shadow-sm
            mt-1 flex justify-between items-center
            focus:ring-1 focus:ring-red-700/40 focus:border-red-700 focus:outline-none
            ${disabled ? "opacity-50 cursor-not-allowed bg-gray-100" : ""}
          `}
        >
          <span>{options.find((o) => o.value === value)?.label || placeholder}</span>

          <ChevronDown className="text-gray-500" size={20} />
        </button>

        {/* DROPDOWN */}
        {open && !disabled && (
          <div
            className="
              absolute z-20 mt-1 w-full bg-white border border-gray-300 rounded-xl shadow-lg
              max-h-48 overflow-y-auto   /* <= Scroll aqui */
              animate-fadeIn
            "
          >
            {options.map((opt) => (
              <div
                key={opt.value}
                onClick={() => {
                  onChange(opt.value);
                  setOpen(false);
                }}
                className={`
                  px-4 py-2 cursor-pointer text-sm
                  hover:bg-red-50
                  ${value === opt.value ? "bg-red-100 text-red-700 font-medium" : "text-gray-800"}
                `}
              >
                {opt.label}
              </div>
            ))}
          </div>
        )}
      </div>

      {/* Anima√ß√£o suave */}
      <style>{`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-4px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.15s ease-out;
        }
      `}</style>
    </div>
  );
}


### ARQUIVO: components\FormField.tsx ###
interface FormFieldProps {
  label: string;
  value: string;
  onChange: (e: any) => void;
  placeholder?: string;
  required?: boolean;
  disabled?: boolean;
  type?: "text" | "number" | "year";
}

export default function FormField({
  label,
  value,
  onChange,
  placeholder,
  required = false,
  disabled = false,
  type = "text",
}: FormFieldProps) {
  
  const handleChange = (e: any) => {
    let v = e.target.value;

    if (type === "year" || type === "number") {
      v = v.replace(/\D/g, "");

      if (type === "year" && v.length > 4) {
        v = v.slice(0, 4);
      }

      e.target.value = v;
    }

    onChange(e);
  };

  return (
    <div className="w-full">
      <label className="block text-sm font-medium text-gray-800 mb-0.5">
        {label}
        {required && <span className="text-red-700 ml-0.5">*</span>}
      </label>

      <input
        type="text"
        value={value}
        onChange={disabled ? undefined : handleChange}
        placeholder={placeholder}
        disabled={disabled}
        className={`
          w-full border rounded-xl px-4 py-2 shadow-sm
          ${
            disabled
              ? "bg-gray-100 text-gray-500 border-gray-300 cursor-not-allowed"
              : "bg-white text-gray-700 border-gray-300 focus:ring-1 focus:ring-red-700/40 focus:outline-none"
          }
        `}
      />
    </div>
  );
}


### ARQUIVO: components\HeaderPesquisador.tsx ###
"use client";

import React, { useEffect, useState } from "react";
import Link from "next/link";
import Image from "next/image";
import {
  BookmarkPlus,
  Heart,
  Pencil,
  X,
  ListPlus,
  MapPin,
  Map,
} from "lucide-react";
import { useRouter } from "next/navigation";

interface HeaderPesquisadorProps {
  nomePesquisador: string;
  sobrenome: string;
  ocupacao?: string | null;
  imagemPerfil: string | null;
  tags: string[];
  dataAtualizacao: string;
  horaAtualizacao: string;
  podeEditar: boolean;
  idPesquisador: number;
  usuarioId: number;
  cidade?: string | null;
  pais?: string | null;
  nacionalidade?: string | null;
  onClickContato: () => void;
}

interface ListaCustomizada {
  id: number;
  nomeLista: string;
}

export function HeaderPesquisador({
  nomePesquisador,
  sobrenome,
  ocupacao,
  tags,
  dataAtualizacao,
  podeEditar,
  idPesquisador,
  usuarioId,
  cidade,
  pais,
  nacionalidade,
  onClickContato,
}: HeaderPesquisadorProps) {
  const router = useRouter();
  const [imagemPerfil, setImagemPerfil] = useState<string | null>(null);

  const [isFavorito, setIsFavorito] = useState(false);

  const [modalOpen, setModalOpen] = useState(false);
  const [loadingModal, setLoadingModal] = useState(false);
  const [minhasListas, setMinhasListas] = useState<ListaCustomizada[]>([]);
  const [novoNomeLista, setNovoNomeLista] = useState("");

  useEffect(() => {
    const token = localStorage.getItem("token");
    const idUsuarioLogado = localStorage.getItem("usuarioId");

    if (!token) return;

    async function carregarImagem() {
      try {
        // Usa idPesquisador para imagem (Correto)
        const res = await fetch(
          `http://localhost:8080/api/pesquisadores/${idPesquisador}/imagem`,
          {
            headers: { Authorization: `Bearer ${token}` },
          }
        );
        if (res.ok) {
          const blob = await res.blob();
          setImagemPerfil(URL.createObjectURL(blob));
        }
      } catch (error) {
        console.error("Erro imagem:", error);
      }
    }

    async function checarFavorito() {
      if (!idUsuarioLogado) return;
      try {
        const res = await fetch(
          `http://localhost:8080/api/favoritos/usuario/${idUsuarioLogado}/favorito`,
          {
            headers: { Authorization: `Bearer ${token}` },
          }
        );
        if (res.ok) {
          const favoritos = await res.json();
          // Usa idPesquisador para verificar favorito (Correto)
          const jaSegue = favoritos.some(
            (fav: any) => fav.pesquisador?.id === Number(idPesquisador)
          );
          setIsFavorito(jaSegue);
        }
      } catch (error) {
        console.error("Erro ao checar favoritos", error);
      }
    }

    if (idPesquisador) {
      carregarImagem();
      checarFavorito();
    }
  }, [idPesquisador]);

  const handleToggleFavorito = async () => {
    const token = localStorage.getItem("token");
    const idUsuarioLogado = localStorage.getItem("usuarioId");

    if (!token || !idUsuarioLogado) {
      router.push("/login");
      return;
    }

    try {
      if (isFavorito) {
        const res = await fetch(
          `http://localhost:8080/api/favoritos/excluirFavorito?usuarioId=${idUsuarioLogado}&pesquisadorId=${idPesquisador}`,
          {
            method: "DELETE",
            headers: { Authorization: `Bearer ${token}` },
          }
        );
        if (res.ok) setIsFavorito(false);
      } else {
        const res = await fetch(
          `http://localhost:8080/api/favoritos/salvarFavorito`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
            body: JSON.stringify({ pesquisadorId: idPesquisador }),
          }
        );

        if (res.ok || res.status === 409) setIsFavorito(true);
      }
    } catch (error) {
      console.error("Erro ao favoritar:", error);
    }
  };

  const handleOpenListModal = async () => {
    setModalOpen(true);
    setLoadingModal(true);
    const token = localStorage.getItem("token");

    try {
      const res = await fetch("http://localhost:8080/api/listas/listarListas", {
        headers: { Authorization: `Bearer ${token}` },
      });
      if (res.ok) {
        const data = await res.json();
        setMinhasListas(
          data.map((l: any) => ({ id: l.id, nomeLista: l.nomeLista }))
        );
      }
    } catch (error) {
      console.error("Erro ao buscar listas", error);
    } finally {
      setLoadingModal(false);
    }
  };

  const handleAddToList = async (listaId: number) => {
    const token = localStorage.getItem("token");
    try {
      const res = await fetch(
        `http://localhost:8080/api/listas/salvarLista/${listaId}/perfil/${usuarioId}`,
        {
          method: "POST",
          headers: { Authorization: `Bearer ${token}` },
        }
      );
      if (res.ok) {
        setModalOpen(false);
      } else if (res.status === 409) {
      }
    } catch (error) {
      console.error(error);
    }
  };

  const handleCreateAndAdd = async () => {
    if (!novoNomeLista.trim()) return;
    const token = localStorage.getItem("token");
    try {
      const resCreate = await fetch(
        "http://localhost:8080/api/listas/salvarLista",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
          body: JSON.stringify({ nomeLista: novoNomeLista }),
        }
      );

      if (resCreate.ok) {
        const novaLista = await resCreate.json();
        await handleAddToList(novaLista.id);
        setNovoNomeLista("");
      }
    } catch (error) {
      console.error(error);
    }
  };

  return (
    <div className="bg-[#990000] text-white py-6 px-10 relative shadow-lg">
      {podeEditar ? (
        <Link
          href={`/telaEdicaoPesquisador`}
          className="absolute top-8 right-8 bg-white text-[#990000] p-2 rounded-full shadow hover:bg-gray-100 transition"
        >
          <Pencil size={30} />
        </Link>
      ) : (
        <div className="absolute top-8 right-8 flex gap-3">
          <button
            className={`p-2 rounded-full shadow transition ${
              isFavorito
                ? "bg-red-100 text-red-600 hover:bg-red-200"
                : "bg-white text-[#990000] hover:bg-gray-100"
            }`}
            title={isFavorito ? "Remover dos favoritos" : "Favoritar"}
            onClick={handleToggleFavorito}
          >
            <Heart size={30} fill={isFavorito ? "currentColor" : "none"} />
          </button>

          <button
            className="bg-white text-[#990000] p-2 rounded-full shadow hover:bg-gray-100 transition"
            title="Adicionar √† lista"
            onClick={handleOpenListModal}
          >
            <BookmarkPlus size={30} />
          </button>
        </div>
      )}

      <div className="flex flex-col lg:flex-row gap-8 lg:items-start items-center text-center lg:text-left">
        <div className="w-[220px] h-[220px] md:w-[260px] md:h-[260px] lg:w-[320px] lg:h-[320px] rounded-2xl overflow-hidden bg-white/20">
          <Image
            src={imagemPerfil || "/images/user.png"}
            alt="Foto do pesquisador"
            width={360}
            height={360}
            className="object-cover w-full h-full"
            priority
          />
        </div>

        <div className="flex-1 flex flex-col min-h-[300px]">
          <h1 className="text-4xl md:text-5xl lg:text-6xl font-bold mb-1">
            {nomePesquisador} {sobrenome}
          </h1>

          <h2 className="text-xl md:text-2xl mt-0 mb-4 min-h-[28px] md:min-h-[32px] text-white/90">
            {ocupacao?.trim() ? ocupacao : " "}
          </h2>

          <div className="flex flex-wrap gap-3 mb-4 justify-center lg:justify-start">
            {tags.map((tag, i) => (
              <span
                key={i}
                className="bg-white text-black px-4 py-2 rounded-full text-sm shadow font-medium"
              >
                {tag}
              </span>
            ))}
          </div>

          <div className="flex flex-wrap gap-4 mb-4 text-white/90 justify-center lg:justify-start items-center text-sm">
            {(cidade || pais) && (
              <div className="flex items-center gap-1">
                <MapPin size={16} className="text-white" />
                <span>
                  {cidade ? cidade : ""}
                  {cidade && pais ? ", " : ""}
                  {pais ? pais : ""}
                </span>
              </div>
            )}

            {nacionalidade && (
              <div className="flex items-center gap-1">
                <Map size={16} className="text-white" />
                <span>{nacionalidade}</span>
              </div>
            )}
          </div>

          <div className="mt-auto flex gap-3 pt-4 justify-center lg:justify-start">
            <button
              onClick={onClickContato}
              className="px-6 py-2 rounded shadow border border-white text-white bg-transparent hover:bg-white hover:text-[#990000] transition font-semibold"
            >
              Contato
            </button>

            {podeEditar && (
              <Link
                href="/gerenciarListas"
                className="border border-white text-white px-4 py-1 rounded hover:bg-white hover:text-[#990000] transition flex items-center justify-center font-semibold shadow"
              >
                Gerenciar Listas
              </Link>
            )}
          </div>
        </div>
      </div>

      <p className="absolute right-10 bottom-4 text-xs md:text-sm text-white/80">
        √öltima atualiza√ß√£o em {dataAtualizacao}
      </p>

      {/* --- MODAL SALVAR EM LISTA --- */}
      {modalOpen && (
        <div className="fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50 text-black">
          <div className="bg-white p-6 rounded-lg shadow-lg w-96">
            <div className="flex justify-between items-center mb-4">
              <h2 className="text-lg font-bold text-[#990000]">Salvar em...</h2>
              <button onClick={() => setModalOpen(false)}>
                <X className="w-5 h-5 text-gray-500 hover:text-black" />
              </button>
            </div>

            {loadingModal ? (
              <p>Carregando listas...</p>
            ) : (
              <>
                <div className="flex flex-col gap-2 max-h-40 overflow-y-auto mb-4">
                  {minhasListas.map((lista) => (
                    <button
                      key={lista.id}
                      onClick={() => handleAddToList(lista.id)}
                      className="w-full text-left p-2 rounded hover:bg-gray-100"
                    >
                      {lista.nomeLista}
                    </button>
                  ))}
                  {minhasListas.length === 0 && (
                    <p className="text-sm text-gray-500">
                      Nenhuma lista customizada encontrada.
                    </p>
                  )}
                </div>

                <div className="border-t pt-4 flex gap-2">
                  <input
                    type="text"
                    placeholder="Criar nova lista..."
                    value={novoNomeLista}
                    onChange={(e) => setNovoNomeLista(e.target.value)}
                    className="flex-1 w-full border px-3 py-2 rounded"
                  />
                  <button
                    onClick={handleCreateAndAdd}
                    className="p-2 rounded bg-[#990000] text-white hover:bg-red-800"
                    title="Criar e adicionar"
                  >
                    <ListPlus size={20} />
                  </button>
                </div>
              </>
            )}
          </div>
        </div>
      )}
    </div>
  );
}


### ARQUIVO: components\LoadingSpinner.tsx ###
export function LoadingSpinner() {
    return (
        <div className="flex flex-col justify-center items-center min-h-[400px] space-y-4">
            <div className="animate-spin rounded-full h-16 w-16 border-4 border-gray-200 border-t-red-700"></div>
        </div>
    );
}

### ARQUIVO: components\MensagemErro.tsx ###
export function ErrorMessage({ erro }: { erro: string }) {
    return (
        <div className="max-w-md mx-auto mt-8 p-6 bg-red-50 border border-red-200 rounded-lg">
            <h3 className="text-red-800 font-semibold mb-2">Erro ao carregar perfil</h3>
            <p className="text-red-600">{erro}</p>
        </div>
    );
}

### ARQUIVO: components\MenuLateral.tsx ###
"use client";
import { useState } from "react";
import Image from "next/image";
import { LayoutDashboard, Settings, LogOut, Home } from "lucide-react";
import { useRouter } from "next/navigation";
import ModalConfiguracoes from "./ModalConfiguracoes";

export default function MenuLateral() {
  const router = useRouter();
  const [isSettingsOpen, setIsSettingsOpen] = useState(false);

  const handleLogout = () => {
    localStorage.removeItem("token");
    localStorage.removeItem("usuarioId");
    localStorage.removeItem("tipo_usuario");
    router.push("/login");
  };

  return (
    <>
      <aside className="w-20 bg-white dark:bg-gray-800 fixed left-0 top-0 h-screen flex flex-col items-center py-4 shadow-md z-40 transition-colors duration-300">
        {/* Logo */}
        <div className="mb-10 cursor-pointer">
          <Image
            src="/images/logo.png"
            alt="Logo"
            width={50}
            height={50}
            quality={100}
            priority
            onClick={() => router.push("/home")}
            className="hover:scale-105 transition-transform duration-200"
          />
        </div>

        {/* √çcones do Menu */}
        <nav className="flex flex-col gap-6 mt-auto mb-4">
          <button
            className="text-gray-800 dark:text-gray-300 hover:text-custom-red dark:hover:text-red-400 transition-colors cursor-pointer"
            onClick={() => router.push("/home")}
            title="In√≠cio"
          >
            <Home size={28} />
          </button>
          <button
            className="text-gray-800 dark:text-gray-300 hover:text-custom-red dark:hover:text-red-400 transition-colors cursor-pointer"
            onClick={() => router.push("/home")}
            title="Dashboard"
          >
            <LayoutDashboard size={28} />
          </button>

          <hr className="border-gray-300 dark:border-gray-600 w-8 mx-auto" />

          <button
            className="text-gray-800 dark:text-gray-300 hover:text-custom-red dark:hover:text-red-400 transition-colors cursor-pointer"
            onClick={() => setIsSettingsOpen(true)}
            title="Configura√ß√µes"
          >
            <Settings size={28} />
          </button>
          <button
            className="text-gray-800 dark:text-gray-300 hover:text-custom-red dark:hover:text-red-400 transition-colors cursor-pointer"
            onClick={handleLogout}
            title="Sair"
          >
            <LogOut size={28} />
          </button>
        </nav>
      </aside>

      <ModalConfiguracoes
        isOpen={isSettingsOpen}
        onClose={() => setIsSettingsOpen(false)}
      />
    </>
  );
}


### ARQUIVO: components\ModalConfiguracoes.tsx ###
"use client";

import { useState, useEffect } from "react";
import { X, Trash2, Sun, Moon, Monitor } from "lucide-react";
import { useRouter } from "next/navigation";
import { useTheme } from "next-themes";

interface SettingsModalProps {
  isOpen: boolean;
  onClose: () => void;
}

export default function ModalConfiguracoes({
  isOpen,
  onClose,
}: SettingsModalProps) {
  const router = useRouter();
  const { theme, setTheme } = useTheme();
  const [mounted, setMounted] = useState(false);

  const [email, setEmail] = useState("");
  const [novaSenha, setNovaSenha] = useState("");
  const [confirmarSenha, setConfirmarSenha] = useState("");
  const [temaSelecionado, setTemaSelecionado] = useState("system");

  // Estados para feedback visual
  const [loading, setLoading] = useState(false);
  const [erro, setErro] = useState("");
  const [sucesso, setSucesso] = useState("");

  useEffect(() => {
    setMounted(true);
    // Carregar tema atual ao abrir o modal
    setTemaSelecionado(theme || "system");
  }, [theme]);

  useEffect(() => {
    if (isOpen) {
      const emailSalvo = localStorage.getItem("email") || "";
      setEmail(emailSalvo);
      // Limpar campos ao abrir o modal
      setNovaSenha("");
      setConfirmarSenha("");
      setErro("");
      setSucesso("");
    }
  }, [isOpen]);

  if (!isOpen) return null;

  // --- FUN√á√ÉO PARA SALVAR CONFIGURA√á√ïES ---
  const handleSave = async () => {
    setErro("");
    setSucesso("");

    // 1. Aplicar o tema selecionado (s√≥ aplica quando salva)
    setTheme(temaSelecionado);

    // 2. Se h√° senha para alterar, validar e enviar
    if (novaSenha || confirmarSenha) {
      if (!novaSenha || !confirmarSenha) {
        setErro("Preencha os campos de senha para alterar.");
        return;
      }
      if (novaSenha.length < 6) {
        setErro("A senha deve ter no m√≠nimo 6 caracteres.");
        return;
      }
      if (novaSenha !== confirmarSenha) {
        setErro("As senhas n√£o coincidem.");
        return;
      }

      // Pega dados do LocalStorage
      const token = localStorage.getItem("token");
      const usuarioId = localStorage.getItem("usuarioId");

      if (!token || !usuarioId) {
        setErro("Erro de autentica√ß√£o.");
        return;
      }

      setLoading(true);

      try {
        const res = await fetch(
          `http://localhost:8080/api/usuarios/alterarSenha/${usuarioId}`,
          {
            method: "PUT",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
            body: JSON.stringify({
              senha: novaSenha,
            }),
          }
        );

        if (res.ok) {
          setSucesso("Senha alterada com sucesso!");
          setNovaSenha("");
          setConfirmarSenha("");
        } else {
          const errorText = await res.text();
          throw new Error(errorText || "Erro ao alterar senha.");
        }
      } catch (error: any) {
        console.error(error);
        setErro(error.message);
      } finally {
        setLoading(false);
      }
    } else {
      // Se n√£o h√° senha para alterar, apenas mostrar sucesso do tema
      setSucesso("Configura√ß√µes salvas com sucesso!");
      setTimeout(() => {
        onClose();
      }, 1500);
    }
  };

  // --- FUN√á√ÉO DE EXCLUIR CONTA ---
  const handleDeleteAccount = async () => {
    const confirmacao = confirm(
      "Tem certeza que deseja excluir sua conta permanentemente? Todos os seus dados ser√£o perdidos."
    );

    if (!confirmacao) return;

    const token = localStorage.getItem("token");
    const usuarioId = localStorage.getItem("usuarioId");

    if (!token || !usuarioId) {
      return;
    }

    setLoading(true);

    try {
      const res = await fetch(
        `http://localhost:8080/api/usuarios/excluir/${usuarioId}`,
        {
          method: "DELETE",
          headers: {
            Authorization: `Bearer ${token}`,
          },
        }
      );

      if (res.ok) {
        localStorage.clear();
        onClose();
        router.push("/");
      } else {
        throw new Error("Falha ao excluir conta.");
      }
    } catch (error) {
      console.error(error);
    } finally {
      setLoading(false);
    }
  };

  if (!mounted) {
    return null;
  }

  return (
    <div className="fixed inset-0 flex items-center justify-center bg-black/50 z-50 backdrop-blur-sm">
      <div className="bg-white dark:bg-gray-800 w-[600px] rounded-lg shadow-xl overflow-hidden transition-colors duration-300">
        {/* Cabe√ßalho */}
        <div className="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700">
          <h2 className="text-xl font-bold text-custom-red dark:text-red-400 w-full text-center">
            Configura√ß√µes da Conta
          </h2>
          <button
            onClick={onClose}
            className="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 absolute right-4 top-4"
          >
            <X size={24} />
          </button>
        </div>

        {/* Corpo */}
        <div className="p-8 space-y-6">
          {/* Se√ß√£o de Tema */}
          <div>
            <h3 className="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">
              Apar√™ncia
            </h3>
            <div className="grid grid-cols-3 gap-4">
              <button
                onClick={() => setTemaSelecionado("light")}
                className={`flex flex-col items-center p-4 rounded-lg border-2 transition-all ${
                  temaSelecionado === "light"
                    ? "border-custom-red dark:border-red-400 bg-red-50 dark:bg-red-900/20"
                    : "border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"
                }`}
              >
                <Sun
                  className={`w-8 h-8 mb-2 ${
                    temaSelecionado === "light"
                      ? "text-custom-red dark:text-red-400"
                      : "text-gray-500 dark:text-gray-400"
                  }`}
                />
                <span
                  className={`font-medium ${
                    temaSelecionado === "light"
                      ? "text-custom-red dark:text-red-400"
                      : "text-gray-700 dark:text-gray-300"
                  }`}
                >
                  Claro
                </span>
              </button>

              <button
                onClick={() => setTemaSelecionado("dark")}
                className={`flex flex-col items-center p-4 rounded-lg border-2 transition-all ${
                  temaSelecionado === "dark"
                    ? "border-custom-red dark:border-red-400 bg-red-50 dark:bg-red-900/20"
                    : "border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"
                }`}
              >
                <Moon
                  className={`w-8 h-8 mb-2 ${
                    temaSelecionado === "dark"
                      ? "text-custom-red dark:text-red-400"
                      : "text-gray-500 dark:text-gray-400"
                  }`}
                />
                <span
                  className={`font-medium ${
                    temaSelecionado === "dark"
                      ? "text-custom-red dark:text-red-400"
                      : "text-gray-700 dark:text-gray-300"
                  }`}
                >
                  Escuro
                </span>
              </button>

              <button
                onClick={() => setTemaSelecionado("system")}
                className={`flex flex-col items-center p-4 rounded-lg border-2 transition-all ${
                  temaSelecionado === "system"
                    ? "border-custom-red dark:border-red-400 bg-red-50 dark:bg-red-900/20"
                    : "border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"
                }`}
              >
                <Monitor
                  className={`w-8 h-8 mb-2 ${
                    temaSelecionado === "system"
                      ? "text-custom-red dark:text-red-400"
                      : "text-gray-500 dark:text-gray-400"
                  }`}
                />
                <span
                  className={`font-medium ${
                    temaSelecionado === "system"
                      ? "text-custom-red dark:text-red-400"
                      : "text-gray-700 dark:text-gray-300"
                  }`}
                >
                  Sistema
                </span>
              </button>
            </div>
          </div>

          <div>
            <label className="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1">
              Email cadastrado
            </label>
            <input
              type="text"
              value={email}
              readOnly
              className="w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-700 dark:text-gray-400 cursor-not-allowed transition-colors duration-300"
            />
          </div>

          <div>
            <label className="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1">
              Nova senha
            </label>
            <input
              type="password"
              value={novaSenha}
              onChange={(e) => setNovaSenha(e.target.value)}
              className="w-full px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-red-200 dark:focus:ring-red-800 text-gray-900 dark:text-gray-300 transition-colors duration-300"
              placeholder="M√≠nimo 6 caracteres"
            />
          </div>

          <div>
            <label className="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1">
              Confirmar nova senha
            </label>
            <input
              type="password"
              value={confirmarSenha}
              onChange={(e) => setConfirmarSenha(e.target.value)}
              className="w-full px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-red-200 dark:focus:ring-red-800 text-gray-900 dark:text-gray-300 transition-colors duration-300"
            />
          </div>

          {/* √Årea de Mensagens de Erro/Sucesso */}
          {(erro || sucesso) && (
            <div
              className={`p-3 rounded text-sm font-medium text-center transition-colors duration-300 ${
                erro
                  ? "bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"
                  : "bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"
              }`}
            >
              {erro || sucesso}
            </div>
          )}

          {/* Bot√£o Excluir */}
          <button
            onClick={handleDeleteAccount}
            disabled={loading}
            className="w-full flex items-center justify-center gap-2 py-2 bg-red-50 dark:bg-red-900/20 text-custom-red dark:text-red-400 border border-red-200 dark:border-red-800 rounded hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors duration-300 disabled:opacity-50 mt-4"
          >
            {loading ? (
              "Processando..."
            ) : (
              <>
                <Trash2 size={18} />
                Excluir Conta
              </>
            )}
          </button>
        </div>

        {/* Rodap√© */}
        <div className="flex justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
          <button
            onClick={onClose}
            className="px-6 py-2 rounded bg-gray-500 text-white hover:bg-gray-600 transition font-medium"
            disabled={loading}
          >
            Cancelar
          </button>
          <button
            onClick={handleSave}
            disabled={loading}
            className="px-6 py-2 rounded bg-custom-red dark:bg-red-700 text-white hover:bg-custom-red-dark dark:hover:bg-red-600 transition font-medium disabled:opacity-50"
          >
            {loading ? "Gravando..." : "Gravar"}
          </button>
        </div>
      </div>
    </div>
  );
}


### ARQUIVO: components\ModalDetalhes.tsx ###
"use client";

import React from "react";
import { X } from "lucide-react";

interface ItemDetalhado {
  id: number;
  titulo: string;
  subtitulo: string;
  detalhes?: Record<string, any>;
  destaque?: boolean; 
}

interface ModalDetalhesProps {
  isOpen: boolean;
  onClose: () => void;
  titulo: string;
  items: ItemDetalhado[];
}

export function ModalDetalhes({
  isOpen,
  onClose,
  titulo,
  items,
}: ModalDetalhesProps) {
  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/20">
      <div className="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[85vh] flex flex-col overflow-hidden">
        
        {/* HEADER */}
        <div className="relative bg-[#990000] text-white rounded-t-2xl p-6">
          <h2 className="text-2xl font-bold text-center pr-8">{titulo}</h2>
          <button
            onClick={onClose}
            className="absolute top-4 right-4 text-white hover:bg-red-800 rounded-full p-2 transition"
            aria-label="Fechar modal"
          >
            <X size={24} />
          </button>
        </div>

        {/* CONTE√öDO */}
        <div className="flex-1 overflow-y-auto p-6">
          {items.length === 0 ? (
            <div className="text-center py-12">
              <p className="text-gray-500 text-lg">Nenhum item encontrado para exibir.</p>
            </div>
          ) : (
            <div className="space-y-4">
              {items.map((item, index) => (
                <div
                  key={item.id ?? index}
                  className="relative bg-white rounded-xl p-5 shadow-sm hover:shadow-md transition border border-gray-100"
                >
                    
                  {item.destaque && (
                    <div
                      aria-hidden
                      className="absolute top-3 bottom-3 left-0 w-1.5 rounded-r-md bg-[#990000]"
                    />
                  )}

                  {item.destaque && (
                    <span className="absolute top-3 right-3 bg-[#990000] text-white text-[10px] font-semibold px-2 py-0.5 rounded shadow-sm">
                      Destaque
                    </span>
                  )}

                  <div className={`${item.destaque ? "pl-5" : ""}`}>
                    
                    {/* T√≠tulo e Subt√≠tulo */}
                    <div className="flex items-start gap-4 mb-3">
                      <div className="w-5 h-5 bg-[#990000] rounded-full flex-shrink-0 mt-1"></div>

                      <div className="flex-1">
                        <h3 className="font-bold text-lg text-black mb-1">
                          {item.titulo}
                        </h3>
                        <p className="text-sm text-gray-700">
                          {item.subtitulo}
                        </p>
                      </div>
                    </div>

                    {/* Detalhes */}
                    {item.detalhes && Object.keys(item.detalhes).length > 0 && (
                      <div className="ml-9 mt-3 pt-3 border-t border-gray-200">
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                          {Object.entries(item.detalhes).map(([chave, valor]) => {
                            if (!valor || valor === "N√£o informado") return null;

                            return (
                              <div key={chave} className="text-sm">
                                <span className="font-semibold text-gray-800">
                                  {chave}:
                                </span>{" "}
                                <span className="text-gray-600">{valor}</span>
                              </div>
                            );
                          })}
                        </div>
                      </div>
                    )}
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>

        {/* FOOTER */}
        <div className="border-t border-gray-200 p-4 flex justify-end">
          <button
            onClick={onClose}
            className="bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-2 rounded-lg transition font-medium"
          >
            Fechar
          </button>
        </div>
      </div>
    </div>
  );
}


### ARQUIVO: components\ToggleSwitch.tsx ###
interface ToggleSwitchProps {
  label: string;
  value: boolean;
  onChange: (val: boolean) => void;
}

export function ToggleSwitch({ label, value, onChange }: ToggleSwitchProps) {
  return (
    <div className="flex items-center justify-between py-1">
      <span className="text-sm font-medium text-gray-800">{label}</span>

      <button
        onClick={() => onChange(!value)}
        className={`
          relative inline-flex h-6 w-12 items-center rounded-full transition 
          ${value ? "bg-red-700" : "bg-gray-300"}
        `}
      >
        <span
          className={`
            inline-block h-5 w-5 transform rounded-full bg-white shadow transition
            ${value ? "translate-x-6" : "translate-x-1"}
          `}
        />
      </button>
    </div>
  );
}


### ARQUIVO: components\editar-perfil-pesquisador\ArtigosSection.tsx ###
import { Trash2, Star, FileText } from "lucide-react";
import FormField from "../FormField";
import { PerfilAcademicoSectionLayout } from "./PerfilAcademicoSectionLayout";
import Dropdown from "../Dropdown";

export function ArtigosSection({ data, onAdd, onEdit, onDelete }: any) {

  const opcoesIdioma = [
    { label: "Portugu√™s", value: "PORTUGUES" },
    { label: "Ingl√™s", value: "INGLES" },
    { label: "Espanhol", value: "ESPANHOL" },
    { label: "Franc√™s", value: "FRANCES" },
    { label: "Alem√£o", value: "ALEMAO" },
    { label: "Italiano", value: "ITALIANO" },
    { label: "Outro", value: "OUTRO" },
  ];

  return (
    <PerfilAcademicoSectionLayout title="Artigos Publicados">
      {/* Bot√£o adicionar novo */}
      <div className="flex justify-center pt-2">
        <button
          onClick={() => 
            onAdd({
              ano: undefined,
              titulo: "",
              periodico: "",
              doi: "",
              idioma: "",
              destaque: false,
            })
          }
          className="px-4 py-2 text-white rounded-lg shadow-md transition text-sm shadow bg-[#990000] hover:bg-red-700"
        >
          + Adicionar Artigo
        </button>
      </div>

      {/* Empty State - Quando n√£o h√° artigos */}
      {data.length === 0 && (
        <div className="flex flex-col items-center justify-center py-12 px-4 mt-4">
          <div className="bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 max-w-md w-full text-center">
            <div className="flex justify-center mb-4">
              <div className="bg-red-100 p-4 rounded-full">
                <FileText size={48} className="text-red-700" />
              </div>
            </div>
            <h3 className="text-lg font-semibold text-gray-800 mb-2">
              Nenhum artigo cadastrado
            </h3>
            <p className="text-gray-600 text-sm">
              Adicione seus artigos publicados para enriquecer seu perfil e destacar sua produ√ß√£o cient√≠fica.
            </p>
          </div>
        </div>
      )}

      {/* Listagem */}
      {data.length > 0 && (
        <div className="space-y-4 mt-4">
          {data.map((item: any) => (
            <div
              key={item.id}
              className="relative bg-gray-50 border border-gray-200 rounded-lg p-4"
            >
              {/* √çCONES CENTRALIZADOS VERTICALMENTE */}
              <div className="absolute right-4 top-1/2 -translate-y-1/2 flex flex-col gap-4">

                {/* Bot√£o de apagar */}
                <button
                  onClick={() => onDelete(item.id)}
                  className="w-12 h-12 flex items-center justify-center rounded-full bg-red-100 hover:bg-red-200 transition shadow"
                >
                  <Trash2 size={26} className="text-red-700" />
                </button>

                {/* Bot√£o de destaque */}
                <button
                  onClick={() =>
                    onEdit(item.id, { ...item, destaque: !item.destaque })
                  }
                  className={`
                    w-12 h-12 flex items-center justify-center rounded-full bg-white shadow transition
                    hover:bg-gray-100
                    ${item.destaque ? "animate-pulse-star" : ""}
                  `}
                >
                  <Star
                    size={28}
                    className={`
                      transition-transform duration-300
                      ${item.destaque ? "text-yellow-400 scale-105" : "text-gray-300 scale-100"}
                    `}
                    fill={item.destaque ? "#FACC15" : "none"}
                  />
                </button>
              </div>

              {/* CAMPOS DO ARTIGO */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 pr-28">
                <FormField
                  label="T√≠tulo"
                  value={item.titulo}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, titulo: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Peri√≥dico/Revista"
                  value={item.periodico}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, periodico: e.target.value })
                  }
                  required
                />

                <FormField
                  label="DOI"
                  value={item.doi}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, doi: e.target.value })
                  }
                />

                <FormField
                  label="Idioma"
                  value={item.idioma}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, idioma: e.target.value })
                  }
                />

                <FormField
                  label="Ano de Publica√ß√£o"
                  value={item.ano}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, ano: e.target.value })
                  }
                  type="year"
                  required
                />
                
                <FormField
                  label="Autores"
                  value={item.autores}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, autores: e.target.value })
                  }
                />

              </div>
            </div>
          ))}
        </div>
      )}
    </PerfilAcademicoSectionLayout>
  );
}

### ARQUIVO: components\editar-perfil-pesquisador\AtuacoesSection.tsx ###
import { Trash2, Star, Briefcase } from "lucide-react";
import FormField from "../FormField";
import { PerfilAcademicoSectionLayout } from "./PerfilAcademicoSectionLayout";

export function AtuacoesSection({ data, onAdd, onEdit, onDelete }: any) {

  return (
    <PerfilAcademicoSectionLayout title="Atua√ß√µes Profissionais">
      {/* Bot√£o adicionar novo */}
      <div className="flex justify-center pt-2">
        <button
          onClick={() => 
            onAdd({
              cargo: "",
              instituicao: "",
              anoInicio: undefined,
              anoFim: undefined,
              destaque: false,
            })
          }
          className="px-4 py-2 text-white rounded-lg shadow-md transition text-sm shadow bg-[#990000] hover:bg-red-700"
        >
          + Adicionar Atua√ß√£o Profissional
        </button>
      </div>

      {/* Empty State - Quando n√£o h√° atua√ß√µes */}
      {data.length === 0 && (
        <div className="flex flex-col items-center justify-center py-12 px-4 mt-4">
          <div className="bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 max-w-md w-full text-center">
            <div className="flex justify-center mb-4">
              <div className="bg-red-100 p-4 rounded-full">
                <Briefcase size={48} className="text-red-700" />
              </div>
            </div>
            <h3 className="text-lg font-semibold text-gray-800 mb-2">
              Nenhuma atua√ß√£o profissional cadastrada
            </h3>
            <p className="text-gray-600 text-sm">
              Adicione suas atua√ß√µes profissionais para enriquecer seu perfil e destacar sua trajet√≥ria profissional.
            </p>
          </div>
        </div>
      )}

      {/* Listagem */}
      {data.length > 0 && (
        <div className="space-y-4 mt-4">
          {data.map((item: any) => (
            <div
              key={item.id}
              className="relative bg-gray-50 border border-gray-200 rounded-lg p-4"
            >
              {/* √çCONES CENTRALIZADOS VERTICALMENTE */}
              <div className="absolute right-4 top-1/2 -translate-y-1/2 flex flex-col gap-4">

                {/* Bot√£o de apagar */}
                <button
                  onClick={() => onDelete(item.id)}
                  className="w-12 h-12 flex items-center justify-center rounded-full bg-red-100 hover:bg-red-200 transition shadow"
                >
                  <Trash2 size={26} className="text-red-700" />
                </button>

                {/* Bot√£o de destaque */}
                <button
                  onClick={() =>
                    onEdit(item.id, { ...item, destaque: !item.destaque })
                  }
                  className={`
                    w-12 h-12 flex items-center justify-center rounded-full bg-white shadow transition
                    hover:bg-gray-100
                    ${item.destaque ? "animate-pulse-star" : ""}
                  `}
                >
                  <Star
                    size={28}
                    className={`
                      transition-transform duration-300
                      ${item.destaque ? "text-yellow-400 scale-105" : "text-gray-300 scale-100"}
                    `}
                    fill={item.destaque ? "#FACC15" : "none"}
                  />
                </button>
              </div>

              {/* CAMPOS DA ATUA√á√ÉO */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 pr-28">
                <FormField
                  label="Cargo"
                  value={item.cargo}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, cargo: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Institui√ß√£o"
                  value={item.instituicao}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, instituicao: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Ano In√≠cio"
                  value={item.anoInicio}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, anoInicio: e.target.value })
                  }
                  type="year"
                  required
                />

                <FormField
                  label="Ano Fim"
                  value={item.anoFim}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, anoFim: e.target.value })
                  }
                  type="year"
                  required
                />
              </div>
            </div>
          ))}
        </div>
      )}
    </PerfilAcademicoSectionLayout>
  );
}

### ARQUIVO: components\editar-perfil-pesquisador\CapitulosSection.tsx ###
import { Trash2, Star, BookMarked } from "lucide-react";
import FormField from "../FormField";
import { PerfilAcademicoSectionLayout } from "./PerfilAcademicoSectionLayout";

export function CapitulosSection({ data, onAdd, onEdit, onDelete }: any) {

  return (
    <PerfilAcademicoSectionLayout title="Cap√≠tulos de Livros">
      {/* Bot√£o adicionar novo */}
      <div className="flex justify-center pt-2">
        <button
          onClick={() => 
            onAdd({
              editora: "",
              paginaInicial: undefined,
              paginaFinal: undefined,
              tituloCapitulo: "",
              nomeLivro: "",
              ano: undefined,
              destaque: false,
            })
          }
          className="px-4 py-2 text-white rounded-lg shadow-md transition text-sm shadow bg-[#990000] hover:bg-red-700"
        >
          + Adicionar Cap√≠tulo
        </button>
      </div>

      {/* Empty State - Quando n√£o h√° cap√≠tulos */}
      {data.length === 0 && (
        <div className="flex flex-col items-center justify-center py-12 px-4 mt-4">
          <div className="bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 max-w-md w-full text-center">
            <div className="flex justify-center mb-4">
              <div className="bg-red-100 p-4 rounded-full">
                <BookMarked size={48} className="text-red-700" />
              </div>
            </div>
            <h3 className="text-lg font-semibold text-gray-800 mb-2">
              Nenhum cap√≠tulo cadastrado
            </h3>
            <p className="text-gray-600 text-sm">
              Adicione seus cap√≠tulos de livros para enriquecer seu perfil e destacar suas contribui√ß√µes editoriais.
            </p>
          </div>
        </div>
      )}

      {/* Listagem */}
      {data.length > 0 && (
        <div className="space-y-4 mt-4">
          {data.map((item: any) => (
            <div
              key={item.id}
              className="relative bg-gray-50 border border-gray-200 rounded-lg p-4"
            >
              {/* √çCONES CENTRALIZADOS VERTICALMENTE */}
              <div className="absolute right-4 top-1/2 -translate-y-1/2 flex flex-col gap-4">

                {/* Bot√£o de apagar */}
                <button
                  onClick={() => onDelete(item.id)}
                  className="w-12 h-12 flex items-center justify-center rounded-full bg-red-100 hover:bg-red-200 transition shadow"
                >
                  <Trash2 size={26} className="text-red-700" />
                </button>

                {/* Bot√£o de destaque */}
                <button
                  onClick={() =>
                    onEdit(item.id, { ...item, destaque: !item.destaque })
                  }
                  className={`
                    w-12 h-12 flex items-center justify-center rounded-full bg-white shadow transition
                    hover:bg-gray-100
                    ${item.destaque ? "animate-pulse-star" : ""}
                  `}
                >
                  <Star
                    size={28}
                    className={`
                      transition-transform duration-300
                      ${item.destaque ? "text-yellow-400 scale-105" : "text-gray-300 scale-100"}
                    `}
                    fill={item.destaque ? "#FACC15" : "none"}
                  />
                </button>
              </div>

              {/* CAMPOS DO CAP√çTULO */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 pr-28">
                <FormField
                  label="T√≠tulo do Cap√≠tulo"
                  value={item.tituloCapitulo}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, tituloCapitulo: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Nome do Livro"
                  value={item.nomeLivro}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, nomeLivro: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Editora"
                  value={item.editora}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, editora: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Ano de Publica√ß√£o"
                  value={item.ano}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, ano: e.target.value })
                  }
                  type="year"
                  required
                />

                <FormField
                  label="P√°gina Inicial"
                  value={item.paginaInicial}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, paginaInicial: e.target.value })
                  }
                  type="number"
                />

                <FormField
                  label="P√°gina Final"
                  value={item.paginaFinal}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, paginaFinal: e.target.value })
                  }
                  type="number"
                />

                <FormField
                  label="DOI do Livro"
                  value={item.doi}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, doi: e.target.value })
                  }
                />
              </div>
            </div>
          ))}
        </div>
      )}
    </PerfilAcademicoSectionLayout>
  );
}

### ARQUIVO: components\editar-perfil-pesquisador\EventosSection.tsx ###
import { Trash2, Star, Calendar } from "lucide-react";
import FormField from "../FormField";
import { PerfilAcademicoSectionLayout } from "./PerfilAcademicoSectionLayout";
import Dropdown from "../Dropdown";

export function EventosSection({ data, onAdd, onEdit, onDelete }: any) {

  const opcoesClassificacao = [
    { label: "Internacional", value: "INTERNACIONAL" },
    { label: "Nacional", value: "NACIONAL" },
    { label: "Regional", value: "REGIONAL" },
    { label: "Local", value: "LOCAL" },
  ];

  return (
    <PerfilAcademicoSectionLayout title="Trabalhos em Eventos">
      {/* Bot√£o adicionar novo */}
      <div className="flex justify-center pt-2">
        <button
          onClick={() => 
            onAdd({
              titulo: "",
              ano: undefined,
              nomeEvento: "",
              cidadeEvento: "",
              classificacaoEvento: "",
              destaque: false,
            })
          }
          className="px-4 py-2 text-white rounded-lg shadow-md transition text-sm shadow bg-[#990000] hover:bg-red-700"
        >
          + Adicionar Trabalho em Evento
        </button>
      </div>

      {/* Empty State - Quando n√£o h√° trabalhos em eventos */}
      {data.length === 0 && (
        <div className="flex flex-col items-center justify-center py-12 px-4 mt-4">
          <div className="bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 max-w-md w-full text-center">
            <div className="flex justify-center mb-4">
              <div className="bg-red-100 p-4 rounded-full">
                <Calendar size={48} className="text-red-700" />
              </div>
            </div>
            <h3 className="text-lg font-semibold text-gray-800 mb-2">
              Nenhum trabalho em evento cadastrado
            </h3>
            <p className="text-gray-600 text-sm">
              Adicione seus trabalhos apresentados em eventos para enriquecer seu perfil e destacar sua participa√ß√£o cient√≠fica.
            </p>
          </div>
        </div>
      )}

      {/* Listagem */}
      {data.length > 0 && (
        <div className="space-y-4 mt-4">
          {data.map((item: any) => (
            <div
              key={item.id}
              className="relative bg-gray-50 border border-gray-200 rounded-lg p-4"
            >
              {/* √çCONES CENTRALIZADOS VERTICALMENTE */}
              <div className="absolute right-4 top-1/2 -translate-y-1/2 flex flex-col gap-4">

                {/* Bot√£o de apagar */}
                <button
                  onClick={() => onDelete(item.id)}
                  className="w-12 h-12 flex items-center justify-center rounded-full bg-red-100 hover:bg-red-200 transition shadow"
                >
                  <Trash2 size={26} className="text-red-700" />
                </button>

                {/* Bot√£o de destaque */}
                <button
                  onClick={() =>
                    onEdit(item.id, { ...item, destaque: !item.destaque })
                  }
                  className={`
                    w-12 h-12 flex items-center justify-center rounded-full bg-white shadow transition
                    hover:bg-gray-100
                    ${item.destaque ? "animate-pulse-star" : ""}
                  `}
                >
                  <Star
                    size={28}
                    className={`
                      transition-transform duration-300
                      ${item.destaque ? "text-yellow-400 scale-105" : "text-gray-300 scale-100"}
                    `}
                    fill={item.destaque ? "#FACC15" : "none"}
                  />
                </button>
              </div>

              {/* CAMPOS DO TRABALHO EM EVENTO */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 pr-28">
                <FormField
                  label="T√≠tulo do Trabalho"
                  value={item.titulo}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, titulo: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Nome do Evento"
                  value={item.nomeEvento}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, nomeEvento: e.target.value })
                  }
                  required
                />

                <Dropdown
                  label="Classifica√ß√£o do Evento"
                  value={item.classificacaoEvento}
                  onChange={(value) => onEdit(item.id, { ...item, classificacaoEvento: value })}
                  options={opcoesClassificacao}
                  required
                />

                <FormField
                  label="Cidade do Evento"
                  value={item.cidadeEvento}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, cidadeEvento: e.target.value })
                  }
                />

                <FormField
                  label="Ano"
                  value={item.ano}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, ano: e.target.value })
                  }
                  type="year"
                  required
                />
              </div>
            </div>
          ))}
        </div>
      )}
    </PerfilAcademicoSectionLayout>
  );
}

### ARQUIVO: components\editar-perfil-pesquisador\FormacoesSection.tsx ###
import { Trash2, Star, GraduationCap } from "lucide-react";
import FormField from "../FormField";
import { PerfilAcademicoSectionLayout } from "./PerfilAcademicoSectionLayout";
import Dropdown from "../Dropdown";
import { label } from "framer-motion/client";

export function FormacoesSection({ data, onAdd, onEdit, onDelete }: any) {

    const opcoesNivel = [
        { label: "CURSO T√âCNICO PROFISSIONALIZANTE", value: "CURSO T√âCNICO PROFISSIONALIZANTE"},
        { label: "GRADUA√á√ÉO", value: "GRADUA√á√ÉO" },
        { label: "APERFEI√áOAMENTO", value: "APERFEI√áOAMENTO"},
        { label: "ESPECIALIZA√á√ÉO", value: "ESPECIALIZA√á√ÉO" },
        { label: "MESTRADO", value: "MESTRADO" },
        { label: "MESTRADO PROFISSIONALIZANTE", value: "MESTRADO PROFISSIONALIZANTE"},
        { label: "DOUTORADO", value: "DOUTORADO" },
        { label: "RESID√äNCIA M√âDICA", value: "RESID√äNCIA M√âDICA"},
        { label: "LIVRE DOC√äNCIA", value: "LIVRE DOC√äNCIA"},
        { label: "P√ìS-DOUTORADO", value: "P√ìS-DOUTORADO" },
    ];

    const opcoesStatus = [
        { label: "CONCLU√çDO", value: "CONCLU√çDO" },
        { label: "EM ANDAMENTO", value: "EM ANDAMENTO" },
    ];

  return (
    <PerfilAcademicoSectionLayout title="Forma√ß√µes Acad√™micas">
      {/* Bot√£o adicionar novo */}
      <div className="flex justify-center pt-2">
        <button
        onClick={() => 
          onAdd({
            nivel: "",
            curso: "",
            instituicao: "",
            status: "EM ANDAMENTO",
            anoInicio: undefined,
            anoConclusao: undefined,
            tituloTrabalho: "",
            orientador: "",
            destaque: false,
          })
        }
        className="px-4 py-2 text-white rounded-lg shadow-md transition text-sm shadow bg-[#990000] hover:bg-red-700"
      >
        + Adicionar Forma√ß√£o Acad√™mica
      </button>
      </div>

      {/* Empty State - Quando n√£o h√° forma√ß√µes */}
      {data.length === 0 && (
        <div className="flex flex-col items-center justify-center py-12 px-4 mt-4">
          <div className="bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 max-w-md w-full text-center">
            <div className="flex justify-center mb-4">
              <div className="bg-red-100 p-4 rounded-full">
                <GraduationCap size={48} className="text-red-700" />
              </div>
            </div>
            <h3 className="text-lg font-semibold text-gray-800 mb-2">
              Nenhuma forma√ß√£o acad√™mica cadastrada
            </h3>
            <p className="text-gray-600 text-sm">
              Adicione suas forma√ß√µes acad√™micas para enriquecer seu perfil e destacar sua trajet√≥ria educacional.
            </p>
          </div>
        </div>
      )}

      {/* Listagem */}
      {data.length > 0 && (
        <div className="space-y-4 mt-4">
          {data.map((item: any) => (
            <div
              key={item.id}
              className="relative bg-gray-50 border border-gray-200 rounded-lg p-4"
            >
              {/* √çCONES CENTRALIZADOS VERTICALMENTE */}
              <div className="absolute right-4 top-1/2 -translate-y-1/2 flex flex-col gap-4">

                  {/* Bot√£o de apagar */}
                  <button
                  onClick={() => onDelete(item.id)}
                  className="w-12 h-12 flex items-center justify-center rounded-full bg-red-100 hover:bg-red-200 transition shadow"
                  >
                  <Trash2 size={26} className="text-red-700" />
                  </button>

                {/* Bot√£o de destaque */}
                  <button
                      onClick={() =>
                          onEdit(item.id, { ...item, destaque: !item.destaque })
                      }
                      className={`
                          w-12 h-12 flex items-center justify-center rounded-full bg-white shadow transition
                          hover:bg-gray-100
                          ${item.destaque ? "animate-pulse-star" : ""}
                      `}
                      >
                      <Star
                          size={28}
                          className={`
                          transition-transform duration-300
                          ${item.destaque ? "text-yellow-400 scale-105" : "text-gray-300 scale-100"}
                          `}
                          fill={item.destaque ? "#FACC15" : "none"}
                      />
                  </button>
              </div>

              {/* CAMPOS DA FORMA√á√ÉO */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 pr-28">
                  <Dropdown
                      label="N√≠vel"
                      value={item.nivel}
                      onChange={(value) => onEdit(item.id, { ...item, nivel: value })}
                      options={opcoesNivel}
                      required
                  />

                <FormField
                  label="Curso"
                  value={item.curso}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, curso: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Institui√ß√£o"
                  value={item.instituicao}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, instituicao: e.target.value })
                  }
                  required
                />

                <Dropdown
                  label="Status"
                  value={item.status}
                  onChange={(value) => onEdit(item.id, { ...item, status: value })}
                  options={opcoesStatus}
                  />

                <FormField
                  label="Ano In√≠cio"
                  value={item.anoInicio}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, anoInicio: e.target.value })
                  }
                  type="year"
                />

                <FormField
                  label="Ano Conclus√£o"
                  value={item.anoConclusao}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, anoConclusao: e.target.value })
                  }
                  type="year"
                />

                <FormField
                  label="T√≠tulo do Trabalho"
                  value={item.tituloTrabalho}
                  onChange={(e) =>
                    onEdit(item.id, {
                      ...item,
                      tituloTrabalho: e.target.value,
                    })
                  }
                />

                <FormField
                  label="Orientador"
                  value={item.orientador}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, orientador: e.target.value })
                  }
                />
              </div>
            </div>
          ))}
        </div>
      )}
    </PerfilAcademicoSectionLayout>
  );
}

### ARQUIVO: components\editar-perfil-pesquisador\LivrosSection.tsx ###
import { Trash2, Star, BookOpen } from "lucide-react";
import FormField from "../FormField";
import { PerfilAcademicoSectionLayout } from "./PerfilAcademicoSectionLayout";

export function LivrosSection({ data, onAdd, onEdit, onDelete }: any) {

  return (
    <PerfilAcademicoSectionLayout title="Livros Publicados">
      {/* Bot√£o adicionar novo */}
      <div className="flex justify-center pt-2">
        <button
          onClick={() => 
            onAdd({
              isbn: "",
              editora: "",
              ano: undefined,
              numeroPaginas: undefined,
              titulo: "",
              destaque: false,
            })
          }
          className="px-4 py-2 text-white rounded-lg shadow-md transition text-sm shadow bg-[#990000] hover:bg-red-700"
        >
          + Adicionar Livro
        </button>
      </div>

      {/* Empty State - Quando n√£o h√° livros */}
      {data.length === 0 && (
        <div className="flex flex-col items-center justify-center py-12 px-4 mt-4">
          <div className="bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 max-w-md w-full text-center">
            <div className="flex justify-center mb-4">
              <div className="bg-red-100 p-4 rounded-full">
                <BookOpen size={48} className="text-red-700" />
              </div>
            </div>
            <h3 className="text-lg font-semibold text-gray-800 mb-2">
              Nenhum livro cadastrado
            </h3>
            <p className="text-gray-600 text-sm">
              Adicione seus livros publicados para enriquecer seu perfil e destacar sua produ√ß√£o editorial.
            </p>
          </div>
        </div>
      )}

      {/* Listagem */}
      {data.length > 0 && (
        <div className="space-y-4 mt-4">
          {data.map((item: any) => (
            <div
              key={item.id}
              className="relative bg-gray-50 border border-gray-200 rounded-lg p-4"
            >
              {/* √çCONES CENTRALIZADOS VERTICALMENTE */}
              <div className="absolute right-4 top-1/2 -translate-y-1/2 flex flex-col gap-4">

                {/* Bot√£o de apagar */}
                <button
                  onClick={() => onDelete(item.id)}
                  className="w-12 h-12 flex items-center justify-center rounded-full bg-red-100 hover:bg-red-200 transition shadow"
                >
                  <Trash2 size={26} className="text-red-700" />
                </button>

                {/* Bot√£o de destaque */}
                <button
                  onClick={() =>
                    onEdit(item.id, { ...item, destaque: !item.destaque })
                  }
                  className={`
                    w-12 h-12 flex items-center justify-center rounded-full bg-white shadow transition
                    hover:bg-gray-100
                    ${item.destaque ? "animate-pulse-star" : ""}
                  `}
                >
                  <Star
                    size={28}
                    className={`
                      transition-transform duration-300
                      ${item.destaque ? "text-yellow-400 scale-105" : "text-gray-300 scale-100"}
                    `}
                    fill={item.destaque ? "#FACC15" : "none"}
                  />
                </button>
              </div>

              {/* CAMPOS DO LIVRO */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 pr-28">
                <FormField
                  label="T√≠tulo"
                  value={item.titulo}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, titulo: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Editora"
                  value={item.editora}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, editora: e.target.value })
                  }
                  required
                />

                <FormField
                  label="ISBN"
                  value={item.isbn}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, isbn: e.target.value })
                  }
                />

                <FormField
                  label="Ano de Publica√ß√£o"
                  value={item.ano}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, ano: e.target.value })
                  }
                  type="year"
                  required
                />

                <FormField
                  label="N√∫mero de P√°ginas"
                  value={item.numeroPaginas}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, numeroPaginas: e.target.value })
                  }
                  type="number"
                />

                <FormField
                  label="Autores"
                  value={item.autores}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, autores: e.target.value })
                  }
                />
              </div>
            </div>
          ))}
        </div>
      )}
    </PerfilAcademicoSectionLayout>
  );
}

### ARQUIVO: components\editar-perfil-pesquisador\OrientacoesSection.tsx ###
import { Trash2, Star, Users } from "lucide-react";
import FormField from "../FormField";
import { PerfilAcademicoSectionLayout } from "./PerfilAcademicoSectionLayout";
import Dropdown from "../Dropdown";

export function OrientacoesSection({ data, onAdd, onEdit, onDelete }: any) {

  const opcoesTipo = [
    { label: "Inicia√ß√£o Cient√≠fica", value: "INICIACAO_CIENTIFICA" },
    { label: "Trabalho de Conclus√£o de Curso", value: "TCC" },
    { label: "Mestrado", value: "MESTRADO" },
    { label: "Doutorado", value: "DOUTORADO" },
    { label: "P√≥s-Doutorado", value: "POS_DOUTORADO" },
    { label: "Supervis√£o de Est√°gio", value: "SUPERVISAO_ESTAGIO" },
  ];

  return (
    <PerfilAcademicoSectionLayout title="Orienta√ß√µes">
      {/* Bot√£o adicionar novo */}
      <div className="flex justify-center pt-2">
        <button
          onClick={() => 
            onAdd({
              nomeOrientado: "",
              nomeCurso: "",
              ano: undefined,
              instituicao: "",
              tituloTrabalho: "",
              tipo: "",
              destaque: false,
            })
          }
          className="px-4 py-2 text-white rounded-lg shadow-md transition text-sm shadow bg-[#990000] hover:bg-red-700"
        >
          + Adicionar Orienta√ß√£o
        </button>
      </div>

      {/* Empty State - Quando n√£o h√° orienta√ß√µes */}
      {data.length === 0 && (
        <div className="flex flex-col items-center justify-center py-12 px-4 mt-4">
          <div className="bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 max-w-md w-full text-center">
            <div className="flex justify-center mb-4">
              <div className="bg-red-100 p-4 rounded-full">
                <Users size={48} className="text-red-700" />
              </div>
            </div>
            <h3 className="text-lg font-semibold text-gray-800 mb-2">
              Nenhuma orienta√ß√£o cadastrada
            </h3>
            <p className="text-gray-600 text-sm">
              Adicione suas orienta√ß√µes para enriquecer seu perfil e destacar sua atua√ß√£o como orientador.
            </p>
          </div>
        </div>
      )}

      {/* Listagem */}
      {data.length > 0 && (
        <div className="space-y-4 mt-4">
          {data.map((item: any) => (
            <div
              key={item.id}
              className="relative bg-gray-50 border border-gray-200 rounded-lg p-4"
            >
              {/* √çCONES CENTRALIZADOS VERTICALMENTE */}
              <div className="absolute right-4 top-1/2 -translate-y-1/2 flex flex-col gap-4">

                {/* Bot√£o de apagar */}
                <button
                  onClick={() => onDelete(item.id)}
                  className="w-12 h-12 flex items-center justify-center rounded-full bg-red-100 hover:bg-red-200 transition shadow"
                >
                  <Trash2 size={26} className="text-red-700" />
                </button>

                {/* Bot√£o de destaque */}
                <button
                  onClick={() =>
                    onEdit(item.id, { ...item, destaque: !item.destaque })
                  }
                  className={`
                    w-12 h-12 flex items-center justify-center rounded-full bg-white shadow transition
                    hover:bg-gray-100
                    ${item.destaque ? "animate-pulse-star" : ""}
                  `}
                >
                  <Star
                    size={28}
                    className={`
                      transition-transform duration-300
                      ${item.destaque ? "text-yellow-400 scale-105" : "text-gray-300 scale-100"}
                    `}
                    fill={item.destaque ? "#FACC15" : "none"}
                  />
                </button>
              </div>

              {/* CAMPOS DA ORIENTA√á√ÉO */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 pr-28">
                <FormField
                  label="Nome do Orientando"
                  value={item.nomeOrientado}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, nomeOrientado: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Tipo de Orienta√ß√£o"
                  value={item.tipo}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, tipo: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Nome do Curso"
                  value={item.nomeCurso}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, nomeCurso: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Institui√ß√£o"
                  value={item.instituicao}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, instituicao: e.target.value })
                  }
                  required
                />

                <FormField
                  label="T√≠tulo do Trabalho"
                  value={item.tituloTrabalho}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, tituloTrabalho: e.target.value })
                  }
                />

                <FormField
                  label="Ano"
                  value={item.ano}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, ano: e.target.value })
                  }
                  type="year"
                  required
                />
              </div>
            </div>
          ))}
        </div>
      )}
    </PerfilAcademicoSectionLayout>
  );
}

### ARQUIVO: components\editar-perfil-pesquisador\PerfilAcademicoSectionLayout.tsx ###
export function PerfilAcademicoSectionLayout({
  title,
  children,
}: {
  title: string;
  children: React.ReactNode;
}) {
  return (
    <section className="space-y-4 mt-6">
      {children}
    </section>
  );
}


### ARQUIVO: components\editar-perfil-pesquisador\PerfilAcademicoTabs.tsx ###
const TABS = [
  "Forma√ß√µes Acad√™micas",
  "Atua√ß√µes Profissionais",
  "Artigos",
  "Livros",
  "Cap√≠tulos",
  "Trabalho em Eventos",
  "Projetos de Pesquisa",
  "Premia√ß√µes",
  "Orienta√ß√µes",
];

export function PerfilAcademicoTabs({ active, onChange }: { active: string; onChange: (tab: string) => void }) {
  return (
    <div className="flex flex-wrap gap-2 mt-4 justify-center">
      {TABS.map((tab) => (
        <button
          key={tab}
          onClick={() => onChange(tab)}
          className={`
            px-4 py-2 rounded-lg text-sm font-medium transition
            ${active === tab
              ? "bg-[#990000] hover:bg-red-700 rounded-lg text-white shadow"
              : "bg-white border border-gray-300 text-gray-700 hover:bg-gray-100"}
          `}
        >
          {tab}
        </button>
      ))}
    </div>
  );
}



### ARQUIVO: components\editar-perfil-pesquisador\PremiacoesSection.tsx ###
import { Trash2, Star, Award } from "lucide-react";
import FormField from "../FormField";
import { PerfilAcademicoSectionLayout } from "./PerfilAcademicoSectionLayout";

export function PremiacoesSection({ data, onAdd, onEdit, onDelete }: any) {

  return (
    <PerfilAcademicoSectionLayout title="Pr√™mios e T√≠tulos">
      {/* Bot√£o adicionar novo */}
      <div className="flex justify-center pt-2">
        <button
          onClick={() => 
            onAdd({
              titulo: "",
              instituicao: "",
              ano: undefined,
              destaque: false,
            })
          }
          className="px-4 py-2 text-white rounded-lg shadow-md transition text-sm shadow bg-[#990000] hover:bg-red-700"
        >
          + Adicionar Pr√™mio ou T√≠tulo
        </button>
      </div>

      {/* Empty State - Quando n√£o h√° premia√ß√µes */}
      {data.length === 0 && (
        <div className="flex flex-col items-center justify-center py-12 px-4 mt-4">
          <div className="bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 max-w-md w-full text-center">
            <div className="flex justify-center mb-4">
              <div className="bg-red-100 p-4 rounded-full">
                <Award size={48} className="text-red-700" />
              </div>
            </div>
            <h3 className="text-lg font-semibold text-gray-800 mb-2">
              Nenhuma premia√ß√£o cadastrada
            </h3>
            <p className="text-gray-600 text-sm">
              Adicione seus pr√™mios e t√≠tulos para enriquecer seu perfil e destacar suas conquistas acad√™micas.
            </p>
          </div>
        </div>
      )}

      {/* Listagem */}
      {data.length > 0 && (
        <div className="space-y-4 mt-4">
          {data.map((item: any) => (
            <div
              key={item.id}
              className="relative bg-gray-50 border border-gray-200 rounded-lg p-4"
            >
              {/* √çCONES CENTRALIZADOS VERTICALMENTE */}
              <div className="absolute right-4 top-1/2 -translate-y-1/2 flex flex-col gap-4">

                {/* Bot√£o de apagar */}
                <button
                  onClick={() => onDelete(item.id)}
                  className="w-12 h-12 flex items-center justify-center rounded-full bg-red-100 hover:bg-red-200 transition shadow"
                >
                  <Trash2 size={26} className="text-red-700" />
                </button>

                {/* Bot√£o de destaque */}
                <button
                  onClick={() =>
                    onEdit(item.id, { ...item, destaque: !item.destaque })
                  }
                  className={`
                    w-12 h-12 flex items-center justify-center rounded-full bg-white shadow transition
                    hover:bg-gray-100
                    ${item.destaque ? "animate-pulse-star" : ""}
                  `}
                >
                  <Star
                    size={28}
                    className={`
                      transition-transform duration-300
                      ${item.destaque ? "text-yellow-400 scale-105" : "text-gray-300 scale-100"}
                    `}
                    fill={item.destaque ? "#FACC15" : "none"}
                  />
                </button>
              </div>

              {/* CAMPOS DA PREMIA√á√ÉO */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 pr-28">
                <FormField
                  label="T√≠tulo do Pr√™mio"
                  value={item.titulo}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, titulo: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Institui√ß√£o Concedente"
                  value={item.instituicao}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, instituicao: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Ano"
                  value={item.ano}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, ano: e.target.value })
                  }
                  type="year"
                  required
                />
              </div>
            </div>
          ))}
        </div>
      )}
    </PerfilAcademicoSectionLayout>
  );
}

### ARQUIVO: components\editar-perfil-pesquisador\ProjetosPesquisaSection.tsx ###
import { Trash2, Star, Microscope } from "lucide-react";
import FormField from "../FormField";
import { PerfilAcademicoSectionLayout } from "./PerfilAcademicoSectionLayout";

export function ProjetosPesquisaSection({ data, onAdd, onEdit, onDelete }: any) {

  return (
    <PerfilAcademicoSectionLayout title="Projetos de Pesquisa">
      {/* Bot√£o adicionar novo */}
      <div className="flex justify-center pt-2">
        <button
          onClick={() => 
            onAdd({
              titulo: "",
              descricao: "",
              instituicao: "",
              ano: undefined,
              financiador: "",
              destaque: false,
            })
          }
          className="px-4 py-2 text-white rounded-lg shadow-md transition text-sm shadow bg-[#990000] hover:bg-red-700"
        >
          + Adicionar Projeto de Pesquisa
        </button>
      </div>

      {/* Empty State - Quando n√£o h√° projetos */}
      {data.length === 0 && (
        <div className="flex flex-col items-center justify-center py-12 px-4 mt-4">
          <div className="bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 max-w-md w-full text-center">
            <div className="flex justify-center mb-4">
              <div className="bg-red-100 p-4 rounded-full">
                <Microscope size={48} className="text-red-700" />
              </div>
            </div>
            <h3 className="text-lg font-semibold text-gray-800 mb-2">
              Nenhum projeto de pesquisa cadastrado
            </h3>
            <p className="text-gray-600 text-sm">
              Adicione seus projetos de pesquisa para enriquecer seu perfil e destacar suas atividades cient√≠ficas.
            </p>
          </div>
        </div>
      )}

      {/* Listagem */}
      {data.length > 0 && (
        <div className="space-y-4 mt-4">
          {data.map((item: any) => (
            <div
              key={item.id}
              className="relative bg-gray-50 border border-gray-200 rounded-lg p-4"
            >
              {/* √çCONES CENTRALIZADOS VERTICALMENTE */}
              <div className="absolute right-4 top-1/2 -translate-y-1/2 flex flex-col gap-4">

                {/* Bot√£o de apagar */}
                <button
                  onClick={() => onDelete(item.id)}
                  className="w-12 h-12 flex items-center justify-center rounded-full bg-red-100 hover:bg-red-200 transition shadow"
                >
                  <Trash2 size={26} className="text-red-700" />
                </button>

                {/* Bot√£o de destaque */}
                <button
                  onClick={() =>
                    onEdit(item.id, { ...item, destaque: !item.destaque })
                  }
                  className={`
                    w-12 h-12 flex items-center justify-center rounded-full bg-white shadow transition
                    hover:bg-gray-100
                    ${item.destaque ? "animate-pulse-star" : ""}
                  `}
                >
                  <Star
                    size={28}
                    className={`
                      transition-transform duration-300
                      ${item.destaque ? "text-yellow-400 scale-105" : "text-gray-300 scale-100"}
                    `}
                    fill={item.destaque ? "#FACC15" : "none"}
                  />
                </button>
              </div>

              {/* CAMPOS DO PROJETO DE PESQUISA */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 pr-28">
                <FormField
                  label="T√≠tulo do Projeto"
                  value={item.titulo}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, titulo: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Institui√ß√£o"
                  value={item.instituicao}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, instituicao: e.target.value })
                  }
                  required
                />

                <FormField
                  label="Financiador"
                  value={item.financiador}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, financiador: e.target.value })
                  }
                />

                <FormField
                  label="Ano"
                  value={item.ano}
                  onChange={(e) =>
                    onEdit(item.id, { ...item, ano: e.target.value })
                  }
                  type="year"
                  required
                />

                <div className="md:col-span-2">
                  <FormField
                    label="Descri√ß√£o"
                    value={item.descricao}
                    onChange={(e) =>
                      onEdit(item.id, { ...item, descricao: e.target.value })
                    }
                  />
                </div>
              </div>
            </div>
          ))}
        </div>
      )}
    </PerfilAcademicoSectionLayout>
  );
}

### ARQUIVO: criarConta\page.tsx ###
"use client";

import { useRouter } from "next/navigation";
import Image from "next/image";
import { useState } from "react";

export default function Cadastro() {
  const router = useRouter();
  const [abaAtiva, setAbaAtiva] = useState("pesquisador");

  const [email, setEmail] = useState("");
  const [senha, setSenha] = useState("");
  const [confirmarSenha, setConfirmarSenha] = useState("");
  const [erro, setErro] = useState<string | null>(null);
  const [loading, setLoading] = useState(false);

  const validarEmail = (email: string) =>
    /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  const validarSenha = (senha: string) =>
    /^(?=.*[0-9])(?=.*[!@#$%^&*]).{8,}$/.test(senha);

  const handleLogoClick = () => {
    window.location.href = "http://localhost:3000";
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    // Valida√ß√µes
    if (!validarEmail(email)) {
      setErro("Digite um email v√°lido.");
      return;
    }
    if (!validarSenha(senha)) {
      setErro(
        "A senha deve ter no m√≠nimo 8 caracteres, incluir um n√∫mero e um caractere especial."
      );
      return;
    }
    if (senha !== confirmarSenha) {
      setErro("As senhas n√£o coincidem.");
      return;
    }

    setErro(null);
    setLoading(true);

    try {
      const res = await fetch(
        "http://localhost:8080/api/usuarios/salvarUsuario",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            login: email,
            password: senha,
            tipo_usuario: abaAtiva,
            roles: abaAtiva === "pesquisador" ? ["usuario"] : ["empresa"],
          }),
        }
      );

      if (res.ok) {
        const data = await res.json();
        console.log(data);

        const token = data.token;
        localStorage.setItem("token", token.token);
        localStorage.setItem("usuarioId", data.usuarioId);

        console.log(email);

        if (email) {
          localStorage.setItem("email", email);
        }

        // Limpa o flag de email enviado ao criar nova conta
        localStorage.removeItem("emailVerificacaoEnviado");

        router.push(`/aguardandoVerificacao`);
      } else {
        const errorData = await res.json();
        setErro(errorData.message || "Erro ao criar a conta.");
      }
    } catch (error) {
      console.error("Erro no cadastro:", error);
      setErro("Erro ao conectar com o servidor.");
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="flex flex-col md:flex-row h-screen">
      {/* Lado esquerdo: imagem */}
      <div className="hidden md:flex w-1/3 bg-red-800 items-end justify-center overflow-visible">
        <div className="relative h-screen w-[180%]">
          <Image
            src="/images/cadastro.png"
            alt="Cadastro"
            fill
            quality={100}
            priority
            className="object-cover drop-shadow-lg absolute bottom-0"
          />
        </div>
      </div>

      {/* Lado direito: formul√°rio */}
      <div className="flex-1 flex items-start justify-center bg-white dark:bg-gray-900 pt-12 px-4 md:px-0">
        <div className="w-full max-w-md">
          <Image
            src="/images/logo_1.png"
            alt="Logo"
            width={150}
            height={150}
            quality={100}
            priority
            className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer mx-auto"
            onClick={handleLogoClick}
          />

          {/* T√≠tulo em vermelho */}
          <h2 className="text-xl font-semibold mb-8 mt-32 text-center md:text-left text-red-800 dark:text-red-600">
            Criar Conta
          </h2>

          {/* Abas */}
          <div className="flex space-x-6 mb-6 justify-center md:justify-start">
            <button
              type="button"
              className={`pb-2 ${
                abaAtiva === "pesquisador"
                  ? "border-b-2 border-[#990000] dark:border-red-600 font-semibold text-[#990000] dark:text-red-600"
                  : "text-gray-500 dark:text-gray-400"
              }`}
              onClick={() => setAbaAtiva("pesquisador")}
            >
              Pesquisador
            </button>
            <button
              type="button"
              className={`pb-2 ${
                abaAtiva === "empresa"
                  ? "border-b-2 border-[#990000] dark:border-red-600 font-semibold text-[#990000] dark:text-red-600"
                  : "text-gray-500 dark:text-gray-400"
              }`}
              onClick={() => setAbaAtiva("empresa")}
            >
              Empresa
            </button>
          </div>

          {/* Formul√°rio */}
          <form onSubmit={handleSubmit} className="space-y-6">
            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Email*
              </label>
              <input
                type="email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                required
                className="form-input-login"
                placeholder="Digite seu email"
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Senha*
              </label>
              <input
                type="password"
                value={senha}
                onChange={(e) => setSenha(e.target.value)}
                required
                className="form-input-login"
                placeholder="Digite sua senha"
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Confirmar Senha*
              </label>
              <input
                type="password"
                value={confirmarSenha}
                onChange={(e) => setConfirmarSenha(e.target.value)}
                required
                className="form-input-login"
                placeholder="Confirme sua senha"
              />
            </div>

            {erro && (
              <p className="text-red-600 dark:text-red-400 text-sm">{erro}</p>
            )}

            <button
              type="submit"
              disabled={loading}
              className="w-full bg-red-800 dark:bg-red-700 text-white p-3 rounded-xl hover:bg-red-900 dark:hover:bg-red-600 transition disabled:opacity-50 font-medium"
            >
              {loading ? "Criando conta..." : "Criar conta"}
            </button>
          </form>

          <p className="text-sm text-center mt-4 text-gray-700 dark:text-gray-300">
            J√° tem uma conta?{" "}
            <a
              href="/login"
              className="text-red-700 dark:text-red-400 font-medium"
            >
              Entrar
            </a>
          </p>
        </div>
      </div>
    </div>
  );
}


### ARQUIVO: edicaoEmpresa\CompanyEditForm.tsx ###
"use client"
import React, { useEffect, useState } from 'react';
import { User, Camera } from 'lucide-react';
import MenuLateral from "../components/MenuLateral";
import { useSearchParams, useRouter } from 'next/navigation';

export default function CompanyEditForm() {
    const searchParams = useSearchParams();
    const id = searchParams.get('id'); // ID da Empresa
    const router = useRouter();

    // --- ESTADOS PARA IMAGEM ---
    const [imagemPerfil, setImagemPerfil] = useState<string | null>(null);
    const [imagemAlterada, setImagemAlterada] = useState(false);
    const [arquivoImagem, setArquivoImagem] = useState<File | null>(null);

    const [formData, setFormData] = useState({
        nomeRegistro: "",
        nomeComercial: "",
        cnpj: "",
        telefone: "",
        email: "",
        site: "",
        setor: "Desenvolvimento de Software",
        cep: "",
        logradouro: "",
        numeroEndereco: "",
        bairro: "",
        cidade: "",
        estado: "PR",
        frase: "",
        textoEmpresa: ""
    });

    const [loading, setLoading] = useState(false);

    const token = localStorage.getItem("token");
    const idUsuarioLogado = localStorage.getItem("usuarioId");

    // --- BUSCAR IMAGEM ATUAL ---
    const buscarImagemEmpresa = async () => {
        if (!id) return;
        try {
            // Ajuste a URL conforme seu Back-end. Assumindo padr√£o similar ao do pesquisador.
            const res = await fetch(`http://localhost:8080/api/empresas/${id}/imagem`, {
                method: "GET",
                headers: {
                    "Authorization": `Bearer ${token}`
                },
            });

            if (res.ok) {
                const blob = await res.blob();
                if (blob.size > 0) {
                    const urlImagem = URL.createObjectURL(blob);
                    setImagemPerfil(urlImagem);
                }
            }
        } catch (error) {
            console.error("Erro ao buscar imagem da empresa:", error);
        }
    };

    // Buscar dados da empresa
    const buscarInfoEmpresa = async () => {
        try {
            const res = await fetch(`http://localhost:8080/api/empresas/listarEmpresa/${idUsuarioLogado}`, {
                method: "GET",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${token}`
                },
            });
            const data = await res.json();

            setFormData({
                nomeRegistro: data.nomeRegistro || "",
                nomeComercial: data.nomeComercial || "",
                cnpj: data.cnpj || "",
                telefone: data.telefone || "",
                email: data.email || "",
                site: data.site || "",
                setor: data.setor || "Desenvolvimento de Software",
                cep: data.cep || "",
                logradouro: data.logradouro || "",
                numeroEndereco: data.numeroEndereco || "",
                bairro: data.bairro || "",
                cidade: data.cidade || "",
                estado: data.estado || "PR",
                frase: data.frase || "",
                textoEmpresa: data.textoEmpresa || ""
            });
            
            // Ap√≥s buscar os dados, busca a imagem
            buscarImagemEmpresa();

        } catch (error) {
            console.error("Erro ao buscar empresa:", error);
        }
    };

    useEffect(() => {
        if (id) buscarInfoEmpresa();
    }, [id]);

    // --- FUN√á√ÉO DE UPLOAD DA IMAGEM ---
    const atualizarFoto = async () => {
        if (!arquivoImagem || !id) return;

        const formDataImg = new FormData();
        formDataImg.append("file", arquivoImagem);

        const res = await fetch(`http://localhost:8080/api/empresas/${id}/imagem`, {
            method: "PUT",
            headers: {
                "Authorization": `Bearer ${token}`
            },
            body: formDataImg,
        });

        if (!res.ok) {
            throw new Error("Falha ao atualizar imagem da empresa");
        }
    };

    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
    };

    // M√°scaras (CNPJ, Telefone, CEP) omitidas para brevidade, mant√™m-se iguais ao seu c√≥digo original...
    const handleCNPJChange = (e: React.ChangeEvent<HTMLInputElement>) => {
       let valor = e.target.value.replace(/\D/g, "");
       if (valor.length > 14) valor = valor.slice(0, 14);
       valor = valor.replace(/^(\d{2})(\d)/, "$1.$2");
       valor = valor.replace(/^(\d{2})\.(\d{3})(\d)/, "$1.$2.$3");
       valor = valor.replace(/\.(\d{3})(\d)/, ".$1/$2");
       valor = valor.replace(/(\d{4})(\d)/, "$1-$2");
       setFormData(prev => ({ ...prev, cnpj: valor }));
    };

    const handleTelefoneChange = (e: React.ChangeEvent<HTMLInputElement>) => {
       let value = e.target.value.replace(/\D/g, "");
       if (value.length > 11) value = value.slice(0, 11);
       value = value.replace(/^(\d{2})(\d)/g, "($1) $2");
       value = value.replace(/(\d{5})(\d)/, "$1-$2");
       setFormData(prev => ({ ...prev, telefone: value }));
    };

    const handleCepChange = async (e: React.ChangeEvent<HTMLInputElement>) => {
       let valor = e.target.value.replace(/\D/g, "");
       if (valor.length > 8) valor = valor.slice(0, 8);
       let valorFormatado = valor;
       if (valor.length > 5) {
       valorFormatado = valor.replace(/^(\d{5})(\d)/, "$1-$2");
       }
       setFormData(prev => ({ ...prev, cep: valorFormatado }));
       if (valor.length === 8) {
       try {
           const res = await fetch(`https://viacep.com.br/ws/${valor}/json/`);
           const data = await res.json();
           if (!data.erro) {
           setFormData(prev => ({
               ...prev,
               logradouro: data.logradouro || "",
               bairro: data.bairro || "",
               cidade: data.localidade || "",
               estado: data.uf || ""
           }));
           } else {
           }
       } catch (err) {
           console.error("Erro ao buscar CEP:", err);
       }
       }
    };

    const handleCancel = () => {
        router.push(`/perfilEmpresa/${idUsuarioLogado}`);
    };

    // --- SAVE GERAL (TEXTO + IMAGEM) ---
    const handleSave = async () => {
        setLoading(true);
        try {
            // 1. Atualiza dados de texto
            const res = await fetch(`http://localhost:8080/api/empresas/alterarEmpresa/${id}`, {
                method: "PUT",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${token}`
                },
                body: JSON.stringify(formData),
            });

            if (!res.ok) throw new Error("Erro ao salvar dados da empresa");

            // 2. Se houve altera√ß√£o de imagem, faz o upload
            if (imagemAlterada) {
                await atualizarFoto();
            }

            setTimeout(() => {
                router.push(`/perfilEmpresa/${idUsuarioLogado}`);
            }, 1000);

        } catch (error) {
            console.error(error);
        } finally {
            setLoading(false);
        }
    };

    return (
        <div className="min-h-screen bg-gray-100 p-6">
            <MenuLateral />
            <div className="w-4/5 mx-auto bg-white rounded-lg shadow-sm">
                {/* Header */}
                <div className="flex items-center p-6 border-b border-gray-200">
                    
                    {/* --- √ÅREA DA IMAGEM --- */}
                    <div className="relative group cursor-pointer mr-6">
                        <div className="w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden border border-gray-300">
                            {imagemPerfil ? (
                                <img 
                                    src={imagemPerfil} 
                                    alt="Logo da empresa" 
                                    className="w-full h-full object-cover"
                                />
                            ) : (
                                <User className="w-10 h-10 text-gray-400" />
                            )}
                        </div>

                        {/* Overlay ao passar o mouse */}
                        <div 
                            className="absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"
                            onClick={() => document.getElementById("upload-foto-empresa")?.click()}
                        >
                            <Camera className="w-8 h-8 text-white" />
                        </div>

                        {/* Input Hidden */}
                        <input
                            type="file"
                            id="upload-foto-empresa"
                            accept="image/*"
                            className="hidden"
                            onChange={(e) => {
                                const arquivo = e.target.files?.[0];
                                if (arquivo) {
                                    const url = URL.createObjectURL(arquivo);
                                    setImagemPerfil(url);
                                    setArquivoImagem(arquivo);
                                    setImagemAlterada(true);
                                }
                            }}
                        />
                    </div>
                    {/* --- FIM √ÅREA DA IMAGEM --- */}

                    <h1 className="text-2xl font-semibold text-red-600">Editar Perfil da Empresa</h1>
                </div>

                {/* Form Content */}
                <div className="p-6 space-y-8">
                    {/* Informa√ß√µes Principais */}
                    <div>
                        <h3 className="text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">Informa√ß√µes Principais</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Nome de Registro</label>
                                <input type="text" name="nomeRegistro" value={formData.nomeRegistro} onChange={handleInputChange} className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Nome Comercial</label>
                                <input type="text" name="nomeComercial" value={formData.nomeComercial} onChange={handleInputChange} className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">CNPJ</label>
                                <input type="text" name="cnpj" value={formData.cnpj} onChange={handleCNPJChange} className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Telefone</label>
                                <input type="tel" name="telefone" value={formData.telefone} onChange={handleTelefoneChange} className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input type="email" name="email" value={formData.email} onChange={handleInputChange} className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Site</label>
                                <input type="url" name="site" value={formData.site} onChange={handleInputChange} className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" />
                            </div>
                            <div className="md:col-span-2">
                                <label className="block text-sm font-medium text-gray-700 mb-2">Setor</label>
                                <select name="setor" value={formData.setor} onChange={handleInputChange} className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
                                    <option value="Desenvolvimento de Software">Desenvolvimento de Software</option>
                                    <option value="Tecnologia da Informa√ß√£o">Tecnologia da Informa√ß√£o</option>
                                    <option value="Consultoria">Consultoria</option>
                                    <option value="Marketing Digital">Marketing Digital</option>
                                    <option value="E-commerce">E-commerce</option>
                                    <option value="Outros">Outros</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    {/* Informa√ß√µes de Endere√ßo */}
                    <div>
                        <h3 className="text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">Informa√ß√µes de Endere√ßo</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">CEP</label>
                                <input type="text" name="cep" value={formData.cep} onChange={handleCepChange} maxLength={9} className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" />
                            </div>
                            <div className="md:col-span-2">
                                <label className="block text-sm font-medium text-gray-700 mb-2">Logradouro</label>
                                <input type="text" name="logradouro" value={formData.logradouro} onChange={handleInputChange} className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">N√∫mero</label>
                                <input type="text" name="numeroEndereco" value={formData.numeroEndereco} onChange={handleInputChange} className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Bairro</label>
                                <input type="text" name="bairro" value={formData.bairro} onChange={handleInputChange} className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Cidade</label>
                                <input type="text" name="cidade" value={formData.cidade} onChange={handleInputChange} className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Estado</label>
                                <select name="estado" value={formData.estado} onChange={handleInputChange} className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
                                    {/* Lista de Estados */}
                                    <option value="AC">AC</option><option value="AL">AL</option><option value="AP">AP</option><option value="AM">AM</option><option value="BA">BA</option><option value="CE">CE</option><option value="DF">DF</option><option value="ES">ES</option><option value="GO">GO</option><option value="MA">MA</option><option value="MT">MT</option><option value="MS">MS</option><option value="MG">MG</option><option value="PA">PA</option><option value="PB">PB</option><option value="PR">PR</option><option value="PE">PE</option><option value="PI">PI</option><option value="RJ">RJ</option><option value="RN">RN</option><option value="RS">RS</option><option value="RO">RO</option><option value="RR">RR</option><option value="SC">SC</option><option value="SP">SP</option><option value="SE">SE</option><option value="TO">TO</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    {/* Informa√ß√µes Gerais */}
                    <div>
                        <h3 className="text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">Informa√ß√µes Gerais</h3>
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Frase de Destaque</label>
                                <input type="text" name="frase" value={formData.frase} onChange={handleInputChange} placeholder="Frase que representa a empresa" className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Descri√ß√£o da Empresa</label>
                                <textarea name="textoEmpresa" value={formData.textoEmpresa} onChange={handleInputChange} rows={6} className="w-full px-3 py-2 border border-gray-300 text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent resize-vertical" placeholder="Descreva a empresa, seus valores, miss√£o e diferencias..." />
                            </div>
                        </div>
                    </div>
                </div>

                {/* Bot√µes */}
                <div className="flex justify-end space-x-4 p-6 border-t border-gray-200">
                    <button onClick={handleCancel} className="px-6 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-200">Cancelar</button>
                    <button onClick={handleSave} disabled={loading} className="px-6 py-2 text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors duration-200 flex items-center gap-2">
                        {loading && <span className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></span>}
                        {loading ? "Gravando..." : "Gravar"}
                    </button>
                </div>
            </div>

            {/* Overlay de loading geral */}
            {loading && (
                <div className="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
                    <div className="w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin"></div>
                </div>
            )}
        </div>
    );
}

### ARQUIVO: edicaoEmpresa\page.tsx ###
import { Suspense } from 'react';
import CompanyEditForm from './CompanyEditForm';

export default function EditarPerfil() {
  return (
          <div>
            <Suspense fallback={<p>Carregando...</p>}>
              <CompanyEditForm />
            </Suspense>
          </div>
        );
}


### ARQUIVO: esqueciSenha\page.tsx ###
"use client";

import Image from "next/image";
import { useState } from "react";

export default function RedefinirSenha() {
  const [email, setEmail] = useState("");
  const [erro, setErro] = useState("");
  const [loading, setLoading] = useState(false);
  const [sucesso, setSucesso] = useState("");

  const validarEmail = (email: string) =>
    /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

  const handleLogoClick = () => {
    window.location.href = "http://localhost:3000";
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    if (!validarEmail(email)) {
      setErro("Digite um email v√°lido.");
      return;
    }

    setErro("");
    setSucesso("");
    setLoading(true);

    try {
      const res = await fetch(
        `http://localhost:8080/api/redefinicao/enviar?email=${email}`,
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
        }
      );

      if (res.ok || res.status == 404) {
        setSucesso(
          "Se o e-mail estiver cadastrado, o link para redefini√ß√£o de senha ser√° enviado para a caixa de entrada."
        );
        setEmail("");
      } else {
        const data = await res.json();
        setErro(data.message || "Erro ao enviar o e-mail de redefini√ß√£o.");
      }
    } catch (error) {
      console.error("Erro:", error);
      setErro("Erro ao conectar com o servidor.");
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="flex flex-col md:flex-row h-screen">
      {/* Lado esquerdo: imagem ilustrativa */}
      <div className="hidden md:flex w-1/3 bg-red-800 items-end justify-start overflow-visible relative">
        <div className="relative h-auto w-[120%] -right-[11.11%]">
          <Image
            src="/images/login.png"
            alt="Redefinir Senha"
            width={500}
            height={900}
            quality={100}
            priority
            className="object-contain drop-shadow-lg absolute bottom-0"
          />
        </div>
      </div>

      {/* Lado direito: formul√°rio */}
      <div className="flex-1 flex items-start justify-center bg-white dark:bg-gray-900 pt-12 px-4 md:px-0">
        <div className="w-full max-w-md">
          {/* Logo */}
          <Image
            src="/images/logo_1.png"
            alt="Logo"
            width={150}
            height={150}
            quality={100}
            priority
            className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer mx-auto"
            onClick={handleLogoClick}
          />

          {/* Cabe√ßalho */}
          <h2 className="text-xl font-semibold mb-4 mt-32 text-center md:text-left text-red-800 dark:text-red-600">
            Redefinir Senha
          </h2>

          {/* Mensagem de instru√ß√£o */}
          <p className="text-gray-700 dark:text-gray-300 text-sm mb-8 text-center md:text-left">
            Digite o e-mail de sua conta e n√≥s enviaremos um e-mail com o link
            de redefini√ß√£o de senha.
          </p>

          {/* Formul√°rio */}
          <form onSubmit={handleSubmit} className="space-y-6">
            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Email*
              </label>
              <input
                type="email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                required
                className="form-input-login"
                placeholder="Digite seu email"
              />
            </div>

            {/* Caixa de erro / sucesso */}
            {(erro || sucesso) && (
              <div
                className={`p-3 rounded-lg border text-sm font-medium animate-fadeIn ${
                  erro
                    ? "bg-red-100 dark:bg-red-900/30 border-red-300 dark:border-red-700 text-red-700 dark:text-red-300"
                    : "bg-green-100 dark:bg-green-900/30 border-green-300 dark:border-green-700 text-green-700 dark:text-green-300"
                }`}
              >
                {erro || sucesso}
              </div>
            )}

            {/* Bot√£o de envio */}
            <button
              type="submit"
              disabled={loading}
              className="w-full bg-red-800 dark:bg-red-700 text-white p-3 rounded-xl hover:bg-red-900 dark:hover:bg-red-600 transition disabled:opacity-50 font-medium"
            >
              {loading
                ? "Enviando..."
                : "Enviar e-mail de redefini√ß√£o de senha"}
            </button>
          </form>

          {/* Link Voltar */}
          <p className="text-sm text-center mt-3 text-gray-700 dark:text-gray-300">
            <a
              href="/login"
              className="text-red-800 dark:text-red-400 font-medium hover:text-red-900 dark:hover:text-red-300 transition-colors"
            >
              Voltar para o login
            </a>
          </p>
        </div>
      </div>
    </div>
  );
}


### ARQUIVO: gerenciarListas\page.tsx ###
"use client";

import { useState, useEffect } from "react";
import { Bookmark, Heart, List } from "lucide-react";
import MenuLateral from "../components/MenuLateral";
import Link from "next/link";
import { useRouter } from "next/navigation"; // Importe o router

// Interface para o objeto da lista que a UI vai usar
interface ListaDisplay {
  id: number | string; // ID pode ser n√∫mero (custom) ou string ("favoritos")
  nome: string;
  count: number;
  icone: JSX.Element;
}

export default function GerenciarListas() {
  const router = useRouter();
  
  // O estado agora come√ßa vazio e ser√° preenchido pela API
  const [listas, setListas] = useState<ListaDisplay[]>([]);
  const [loading, setLoading] = useState(true);

  const [showModal, setShowModal] = useState(false);
  const [novoNome, setNovoNome] = useState("");

  // --- 1. BUSCAR DADOS DAS APIs ---
  useEffect(() => {
    const token = localStorage.getItem("token");
    const usuarioId = localStorage.getItem("usuarioId");

    if (!token || !usuarioId) {
      console.error("Usu√°rio n√£o logado. Redirecionando...");
      router.push("/login");
      return;
    }

    const fetchData = async () => {
      setLoading(true);
      const headers = {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${token}`
      };

      try {
        // Prepara as duas chamadas de API
        const fetchListasCustom = fetch(`http://localhost:8080/api/listas/listarListas`, { headers });
        const fetchFavoritos = fetch(`http://localhost:8080/api/favoritos/usuario/${usuarioId}/favorito`, { headers });

        // Executa em paralelo
        const [resListas, resFavoritos] = await Promise.all([fetchListasCustom, fetchFavoritos]);

        if (!resListas.ok || !resFavoritos.ok) {
          throw new Error("Falha ao buscar dados das listas ou favoritos");
        }

        const listasData = await resListas.json(); // Array de ListaDTO
        const favoritosData = await resFavoritos.json(); // Array de Favorito

        // 1. Objeto Fixo de Favoritos
        const listaFavoritos: ListaDisplay = {
          id: "favoritos", // ID especial para o link
          nome: "Favoritos",
          count: favoritosData.length, // Contagem real
          icone: <Heart className="text-red-500" />
        };

        // 2. Listas Customizadas da API
        // (Assumindo que sua API /listarListas retorna um array de {id, nome, count})
        const listasCustomizadas: ListaDisplay[] = listasData.map(lista => ({
          id: lista.id,
          nome: lista.nomeLista,
          count: lista.perfisSalvos ? lista.perfisSalvos.length : 0, // Ajuste 'count' se o nome da propriedade for outro
          icone: <List />
        }));

        // 3. Junta tudo e atualiza o estado
        setListas([listaFavoritos, ...listasCustomizadas]);

      } catch (err) {
        console.error("Erro ao carregar listas:", err);
      } finally {
        setLoading(false);
      }
    };

    fetchData();
  }, [router]);


  const adicionarLista = async () => {
    if (novoNome.trim() === "") return;
    
    const token = localStorage.getItem("token");

    try {
      const res = await fetch(`http://localhost:8080/api/listas/salvarLista`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${token}`
        },
        body: JSON.stringify({ nomeLista: novoNome })
      });

      if (!res.ok) {
        throw new Error("Falha ao criar a lista");
      }

      const listaSalva = await res.json(); // A nova lista (ex: {id: 4, nome: "..."})

      // Cria o objeto de UI para a nova lista
      const novaLista: ListaDisplay = {
        id: listaSalva.id,
        nome: listaSalva.nomeLista,
        count: 0, // Novas listas come√ßam com 0
        icone: <List />,
      };

      // Adiciona a nova lista ao estado e fecha o modal
      setListas(listasAnteriores => [...listasAnteriores, novaLista]);
      setNovoNome("");
      setShowModal(false);

    } catch (err) {
      console.error("Erro ao salvar lista:", err);
    }
  };

  return (
    <div className="flex flex-col md:flex-row h-screen">
      <MenuLateral />

      <div className="flex-1 bg-gray-100 pr-36 pl-36 p-6">
        <div className="flex justify-between items-center mb-6">
          <h1 className="text-2xl font-bold text-[#990000]">Gerenciar Listas</h1>
          <button
            onClick={() => setShowModal(true)}
            className="bg-white p-2 rounded-full shadow hover:bg-gray-100 transition"
          >
            <Bookmark className="text-[#990000]" />
          </button>
        </div>

        {/* Listas (Agora din√¢micas) */}
        {loading ? (
          <p className="text-gray-500">Carregando listas...</p>
        ) : (
          <div className="flex flex-col gap-4">
            {listas.map((lista) => (
              <Link
                key={lista.id}
                // O href agora funciona para /lista/favoritos e /lista/2
                href={`/lista/${lista.id}`} 
                className="flex items-center justify-between bg-white text-gray-600 p-4 rounded-lg shadow hover:shadow-md transition"
              >
                <div className="flex items-center gap-3">
                  {lista.icone}
                  <span className="font-medium">{lista.nome}</span>
                </div>
                <span className="font-semibold">{lista.count}</span>
              </Link>
            ))}
          </div>
        )}
      </div>

      {/* Modal (sem altera√ß√£o) */}
      {showModal && (
        <div className="fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50">
          <div className="bg-white p-6 rounded-lg shadow-lg w-96">
            <h2 className="text-lg font-bold text-gray-600 mb-4">Criar Nova Lista</h2>
            <input
              type="text"
              placeholder="Nome da lista"
              value={novoNome}
              onChange={(e) => setNovoNome(e.target.value)}
              className="w-full border text-gray-600 px-3 py-2 rounded mb-4"
            />
            <div className="flex justify-end gap-2">
              <button
                onClick={() => setShowModal(false)}
                className="px-4 py-2 rounded border text-gray-600 hover:bg-gray-100"
              >
                Cancelar
              </button>
              <button
                onClick={adicionarLista}
                className="px-4 py-2 rounded bg-[#990000] text-white hover:bg-red-800"
              >
                Criar
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

### ARQUIVO: home\page.tsx ###
"use client";

import { useState, useEffect, useRef } from "react";
import { useRouter } from "next/navigation";
import MenuLateral from "../components/MenuLateral";
import { Swiper, SwiperSlide } from "swiper/react";
import { Navigation, A11y } from "swiper/modules";
import "swiper/css";
import "swiper/css/navigation";
import "swiper/css/a11y";
import {
  Search,
  Heart,
  Bookmark,
  X,
  ChevronLeft,
  ChevronRight,
  ListPlus,
} from "lucide-react";
import { jwtDecode } from "jwt-decode";
import { TokenPayload } from "../types/auth.types";
import { LoadingSpinner } from "../components/LoadingSpinner";

export default function Home() {
  const router = useRouter();

  // Estados para busca
  const [termoBusca, setTermoBusca] = useState("");
  const [resultadosBusca, setResultadosBusca] = useState([]);
  const [mostrarResultados, setMostrarResultados] = useState(false);
  const [carregando, setCarregando] = useState(false);
  
  // Estados do Usu√°rio Logado
  const [nome, setNome] = useState(null);
  const [imagemPerfil, setImagemPerfil] = useState("/images/user.png");
  const [currentUserId, setCurrentUserId] = useState(null); // NOVO
  const [currentUserType, setCurrentUserType] = useState(""); // NOVO

  const searchRef = useRef(null);
  const swiperRef = useRef(null);

  // Mock - Recomenda√ß√µes
  const [recomendacoes, setRecomendacoes] = useState([]);
  const [modalOpen, setModalOpen] = useState(false);
  const [loadingModal, setLoadingModal] = useState(false);
  const [selectedProfileId, setSelectedProfileId] = useState<number | null>(null);
  const [minhasListas, setMinhasListas] = useState([]);
  const [novoNomeLista, setNovoNomeLista] = useState("");
  const [selectedUser, setSelectedUser] = useState(null);

  // --- L√ìGICA DE NAVEGA√á√ÉO DO PERFIL ---
  const handleNavegarParaPerfil = () => {
    if (!currentUserId) return;

    if (currentUserType === "pesquisador") {
      router.push(`/pesquisadores/${currentUserId}`);
    } else {
      // Assume que se n√£o √© pesquisador, √© empresa (ou l√≥gica similar)
      router.push(`/perfilEmpresa/${currentUserId}`);
    }
  };

  const handleBuscaCompleta = () => {
    if (termoBusca.trim()) {
      router.push(`/pesquisa?q=${encodeURIComponent(termoBusca.trim())}`);
    }
  };

  // Fechar resultados ao clicar fora
  useEffect(() => {
    function handleClickOutside(event) {
      if (searchRef.current && !searchRef.current.contains(event.target)) {
        setMostrarResultados(false);
      }
    }

    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, []);

  // Fun√ß√£o de busca
  const handleBuscar = async (e) => {
    if (e) e.preventDefault();

    if (!termoBusca.trim()) {
      setMostrarResultados(false);
      setResultadosBusca([]);
      return;
    }

    setCarregando(true);
    const token = localStorage.getItem("token");
    try {
      const response = await fetch(
        "http://localhost:8080/api/pesquisa/buscar",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
          body: JSON.stringify({
            termo: termoBusca,
            tipo: "todos",
          }),
        }
      );

      if (response.ok) {
        const dados = await response.json();
        setResultadosBusca(dados);
        setMostrarResultados(true);
      } else {
        // Fallback simplificado
        setResultadosBusca([]);
        setMostrarResultados(true);
      }
    } catch (error) {
      console.error("Erro ao buscar:", error);
      setResultadosBusca([]);
      setMostrarResultados(true);
    } finally {
      setCarregando(false);
    }
  };

  // Busca em tempo real com debounce
  useEffect(() => {
    if (termoBusca.length >= 2) {
      const timeoutId = setTimeout(() => {
        handleBuscar();
      }, 300);
      return () => clearTimeout(timeoutId);
    } else if (termoBusca.length === 0) {
      setMostrarResultados(false);
      setResultadosBusca([]);
    }
  }, [termoBusca]);

  // --- CARREGAMENTO DE DADOS DO USU√ÅRIO ---
  useEffect(() => {
    const handleBuscarUsuario = async () => {
      const token = localStorage.getItem("token");
  
      const tokenContent = jwtDecode<TokenPayload>(token || "");
      const email = tokenContent.sub

      console.log(token)
      if (!token || !email) {
        router.push("/login");
        return;
      }

      setCarregando(true);

      try {
        const response = await fetch(
          `http://localhost:8080/api/usuarios/listarUsuario/${email}`,
          {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
          }
        );

        if (!response.ok) {
          throw new Error("Falha ao buscar dados do usuario");
        }

        const dadosUsuario = await response.json();
        
        // SETAR ESTADOS GERAIS PARA NAVEGA√á√ÉO
        const tipo = dadosUsuario.tipoUsuario.name.toLowerCase();
        setCurrentUserId(dadosUsuario.id);
        setCurrentUserType(tipo);

        if (tipo === "pesquisador") {
          await handleDadosPesquisador(dadosUsuario.id);
        } else {
          await handleDadosEmpresa(dadosUsuario.id);
        }
        
        localStorage.setItem("tipo_usuario", tipo);
        localStorage.setItem("usuarioId", dadosUsuario.id);

        await handleRecomendacao(dadosUsuario.id);
      } catch (err) {
        console.error("Erro ao buscar perfil:", err);
      } finally {
        setCarregando(false);
      }
    };

    const handleDadosPesquisador = async (id) => {
      const token = localStorage.getItem("token");
      try {
        const response = await fetch(
          `http://localhost:8080/api/dadosPesquisador/${id}`,
          {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
          }
        );

        if (response.ok) {
          const dadosPesquisador = await response.json();
          localStorage.setItem("idTag", dadosPesquisador.pesquisador.id);
          setNome(dadosPesquisador.pesquisador.nomePesquisador);

          // Buscar imagem do perfil
          try {
            const imgResponse = await fetch(
              `http://localhost:8080/api/pesquisadores/${dadosPesquisador.pesquisador.id}/imagem`,
              {
                headers: { Authorization: `Bearer ${token}` },
              }
            );
            if (imgResponse.ok) {
              const blob = await imgResponse.blob();
              if (blob.size > 0) {
                const urlImagem = URL.createObjectURL(blob);
                setImagemPerfil(urlImagem);
              }
            }
          } catch (imgError) {
            console.error("Erro imagem:", imgError);
          }
        }
      } catch (err) {
        console.error("Erro dados pesquisador:", err);
      }
    };

    const handleDadosEmpresa = async (id) => {
      const token = localStorage.getItem("token");
      try {
        const response = await fetch(
          `http://localhost:8080/api/empresas/listarEmpresa/${id}`,
          {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
          }
        );

        if (response.ok) {
          const dadosEmpresa = await response.json();
          setNome(dadosEmpresa.nomeRegistro);
          
          // Tentar buscar imagem da empresa tamb√©m
          try {
             // Se voc√™ tiver o ID da empresa dentro de dadosEmpresa.id:
             if (dadosEmpresa.id) {
                const imgResponse = await fetch(
                  `http://localhost:8080/api/empresas/${dadosEmpresa.id}/imagem`,
                  {
                    headers: { Authorization: `Bearer ${token}` },
                  }
                );
                if (imgResponse.ok) {
                  const blob = await imgResponse.blob();
                  if (blob.size > 0) {
                      const urlImagem = URL.createObjectURL(blob);
                      setImagemPerfil(urlImagem);
                  }
                }
             }
          } catch(e) {
              console.log("Sem imagem empresa ou erro");
          }
        }
      } catch (err) {
        console.error("Erro dados empresa:", err);
      }
    };

    const handleRecomendacao = async (id) => {
      const token = localStorage.getItem("token");
      try {
        const response = await fetch(
          `http://localhost:8080/api/recomendacoes`,
          {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
          }
        );

        if (response.ok) {
            const recomendacao = await response.json();
            const recomendacoesFormatadas = recomendacao.map((item) => ({
              id: item.id,
              usuarioId: item.usuario.id,
              nome: item.nomePesquisador,
              area: item.sobrenome,
              tags: item.tags || [],
              email: item.email || "projetolaverse@gmail.com",
            }));
            setRecomendacoes(recomendacoesFormatadas);
        }
      } catch (err) {
        console.error("Erro recomendacao:", err);
      }
    };

    handleBuscarUsuario();
  }, [router]);

  // ... Restante das fun√ß√µes handleFavorito, handleBookmarkClick, etc (sem altera√ß√µes) ...
  const handleFavorito = async (id) => {
    const token = localStorage.getItem("token");

    if (!token) {
      console.error("Usu√°rio n√£o logado. Redirecionando...");
      router.push("/login");
      return;
    }

    setCarregando(true);

    try {
      const response = await fetch(
        `http://localhost:8080/api/favoritos/salvarFavorito`,
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
          body: JSON.stringify({
            pesquisadorId: id,
          }),
        }
      );

      if (response.status === 409) {
        console.warn("Perfil j√° est√° nos favoritos. N√£o adicionado.");
        alert("Este perfil j√° est√° salvo como favorito.");

        setRecomendacoes((listaAtual) =>
          listaAtual.filter((perfil) => perfil.id !== id)
        );
        return;
      }

      if (!response.ok) {
        throw new Error(`Falha ao salvar seguidor. Status: ${response.status}`);
      }

      const novoSeguidor = await response.json();
      console.log("Seguidor salvo:", novoSeguidor);

      setRecomendacoes((listaAtual) =>
        listaAtual.filter((perfil) => perfil.id !== id)
      );
    } catch (err) {
      console.error("Erro ao seguir perfil:", err);
    } finally {
      setCarregando(false);
    }
  };

  const handleBookmarkClick = async (profileId: number) => { 
      setSelectedProfileId(profileId);
      setLoadingModal(true);
      setModalOpen(true);
      setSelectedUser(null);
      setNovoNomeLista("");

      const token = localStorage.getItem("token");
      if (!token) return;

      try {
        const res = await fetch("http://localhost:8080/api/listas/listarListas", {
          headers: { Authorization: `Bearer ${token}` },
        });
        if (res.ok) {
          const data = await res.json();
          setMinhasListas(data);
        }
      } catch (err) { console.error(err); } finally { setLoadingModal(false); }
  };

  const handleAddToList = async (listaId: number) => {
    const token = localStorage.getItem("token");
    try {
      const res = await fetch(
        `http://localhost:8080/api/listas/salvarLista/${listaId}/perfil/${selectedProfileId}`,
        {
          method: "POST",
          headers: { Authorization: `Bearer ${token}` },
        }
      );
      if (!res.ok) throw new Error("Falha ao adicionar perfil");
      alert("Perfil salvo na lista!");
      setModalOpen(false);
    } catch (err) {
      console.error(err);
      alert("Erro ao salvar perfil.");
    }
  };
  const handleCreateAndAddToList = async () => {
    if (!novoNomeLista.trim()) return;

    const token = localStorage.getItem("token");
    try {
      const resCreate = await fetch(
        "http://localhost:8080/api/listas/salvarLista",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
          body: JSON.stringify({ nomeLista: novoNomeLista }),
        }
      );
      if (!resCreate.ok) throw new Error("Falha ao criar lista");

      const novaLista = await resCreate.json();
      await handleAddToList(novaLista.id);
      setNovoNomeLista("");
    } catch (err) {
      console.error(err);
      alert("Erro ao criar nova lista.");
    }
  };
  const limparBusca = () => { setTermoBusca(""); setMostrarResultados(false); setResultadosBusca([]); };
  const handleSelecionarResultado = (resultado) => {
    if (resultado.tipo === "pesquisador") {
      router.push(`/pesquisadores/${resultado.usuarioId}`);
    } else if (resultado.tipo === "empresa") {
      router.push(`/perfilEmpresa/${resultado.usuarioId}`);
    }
    setMostrarResultados(false);
    setTermoBusca("");
  };
  const handleKeyPress = (e) => { if (e.key === "Enter") handleBuscaCompleta(); };
  const goNext = () => { swiperRef.current?.swiper.slideNext(); };
  const goPrev = () => { swiperRef.current?.swiper.slidePrev(); };

  if (carregando) {
    return <div className="flex h-screen bg-gray-100">
            <MenuLateral />
            <main className="flex-1 flex items-center justify-center">
              <div className="flex flex-col items-center space-y-4">
                <LoadingSpinner></LoadingSpinner>
              </div>
            </main>
          </div>
  }

  if (!nome) {
    return (
      <div className="flex h-screen items-center justify-center bg-gray-100">
        <p className="text-xl">Carregando dados do usu√°rio...</p>
      </div>
    );
  }

  return (
    <div className="flex h-screen bg-gray-100">
      <MenuLateral />

      <div className="flex-1 ml-20 p-6 overflow-y-auto pl-20 pr-20">
        {/* Barra Superior */}
        <header className="flex justify-between items-center mb-6">
          <div className="relative w-1/2" ref={searchRef}>
            <div className="flex items-center bg-white px-3 py-2 rounded-lg shadow-md w-full">
              <Search className="text-gray-500 mr-2" />
              <input
                type="text"
                placeholder="Buscar por recrutador, pesquisa, tags..."
                value={termoBusca}
                onChange={(e) => setTermoBusca(e.target.value)}
                onKeyPress={handleKeyPress}
                className="flex-1 outline-none cursor-text text-gray-800"
              />
              {termoBusca && (
                <button
                  type="button"
                  onClick={limparBusca}
                  className="text-gray-500 hover:text-gray-700 ml-2 cursor-pointer"
                >
                  <X size={16} />
                </button>
              )}
              <button
                type="button"
                onClick={handleBuscaCompleta}
                disabled={carregando}
                className="ml-2 bg-[#990000] text-white px-4 py-1 rounded-md hover:bg-red-700 disabled:opacity-50"
              >
                {carregando ? "..." : "Buscar"}
              </button>
            </div>

            {/* Dropdown de resultados */}
            {mostrarResultados && (
              <div className="absolute top-full left-0 right-0 bg-white mt-1 rounded-lg shadow-lg border border-gray-200 max-h-96 overflow-y-auto z-50">
                {resultadosBusca.length > 0 ? (
                  resultadosBusca.map((resultado) => (
                    <div
                      key={`${resultado.tipo}-${resultado.id}`}
                      className="p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100"
                      onClick={() => handleSelecionarResultado(resultado)}
                    >
                      <div className="flex justify-between items-start">
                        <div className="flex-1">
                          <h3 className="font-semibold text-gray-900">{resultado.nome}</h3>
                          <p className="text-sm text-gray-700 mt-1">{resultado.area}</p>
                        </div>
                        <span className={`text-xs px-2 py-1 rounded-full ${resultado.tipo === "pesquisador" ? "bg-blue-100 text-blue-800" : "bg-green-100 text-green-800"}`}>
                          {resultado.tipo === "pesquisador" ? "Pesquisador" : "Empresa"}
                        </span>
                      </div>
                    </div>
                  ))
                ) : (
                  <div className="p-4 text-center text-gray-700">Nenhum resultado encontrado</div>
                )}
              </div>
            )}
          </div>

          {/* PERFIL DO USU√ÅRIO NO HEADER */}
          <div className="flex items-center gap-4">
            <div className="flex items-center bg-white px-3 py-2 rounded-lg shadow-md">
              <img
                src={imagemPerfil}
                alt="user"
                className="w-8 h-8 rounded-full mr-2 cursor-pointer object-cover"
                onClick={handleNavegarParaPerfil} // <--- ALTERADO
              />
              <span className="mr-2 cursor-default text-gray-700">
                {nome}
              </span>
              <button
                className="bg-[#990000] text-white px-3 py-1 rounded-md shadow-md hover:bg-red-700 cursor-pointer transition-colors"
                onClick={handleNavegarParaPerfil} // <--- ALTERADO
              >
                Ver Perfil
              </button>
            </div>
          </div>
        </header>

        {/* Card de Boas-vindas */}
        <div className="bg-white rounded-xl shadow-md p-6 flex justify-between items-center mb-8">
          <div>
            <h1 className="text-4xl font-bold mb-2 text-[#990000]">
              Bem-vindo(a), <span className="text-black">{nome}</span>
            </h1>
            <p className="text-bold text-[#990000] font-semibold text-lg">
              Encontre pesquisadores e empresas por tags e √°reas de interesse
            </p>
          </div>
          <img src="/images/boasvindas.png" alt="Boas vindas" className="w-68 mr-20 cursor-default" />
        </div>

        {/* Resto da Home (Recomenda√ß√µes, Tags, Modais) mantido igual... */}
        <section className="relative">
            {/* ... C√≥digo do Swiper e Recomenda√ß√µes ... */}
            <div className="flex justify-between items-center mb-4">
            <h2 className="text-xl font-bold text-gray-800 cursor-default">
              Recomenda√ß√µes
            </h2>
            <button className="px-4 py-2 bg-white shadow-md rounded-lg hover:bg-gray-200 text-gray-700 cursor-pointer transition-colors">
              Ver mais
            </button>
          </div>

          <div className="relative">
            <Swiper
              ref={swiperRef}
              spaceBetween={20}
              slidesPerView={4}
              modules={[Navigation, A11y]}
              className="pb-6"
            >
              {recomendacoes.map((item) => (
                <SwiperSlide key={item.id}>
                  <div className="bg-white rounded-xl shadow-md p-4 flex flex-col items-center relative hover:shadow-lg transition-shadow">
                     <div className="absolute top-3 right-3 flex gap-2">
                      <button className="p-1 rounded-full bg-gray-100 hover:bg-blue-100 transition-colors cursor-pointer">
                        <Bookmark className="w-5 h-5 text-gray-500 hover:text-blue-600" onClick={() => handleBookmarkClick(item.usuarioId)} />
                      </button>
                      <button className="p-1 rounded-full bg-gray-100 hover:bg-red-100 transition-colors cursor-pointer">
                        <Heart className="w-5 h-5 text-gray-500 hover:text-red-600" onClick={() => handleFavorito(item.id)} />
                      </button>
                    </div>
                    <img src="/images/user.png" alt="user" className="w-20 rounded-full mb-3 cursor-pointer" onClick={() => router.push(`/pesquisadores/${item.usuarioId}`)} />
                    <h3 className="font-semibold text-gray-800 cursor-default">{item.nome}</h3>
                    <p className="text-gray-500 text-sm mb-4 cursor-default">{item.area}</p>
                    <div className="flex gap-2 mt-2 flex-wrap justify-center cursor-default">
                      {item.tags.map((tag, idx) => (
                        <span key={idx} className="text-xs bg-gray-200 px-2 py-1 rounded-full border border-gray-300 text-gray-700">
                          {tag}
                        </span>
                      ))}
                    </div>
                    <div className="bg-gray-200 w-full h-0.5 my-3"></div>
                    <button className="text-[#990000] font-semibold hover:underline transition-colors cursor-pointer" onClick={() => { setSelectedUser(item); setModalOpen(true); }}>
                      Contato
                    </button>
                  </div>
                </SwiperSlide>
              ))}
            </Swiper>
            <button onClick={goPrev} className="absolute top-1/2 -left-6 z-10 bg-white text-gray-700 px-3 py-3 rounded-full shadow-md hover:bg-gray-50 hover:text-[#990000] transform -translate-y-1/2"><ChevronLeft size={20} /></button>
            <button onClick={goNext} className="absolute top-1/2 -right-6 z-10 bg-white text-gray-700 px-3 py-3 rounded-full shadow-md hover:bg-gray-50 hover:text-[#990000] transform -translate-y-1/2"><ChevronRight size={20} /></button>
          </div>
        </section>

        <section className="mt-12">
          <div className="flex justify-between items-center mb-4">
            <h2 className="text-xl font-bold text-gray-800 cursor-default">Tags Populares</h2>
          </div>
          <div className="bg-white rounded-xl shadow-md p-6 cursor-default">
            <div className="flex flex-wrap gap-3">
              {["Desenvolvimento de Software", "Banco de Dados", "Intelig√™ncia Artificial", "Ci√™ncia de Dados", "Redes", "Seguran√ßa", "Cloud", "Mobile", "UX/UI", "DevOps"].map((tag, index) => (
                <button key={index} onClick={() => setTermoBusca(tag)} className="px-4 py-2 bg-gray-100 hover:bg-[#990000] hover:text-white text-gray-700 rounded-full transition-colors text-sm font-medium cursor-pointer">
                  {tag}
                </button>
              ))}
            </div>
          </div>
        </section>
      </div>

      {/* Modais (Contato e Bookmarks) */}
      {modalOpen && selectedUser && (
        <div className="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 cursor-pointer" onClick={() => setModalOpen(false)}>
          <div className="bg-white p-6 rounded-lg shadow-lg w-96 cursor-default" onClick={(e) => e.stopPropagation()}>
            <h2 className="text-xl font-bold text-[#990000] mb-4">Contato com {selectedUser?.nome}</h2>
            <p className="mb-4 text-gray-700">Entre em contato atrav√©s do email: <span className="font-semibold">{selectedUser.email || "projetolaverse@gmail.com"}</span></p>
            <div className="flex justify-end gap-3">
              <button className="px-4 py-2 bg-gray-200 rounded-lg" onClick={() => setModalOpen(false)}>Cancelar</button>
              <button className="px-4 py-2 bg-[#990000] text-white rounded-lg">Enviar Mensagem</button>
            </div>
          </div>
        </div>
      )}

      {modalOpen && !selectedUser && (
        <div className="fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50" onClick={() => setModalOpen(false)}>
          <div className="bg-white p-6 rounded-lg shadow-lg w-96" onClick={(e) => e.stopPropagation()}>
             <div className="flex justify-between items-center mb-4">
              <h2 className="text-lg font-bold text-[#990000]">Salvar em...</h2>
              <button onClick={() => setModalOpen(false)}><X className="w-5 h-5 text-gray-500" /></button>
            </div>
            {loadingModal ? <p>Carregando...</p> : (
              <>
                <div className="flex flex-col text-gray-600 gap-2 max-h-40 overflow-y-auto mb-4">
                  {minhasListas.map((lista) => (
                    <button key={lista.id} onClick={() => handleAddToList(lista.id)} className="w-full text-left p-2 rounded hover:bg-gray-100">
                      {lista.nomeLista}
                    </button>
                  ))}
                </div>
                <div className="border-t pt-4 flex gap-2">
                  <input type="text" placeholder="Criar nova lista..." value={novoNomeLista} onChange={(e) => setNovoNomeLista(e.target.value)} className="flex-1 w-full border text-gray-600 px-3 py-2 rounded" />
                  <button onClick={handleCreateAndAddToList} className="p-2 rounded bg-[#990000] text-white"><ListPlus size={20} /></button>
                </div>
              </>
            )}
          </div>
        </div>
      )}
    </div>
  );
}

### ARQUIVO: lista\[id]\page.tsx ###
"use client";

import { useParams, useRouter } from "next/navigation";
import { useState, useEffect } from "react";
import MenuLateral from "../../components/MenuLateral";
import { Heart, Bookmark, Trash2, X } from "lucide-react";

interface Perfil {
  idUsuario: number;
  idEntidade: number;
  nome: string;
  area: string;
  tipo: string;
  tags: string[];
}

interface UsuarioDTO {
  id: number;
  nomePesquisador: string;
  sobrenome: string;
}

interface PerfilSalvoDTO {
  idUsuario: number;
  idEntidade: number;
  nomeCompleto: string;
  tipoPerfil: string;
  area: string;
}

export default function ListaPage() {
  const { id } = useParams();
  const router = useRouter();

  const isFavoritesList = id === 'favoritos';
  const listaId = isFavoritesList ? null : Number(id); 

  const [perfis, setPerfis] = useState<Perfil[]>([]);
  const [nomeLista, setNomeLista] = useState("Carregando...");
  const [showModal, setShowModal] = useState(false);
  const [loading, setLoading] = useState(true);


  useEffect(() => {

    const token = localStorage.getItem("token");
    console.log(token);
    const id_usuario_logado = localStorage.getItem("usuarioId");
    console.log(id_usuario_logado)

    if (!token || !id_usuario_logado) {
      console.error("Usu√°rio n√£o logado. Redirecionando...");
      router.push("/login");
      return;
    }

    const headers = { "Content-Type": "application/json", "Authorization": `Bearer ${token}` };

    const fetchFavoritos = async () => {
      try {
        const response = await fetch(
          `http://localhost:8080/api/favoritos/usuario/${id_usuario_logado}/favorito`,
          { method: "GET", headers }
        );
        if (!response.ok) throw new Error("Falha ao buscar favoritos");
        
        const seguidores = await response.json();
        console.log(seguidores)
        const perfisFormatados = seguidores
          .filter(item => item.pesquisador != null)
          .map(item => ({                      
            idEntidade: item.pesquisador.id,
            idUsuario: item.pesquisador.id + 9,
            nome: `${item.pesquisador.nomePesquisador} ${item.pesquisador.sobrenome || ''}`,
            area: "Pesquisador", 
            tipo: item.pesquisador.usuario.tipoUsuario.name,
            tags: [] 
          }));
        
        setPerfis(perfisFormatados);
        setNomeLista("Favoritos");
      } catch (err) {
        console.error("Erro ao buscar favoritos:", err);
      } finally {
        setLoading(false);
      }
    };

    const fetchListaCustomizada = async () => {
      try {
        const response = await fetch(
          `http://localhost:8080/api/listas/listarLista/${listaId}`,
          { method: "GET", headers }
        );
        if (!response.ok) throw new Error("Falha ao buscar lista");

        const listaData = await response.json();
        
        const perfisFormatados = (listaData.perfisSalvos || []).map((item: PerfilSalvoDTO) => ({
          idUsuario: item.idUsuario,
          idEntidade: item.idEntidade,
          nome: item.nomeCompleto,
          area: item.area,
          tipo: item.tipoPerfil,
          // tags: item.tags
        }));

        setPerfis(perfisFormatados);
        setNomeLista(listaData.nomeLista);
      } catch (err) {
        console.error("Erro ao buscar lista customizada:", err);
      } finally {
        setLoading(false);
      }
    };

    if (isFavoritesList) {
      fetchFavoritos();
    } else {
      fetchListaCustomizada();
    }

  }, [id, isFavoritesList, listaId, router]);

  const removerPerfil = async (pessoa: Perfil) => {
      const token = localStorage.getItem("token");
      const id_usuario_logado = localStorage.getItem("usuarioId");
      if (!token || !id_usuario_logado) {
          router.push("/login");
          return;
      }

      let url: string;
      let method: string = "DELETE";

      if (isFavoritesList) {
          url = `http://localhost:8080/api/favoritos/excluirFavorito?usuarioId=${id_usuario_logado}&pesquisadorId=${pessoa.idEntidade}`;
      } else {
          url = `http://localhost:8080/api/listas/alterarLista/${listaId}/perfil/${pessoa.idUsuario}`;
      }

      try {
          const response = await fetch(url, {
              method: method,
              headers: { "Authorization": `Bearer ${token}` }
          });

          if (!response.ok) {
              throw new Error("Falha ao remover perfil da lista");
          }
          
          // Atualiza o estado: Filtra usando o ID √öNICO (idUsuario)
          setPerfis((prev) => prev.filter((p) => p.idUsuario !== pessoa.idUsuario)); 
          
      } catch (err) {
          console.error("Erro ao remover perfil:", err);
      }
  };

  const handleProfileClick = (pessoa: Perfil) => {
    console.log("pessoa: ", pessoa)
    const tipo = pessoa.tipo.toLowerCase();
    console.log("Tipo:", tipo)

    if(tipo === "pesquisador"){
      router.push(`/pesquisadores/${pessoa.idUsuario}`);
    } else if (tipo === "empresa") {
        router.push(`/perfilEmpresa/${pessoa.idUsuario}`);
    } else {
        console.error("Tipo de perfil desconhecido para navega√ß√£o:", tipo);
    }
  }

  const handleSalvarNome = async () => {
    const token = localStorage.getItem("token");
    const id_usuario_logado = localStorage.getItem("usuarioId");
    if (!token || !id_usuario_logado) {
      router.push("/login");
      return;
    }
    if (isFavoritesList) return; 

    try {
      const res = await fetch(
        `http://localhost:8080/api/listas/alterarLista/${listaId}`,
        {
          method: "PUT",
          headers: { "Content-Type": "application/json", "Authorization": `Bearer ${token}` },
          body: JSON.stringify({ nomeLista: nomeLista }) // Enviando o DTO com a chave correta
        }
      );
      if (!res.ok) throw new Error("Falha ao renomear a lista");
      
      setShowModal(false); 
    } catch (err) {
      console.error(err);
    }
  };

  const excluirLista = async () => {
    const token = localStorage.getItem("token");
    const id_usuario_logado = localStorage.getItem("usuarioId");
    if (!token || !id_usuario_logado) {
      router.push("/login");
      return;
    }
    if (isFavoritesList) return; 

    if (confirm(`Tem certeza que deseja excluir a lista "${nomeLista}"?`)) {
      try {
        const response = await fetch(
          `http://localhost:8080/api/listas/excluirLista/${listaId}`,
          {
            method: "DELETE",
            headers: { "Authorization": `Bearer ${token}` }
          }
        );
        if (!response.ok) throw new Error("Falha ao excluir a lista");
        
        router.push("/gerenciarListas"); 
      } catch (err) {
        console.error(err);
      }
    }
  };

  if (loading) {
     return (
        <div className="flex flex-col md:flex-row h-screen">
          <MenuLateral />
          <div className="flex-1 flex items-center justify-center">
            <p className="text-xl">Carregando lista...</p>
          </div>
        </div>
    );
  }

  return (
    <div className="flex flex-col md:flex-row h-screen">
      <MenuLateral />
      <div className="flex-1 bg-gray-100 pr-36 pl-36 p-6 overflow-y-auto">
        <div className="flex justify-between items-center mb-6">
          <h1 className="text-2xl font-bold text-[#990000]">{nomeLista}</h1>
          <div className="flex gap-2">
            <button
              onClick={() => setShowModal(true)}
              className="bg-white p-2 rounded-full shadow hover:bg-gray-100 transition"
              title="Editar lista"
            >
              {isFavoritesList ? (
                <Heart className="text-red-600" />
              ) : (
                <Bookmark className="text-[#990000]" />
              )}
            </button>
          </div>
        </div>

        {/* Grid de Cards */}
        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
          {perfis.map((pessoa) => (
            <div
              key={pessoa.idUsuario}
              className="relative bg-white rounded-lg shadow p-4 flex flex-col items-center text-center cursor-pointer hover:shadow-lg transition-shadow"
              onClick={() => handleProfileClick(pessoa)}
            >
              <button
                onClick={(e) => {
                  e.stopPropagation();
                  removerPerfil(pessoa);
                }}
                className="absolute top-2 right-2 p-1 rounded-full bg-gray-100 hover:bg-red-100 transition"
                title="Remover da lista"
              >
                <Trash2 className="w-4 h-4 text-gray-600 hover:text-red-600" />
              </button>
              <div className="w-20 h-20 bg-gray-200 rounded-full mb-3"></div>
              <h2 className="font-semibold text-gray-600">{pessoa.nome}</h2>
              <p className="text-sm text-gray-600">{pessoa.area}</p>
              {/* <div className="flex flex-wrap gap-2 justify-center my-2">
                {pessoa.tags.map((tag, idx) => (
                  <span
                    key={idx}
                    className="px-2 py-1 text-xs rounded bg-gray-100 text-gray-600"
                  >
                    {tag}
                  </span>
                ))}
              </div> */}
              <button className="mt-auto w-full border border-[#990000] text-[#990000] py-1 rounded hover:bg-[#990000] hover:text-white transition"
              onClick={(e) => e.stopPropagation()}>
                Contato
              </button>
            </div>
          ))}
          {perfis.length === 0 && (
            <p className="text-gray-500 col-span-full">Nenhum perfil salvo nesta lista.</p>
          )}
        </div>
      </div>

      {/* Modal */}
      {showModal && (
        <div className="fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50">
          <div className="bg-white rounded-lg shadow-lg w-96">
            <div className="flex justify-between items-center border-b px-4 py-3">
              <h2 className="text-lg font-bold text-[#990000]">Editar lista</h2>
              <button onClick={() => setShowModal(false)}>
                <X className="w-5 h-5 text-gray-500 hover:text-black" />
              </button>
            </div>
            <div className="p-6">
              <label className="block text-sm font-medium mb-2">Nome lista</label>
              <input
                type="text"
                value={nomeLista}
                onChange={(e) => setNomeLista(e.target.value)}
                readOnly={isFavoritesList}
                className={`w-full border px-3 py-2 rounded mb-4 ${isFavoritesList ? 'bg-gray-100 cursor-not-allowed' : ''}`}
              />
              <button
                onClick={excluirLista}
                disabled={isFavoritesList}
                className={`w-full flex items-center justify-center gap-2 px-4 py-2 rounded transition mb-6 ${isFavoritesList 
                  ? 'bg-red-50 text-red-300 border border-red-100 cursor-not-allowed' 
                  : 'bg-red-100 text-red-600 border border-red-300 hover:bg-red-200'}`}
              >
                <Trash2 className="w-4 h-4" />
                Excluir Lista
              </button>
              <div className="flex justify-end gap-2">
                <button
                  onClick={() => setShowModal(false)}
                  className="px-4 py-2 rounded bg-gray-300 text-white hover:bg-gray-400"
                >
                  Cancelar
                </button>
                <button
                  onClick={handleSalvarNome}
                  disabled={isFavoritesList}
                  className={`px-4 py-2 rounded text-white ${isFavoritesList 
                    ? 'bg-gray-300 cursor-not-allowed' 
                    : 'bg-[#990000] hover:bg-red-800'}`}
                >
                  Gravar
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

### ARQUIVO: login\page.tsx ###
"use client";

import { useRouter } from "next/navigation";
import Image from "next/image";
import { useState } from "react";
import { jwtDecode } from "jwt-decode";
import { TokenPayload } from "../types/auth.types";

export default function Login() {
  const router = useRouter();

  const [email, setEmail] = useState("");
  const [senha, setSenha] = useState("");
  const [erro, setErro] = useState("");
  const [loading, setLoading] = useState(false);

  const validarEmail = (email: string) =>
    /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

  const handleLogoClick = () => {
    window.location.href = "http://localhost:3000";
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    if (!validarEmail(email)) {
      setErro("Digite um email v√°lido.");
      return;
    }
    if (!senha) {
      setErro("Senha √© obrigat√≥ria.");
      return;
    }

    setErro("");
    setLoading(true);

    try {
      const res = await fetch("http://localhost:8080/api/usuarios/login", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          login: email,
          password: senha,
        }),
      });

      if (res.ok) {
        const data = await res.json();
        localStorage.setItem("token", data.token);

        const tokenContent = jwtDecode<TokenPayload>(data.token);

        // Se a conta n√£o for verificada, mandamos para a tela de verifica√ß√£o
        if (tokenContent.conta_verificada == false) {
          localStorage.setItem("email", email);
          router.push("/aguardandoVerificacao");
        } else {
          switch (tokenContent.tipo_usuario) {
            // Se tiver cadastro de pesquisador n√£o conclu√≠do
            case "pesquisador_pendente":
              router.push("/cadastro-pesquisador");
              break;

            // Se tiver cadastro de empresa n√£o conclu√≠do
            case "empresa_pendente":
              router.push("/cadastro-empresa");
              break;

            // Se tiver cadastro conclu√≠do
            case "empresa":
            case "pesquisador":
              localStorage.setItem("tipo_usuario", tokenContent.tipo_usuario);
              // localStorage.setItem(
              //   "usuarioId",
              //   String(tokenContent.id_usuario)
              // );
              // console.log(tokenContent.id_usuario)
              router.push("/home");
              break;

            // Se n√£o estiver nada definido
            default:
              setErro("Conta indefinida. Contate o suporte.");
          }
        }
      } else {
        const errorData = await res.json();
        setErro(errorData.message || "Credenciais inv√°lidas");
      }
    } catch (error) {
      console.error("Erro no login:", error);
      setErro("Erro ao conectar com o servidor");
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="flex flex-col md:flex-row h-screen">
      {/* Lado esquerdo: imagem */}
      <div className="hidden md:flex w-1/3 bg-red-800 items-end justify-start overflow-visible relative">
        <div className="relative h-auto w-[120%] -right-[11.11%]">
          <Image
            src="/images/login.png"
            alt="Login"
            width={500}
            height={900}
            quality={100}
            priority
            className="object-contain drop-shadow-lg absolute bottom-0"
          />
        </div>
      </div>

      {/* Lado direito: formul√°rio */}
      <div className="flex-1 flex items-start justify-center bg-white dark:bg-gray-900 pt-12 px-4 md:px-0">
        <div className="w-full max-w-md">
          <Image
            src="/images/logo_1.png"
            alt="Logo"
            width={150}
            height={150}
            quality={100}
            priority
            className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer mx-auto"
            onClick={handleLogoClick}
          />

          <h2 className="text-xl font-semibold mb-8 mt-32 text-center md:text-left text-red-800 dark:text-red-600">
            Entrar
          </h2>

          {/* Formul√°rio */}
          <form onSubmit={handleSubmit} className="space-y-6">
            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Email*
              </label>
              <input
                type="email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                required
                className="form-input-login"
                placeholder="Digite seu email"
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Senha*
              </label>
              <input
                type="password"
                value={senha}
                onChange={(e) => setSenha(e.target.value)}
                required
                className="form-input-login"
                placeholder="Digite sua senha"
              />
            </div>

            {/* Link de esqueci minha senha */}
            <div className="text-right -mt-4">
              <a
                href="/esqueciSenha"
                className="text-sm text-red-700 dark:text-red-400 font-medium hover:text-red-900 dark:hover:text-red-300 transition-colors"
              >
                Esqueci minha senha
              </a>
            </div>

            {/* Caixa de erro acima do bot√£o */}
            {erro && (
              <div className="mt-2 mb-4 p-3 rounded-lg bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 text-red-700 dark:text-red-300 text-sm font-medium animate-fadeIn">
                {erro}
              </div>
            )}

            {/* Bot√£o de envio */}
            <button
              type="submit"
              disabled={loading}
              className="w-full bg-red-800 dark:bg-red-700 text-white p-3 rounded-xl hover:bg-red-900 dark:hover:bg-red-600 transition disabled:opacity-50 font-medium"
            >
              {loading ? "Entrando..." : "Entrar"}
            </button>
          </form>

          <p className="text-sm text-center mt-4 text-gray-700 dark:text-gray-300">
            Ainda n√£o possui uma conta?{" "}
            <a
              href="/criarConta"
              className="text-red-800 dark:text-red-400 font-medium hover:text-red-900 dark:hover:text-red-300 transition-colors"
            >
              Criar conta
            </a>
          </p>
        </div>
      </div>
    </div>
  );
}


### ARQUIVO: meu-perfil\page.tsx ###
'use client';
import { useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { LoadingSpinner } from '../components/LoadingSpinner';

export default function PerfilRedirect() {
  const tipoUsuario = localStorage.getItem("tipo_usuario")
  const idUsuario = localStorage.getItem("usuarioId")
  const router = useRouter();
  
  useEffect(() => {
    if (tipoUsuario === 'pesquisador') {
      router.replace(`/pesquisadores/${idUsuario}`);
    } else if (tipoUsuario === 'empresa') {
      router.replace(`/perfilEmpresa/${idUsuario}`);
    }
  }, [router]);
  
  return <main className="flex-1 flex items-center justify-center">
            <div className="flex flex-col items-center space-y-4">
              <LoadingSpinner></LoadingSpinner>
            </div>
          </main>;
}

### ARQUIVO: perfilEmpresa\[id]\CompanyProfile.tsx ###
"use client";

import React, { useState, useEffect } from "react";
import { useParams, useRouter } from "next/navigation";
import Link from "next/link";
import MenuLateral from "../../components/MenuLateral";
import NotFound from "@/app/not-found";
import { LoadingSpinner } from "@/app/components/LoadingSpinner";

interface Empresa {
  id: number;
  nomeComercial: string;
  frase: string;
  cidade: string;
  estado: string;
  site: string;
  setor: string;
  telefone: string;
  email: string;
  textoEmpresa: string;
}

export default function CompanyProfile() {
    const router = useRouter();
    const { id } = useParams(); 
    
    const [infoEmpresa, setInfoEmpresa] = useState<Empresa | null>(null);
    const [carregando, setCarregando] = useState(true);
    const [naoEncontrado, setNaoEncontrado] = useState(false);
    const [imagemUrl, setImagemUrl] = useState<string | null>(null); 
    const [loading, setLoading] = useState(false); 
    
    const [podeEditar, setPodeEditar] = useState(false);

    const buscarImagem = async (idEmpresa: number) => {
        const token = localStorage.getItem("token");
        try {
            const res = await fetch(`http://localhost:8080/api/empresas/${idEmpresa}/imagem`, {
                method: "GET",
                headers: { 
                    "Authorization": `Bearer ${token}` 
                }
            });

            if (res.ok) {
                const blob = await res.blob();
                if (blob.size > 0) {
                    const url = URL.createObjectURL(blob);
                    setImagemUrl(url);
                }
            }
        } catch (error) {
            console.error("Erro ao buscar imagem:", error);
        }
    };

    const buscarInfoEmpresa = async () => {
        const token = localStorage.getItem("token");
        
        if (!token) {
             return;
        }

        try {
            const res = await fetch(`http://localhost:8080/api/empresas/listarEmpresa/${id}`, {
                method: "GET",
                headers: { 
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${token}` 
                }
            });

            if (res.status === 404) {
                setCarregando(false)
                setNaoEncontrado(true);
                return;
            }

            if (res.ok) {
                const data = await res.json();
                console.log(data);
                setInfoEmpresa(data);
                setCarregando(false)

                if (data && data.id) {
                    buscarImagem(data.id);
                }

            } else {
                console.error("Erro ao buscar empresa");
            }
        } catch (error) {
            console.error("Erro ao buscar empresa:", error);
            setCarregando(false)
        }
    };

    useEffect(() => {
        if (id) {
            const idUsuarioLogado = localStorage.getItem("usuarioId");
            if (idUsuarioLogado && idUsuarioLogado === id) {
                setPodeEditar(true);
            } else {
                setPodeEditar(false);
            }

            buscarInfoEmpresa();
        }
    }, [id]);

    const handleEditar = () => {
        if(infoEmpresa){
            setLoading(true); 
            setTimeout(() => {
                router.push(`/edicaoEmpresa?id=${infoEmpresa.id}`);
            }, 1000); 
        }
    };

    if (carregando) {
          return (
            <div className="flex h-screen bg-gray-100">
              <MenuLateral />
              <main className="flex-1 flex items-center justify-center">
                <div className="flex flex-col items-center space-y-4">
                  <LoadingSpinner></LoadingSpinner>
                </div>
              </main>
            </div>
          );
      }

    if (naoEncontrado) {
        return <NotFound/>
    }

    return (
        <div className="flex h-screen bg-gray-100">
        <MenuLateral />

        <main className="flex-1 ml-20 overflow-y-auto">
            
            <section className="bg-gray-300 shadow-md p-6 pl-20 flex flex-col md:flex-row gap-6 relative">
            
            {/* √Årea da Imagem de Perfil */}
            <div className="bg-purple-500 rounded-xl flex items-center justify-center w-full md:w-80 h-80 md:h-80 shadow overflow-hidden">
                {imagemUrl ? (
                    <img 
                        src={imagemUrl} 
                        alt="Perfil da Empresa" 
                        className="w-full h-full object-cover" 
                    />
                ) : (
                    // Fallback: Mostra a inicial ou √≠cone se n√£o tiver foto
                    <span className="text-white text-6xl font-bold">
                        {infoEmpresa?.nomeComercial?.charAt(0).toUpperCase() || "E"}
                    </span>
                )}
            </div>

            <div className="flex-1 flex flex-col justify-between">
                <div>
                    {infoEmpresa && <h1 className="text-5xl font-bold text-gray-700 mb-2">{infoEmpresa.nomeComercial}</h1>}
                    {infoEmpresa && <h2 className="text-2xl text-gray-700">{infoEmpresa.frase}</h2>}

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 text-sm text-white">
                        <div>
                            <p><span className="font-bold text-gray-700">Sede</span></p>
                            {infoEmpresa && <p className="text-gray-700 mb-2">üìç{infoEmpresa.cidade}, {infoEmpresa.estado}</p>}
                            <p><span className="font-bold text-gray-700">Site</span></p>
                            {infoEmpresa && <p className="text-gray-700 mb-2">{infoEmpresa.site}</p>}
                            <p><span className="font-bold text-gray-700">Setor</span></p>
                            {infoEmpresa && <p className="text-gray-700">{infoEmpresa.setor}</p>}
                        </div>
                        <div>
                            <p><span className="font-bold text-gray-700">Telefone</span></p>
                            {infoEmpresa && <p className="text-gray-700 mb-2">{infoEmpresa.telefone}</p>}
                            <p><span className="font-bold text-gray-700">Email</span></p>
                            {infoEmpresa && <p className="text-gray-700">{infoEmpresa.email}</p>}
                        </div>
                    </div>
                </div>
                
                {podeEditar && (
                    <div className="mt-auto flex gap-3 pt-4 justify-center lg:justify-start">
                        <Link
                            href="/gerenciarListas"
                            className="bg-[#990000] text-white px-4 py-1 rounded hover:bg-red-800 transition flex items-center justify-center"
                        >
                            Gerenciar Listas
                        </Link>
                    </div>
                )}
                
            </div>

            {/* Bot√£o editar */}
            {podeEditar && (
                <button
                    className="absolute top-4 right-4 bg-white p-2 rounded-full shadow hover:bg-gray-100"
                    onClick={handleEditar}
                    disabled={loading}
                >
                    {loading ? "‚è≥" : "‚úèÔ∏è"}
                </button>
            )}

            <span className="absolute bottom-4 right-6 text-xs text-gray-700">
                √öltima atualiza√ß√£o h√° 7 horas
            </span>
            </section>

            <section className="bg-gray-100 p-12 pt-6">
            <h2 className="text-md font-semibold text-gray-600 mb-4">Sobre a Empresa</h2>

            <div className="bg-white rounded-xl text-gray-600 shadow-md p-6 space-y-4">
                {infoEmpresa && <p>
                {infoEmpresa.textoEmpresa}
                </p>}
                
            </div>
            </section>
        </main>
        
        {loading && (
            <div className="fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50">
            <div className="w-12 h-12 border-4 border-t-transparent border-white rounded-full animate-spin"></div>
            </div>
        )}
        </div>
    );
}

### ARQUIVO: perfilEmpresa\[id]\page.tsx ###
import { Suspense } from 'react';
import CompanyProfile from './CompanyProfile';
import { LoadingSpinner } from '@/app/components/LoadingSpinner';

export default function Empresa() {
  return (
    <div>
      <Suspense fallback={
        <main className="flex-1 flex items-center justify-center">
          <div className="flex flex-col items-center space-y-4">
            <LoadingSpinner></LoadingSpinner>
          </div>
        </main>
        }>
        <CompanyProfile />
      </Suspense>
    </div>
  );
}


### ARQUIVO: pesquisa\page.tsx ###
"use client";

import { useState, useEffect } from "react";
import { useSearchParams, useRouter } from "next/navigation";
import MenuLateral from "@/app/components/MenuLateral";
import { Search, User, Bookmark, Heart, X, ListPlus } from "lucide-react";

// --- 1. Define as Interfaces ---
interface Resultado {
  id: number;
  usuarioId: number;
  nome: string;
  tipo: "pesquisador" | "empresa";
  area: string;
  tags: string[];
}

// --- 2. Componente do Card de Resultado ---
const ResultadoCard = ({ resultado, onBookmarkClick }: { resultado: Resultado, onBookmarkClick: (usuarioId: number) => void }) => {
    const router = useRouter();

    const [isFavorite, setIsFavorite] = useState(false);

    const nomeParts = resultado.nome.split(' ');
    const primeiroNome = nomeParts[0];
    const restoDoNome = nomeParts.slice(1).join(' ');

    const handleClick = () => {
        const path = resultado.tipo === "pesquisador" 
            ? `/pesquisadores/${resultado.usuarioId}` 
            : `/perfilEmpresa/${resultado.usuarioId}`;
        router.push(path);
    };

    const handleFavorito = async (id) => {
        const token = localStorage.getItem("token");
        if(!token){ router.push("/login"); return; }

        //setIsFavorite(true);

        try{
            const response = await fetch(`http://localhost:8080/api/favoritos/salvarFavorito`, {
                method: "POST",
                headers: { "Content-Type": "application/json", Authorization: `Bearer ${token}` },
                body: JSON.stringify({ "pesquisadorId": id })
            });

            if (response.status === 409 || response.status === 401) {
                return;
            }
            if(!response.ok) throw new Error(`Erro status: ${response.status}`);
            console.log("Seguidor salvo");
            setIsFavorite(true);
        }catch(err){
            console.error("Erro ao seguir perfil:", err);
            setIsFavorite(false);
        }
    }

    return (
        <div className="bg-white rounded-xl shadow-lg p-4 flex flex-col items-center relative hover:shadow-lg transition-shadow">
            <div className="absolute top-3 right-3 flex gap-2">
                <button className="p-1 rounded-full bg-gray-100 hover:bg-blue-100 transition-colors cursor-pointer">
                    <Bookmark className="w-5 h-5 text-gray-500 hover:text-blue-600" onClick={() => onBookmarkClick(resultado.usuarioId)} />
                </button>
                {resultado.tipo === "pesquisador" && (
                    <button className="p-1 rounded-full bg-gray-100 hover:bg-red-100 transition-colors cursor-pointer"
                    onClick={() => handleFavorito(resultado.id)}>
                        <Heart 
                            className={`w-5 h-5 transition-all duration-300 ease-in-out ${
                                isFavorite 
                                    ? "text-red-600 fill-red-600 scale-110" // Se favorito: Vermelho, Preenchido e Maior
                                    : "text-gray-500 hover:text-red-600 group-active:scale-90" // Se n√£o: Cinza
                            }`} 
                        />
                    </button>
                )}
            </div>

            <div onClick={handleClick} className="w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center mb-3 cursor-pointer overflow-hidden">
                 {/* Pode adicionar l√≥gica de imagem aqui depois se a busca retornar foto */}
                <User size={40} className="text-gray-400" />
            </div>

            <h3 onClick={handleClick} className="font-semibold text-gray-800 cursor-pointer">{primeiroNome}</h3>
            <p onClick={handleClick} className="text-gray-500 text-sm mb-4 cursor-pointer">{restoDoNome}</p>
            <div className="bg-gray-200 w-full h-0.5 my-1"></div>
            <button onClick={handleClick} className="text-[#990000] font-semibold hover:underline transition-colors cursor-pointer mt-3">
                Contato
            </button>
        </div>
    );
};


// --- 3. Componente Principal da P√°gina ---
export default function PaginaDeBusca() {
    const router = useRouter();
    const searchParams = useSearchParams();
    const query = searchParams.get("q");

    const [resultados, setResultados] = useState<Resultado[]>([]);
    const [carregandoResultados, setCarregandoResultados] = useState(true);
    
    // Estados para o cabe√ßalho (Usu√°rio Logado)
    const [termoBusca, setTermoBusca] = useState(query || "");
    const [nome, setNome] = useState(null);
    const [imagemPerfil, setImagemPerfil] = useState("/images/user.png"); // NOVO
    const [currentUserId, setCurrentUserId] = useState<number | null>(null); // NOVO
    const [currentUserType, setCurrentUserType] = useState(""); // NOVO

    const [filtroAtivo, setFiltroAtivo] = useState<'todos' | 'pesquisador' | 'empresa'>('todos');
    const [currentPage, setCurrentPage] = useState(1);
    const itemsPerPage = 8;

    const [modalOpen, setModalOpen] = useState(false);
    const [loadingModal, setLoadingModal] = useState(false);
    const [selectedProfileId, setSelectedProfileId] = useState<number | null>(null);
    const [minhasListas, setMinhasListas] = useState([]);
    const [novoNomeLista, setNovoNomeLista] = useState("");

    // --- Fun√ß√£o de Navega√ß√£o para o Perfil Pr√≥prio ---
    const handleNavegarParaPerfil = () => {
        if (!currentUserId) return;

        if (currentUserType === "pesquisador") {
            router.push(`/pesquisadores/${currentUserId}`);
        } else {
            router.push(`/perfilEmpresa/${currentUserId}`);
        }
    };

    useEffect(() => {
        const handleBuscarUsuario = async () =>{
            const token = localStorage.getItem("token");
            const email = localStorage.getItem("email");

            if (!token || !email) {
                router.push("/login"); 
                return;
            }

            const headers = {
                "Content-Type": "application/json",
                "Authorization": `Bearer ${token}`
            };

            try {
                // 1. Busca usu√°rio base
                const response = await fetch(`http://localhost:8080/api/usuarios/listarUsuario/${email}`, { headers });
                if (!response.ok) throw new Error("Falha ao buscar usu√°rio");
                const dadosUsuario = await response.json();

                // Configura dados b√°sicos para navega√ß√£o
                setCurrentUserId(dadosUsuario.id);
                const tipo = dadosUsuario.tipoUsuario.name.toLowerCase();
                setCurrentUserType(tipo);

                // 2. Busca dados detalhados e imagem
                if(dadosUsuario.tipoUsuario.name === "PESQUISADOR"){
                    const respPesq = await fetch(`http://localhost:8080/api/dadosPesquisador/${dadosUsuario.id}`, { headers });
                    if (respPesq.ok) {
                        const dadosPesquisador = await respPesq.json();
                        setNome(dadosPesquisador.pesquisador.nomePesquisador);

                        // Busca Imagem Pesquisador
                        try {
                            const imgRes = await fetch(`http://localhost:8080/api/pesquisadores/${dadosPesquisador.pesquisador.id}/imagem`, { 
                                headers: { Authorization: `Bearer ${token}` } 
                            });
                            if(imgRes.ok) {
                                const blob = await imgRes.blob();
                                if(blob.size > 0) setImagemPerfil(URL.createObjectURL(blob));
                            }
                        } catch (e) { console.log("Erro imagem pesq", e); }
                    }
                } else {
                    const respEmp = await fetch(`http://localhost:8080/api/empresas/listarEmpresa/${dadosUsuario.id}`, { headers });
                    if (respEmp.ok) {
                        const dadosEmpresa = await respEmp.json();
                        setNome(dadosEmpresa.nomeRegistro);

                        // Busca Imagem Empresa (se tiver ID da empresa)
                        if(dadosEmpresa.id) {
                            try {
                                const imgRes = await fetch(`http://localhost:8080/api/empresas/${dadosEmpresa.id}/imagem`, { 
                                    headers: { Authorization: `Bearer ${token}` } 
                                });
                                if(imgRes.ok) {
                                    const blob = await imgRes.blob();
                                    if(blob.size > 0) setImagemPerfil(URL.createObjectURL(blob));
                                }
                            } catch (e) { console.log("Erro imagem emp", e); }
                        }
                    }
                }
            } catch(err) {
                console.error("Erro ao buscar perfil do usu√°rio:", err);
            }
        };

        handleBuscarUsuario();
    }, [router]);

    // ... Restante dos useEffects de busca (sem altera√ß√£o) ...
    useEffect(() => {
        if (!query) { setCarregandoResultados(false); return; }
        const token = localStorage.getItem("token");
        if (!token) { router.push("/login"); return; }

        const fetchResultados = async () => {
            setCarregandoResultados(true);
            try {
                const response = await fetch("http://localhost:8080/api/pesquisa/buscar", {
                    method: "POST",
                    headers: { "Content-Type": "application/json", "Authorization": `Bearer ${token}` },
                    body: JSON.stringify({ termo: query, tipo: "todos" }),
                });
                if (response.ok) {
                    const dados = await response.json();
                    setResultados(dados);
                }
            } catch (error) { console.error("Erro ao buscar:", error); } finally { setCarregandoResultados(false); }
        };
        fetchResultados();
    }, [query, router]);

    const handleFilterChange = (filtro: "todos" | "pesquisador" | "empresa") => { setFiltroAtivo(filtro); setCurrentPage(1); }
    const handleBookmarkClick = async (usuarioId: number) => {
        setSelectedProfileId(usuarioId); setLoadingModal(true); setModalOpen(true); setNovoNomeLista("");
        const token = localStorage.getItem("token");
        if (!token) return;
        try {
            const res = await fetch("http://localhost:8080/api/listas/listarListas", { headers: { "Authorization": `Bearer ${token}` } });
            if (res.ok) setMinhasListas(await res.json());
        } catch (err) { console.error(err); } finally { setLoadingModal(false); }
    };
    const handleAddToList = async (listaId: number) => {
        const token = localStorage.getItem("token");
        try {
            const res = await fetch(
                `http://localhost:8080/api/listas/salvarLista/${listaId}/perfil/${selectedProfileId}`, 
                {
                    method: "POST",
                    headers: { "Authorization": `Bearer ${token}` }
                }
            );
            if (res.ok) {
                alert("Perfil salvo na lista!");
                setModalOpen(false);
            } else if (res.status === 409) {
                alert("Este perfil j√° est√° salvo nesta lista.");
            } else {
                throw new Error("Falha ao adicionar perfil");
            }
        } catch (err) {
            console.error(err);
            alert("Erro ao salvar perfil.");
        }
    };
    const handleCreateAndAddToList = async () => {
        if (!novoNomeLista.trim()) return;
        
        const token = localStorage.getItem("token");
        try {
            // 1. Cria a nova lista
            const resCreate = await fetch("http://localhost:8080/api/listas/salvarLista", {
                method: "POST",
                headers: { "Content-Type": "application/json", "Authorization": `Bearer ${token}` },
                body: JSON.stringify({ nomeLista: novoNomeLista })
            });
            if (!resCreate.ok) throw new Error("Falha ao criar lista");
            
            const novaLista = await resCreate.json(); // { id, nomeLista, ... }
            
            // 2. Adiciona o perfil √† lista rec√©m-criada
            await handleAddToList(novaLista.id);
            
            setNovoNomeLista(""); // Limpa o input
        } catch (err) {
            console.error(err);
            alert("Erro ao criar nova lista.");
        }
    };

    const handleNovaBusca = () => { if (termoBusca.trim()) router.push(`/pesquisa?q=${encodeURIComponent(termoBusca.trim())}`); };
    const handleKeyPress = (e) => { if (e.key === "Enter") handleNovaBusca(); };

    const resultadosFiltrados = resultados.filter(resultado => {
       if (filtroAtivo === 'todos') return true;
       return resultado.tipo === filtroAtivo;
    });

    const totalPages = Math.ceil(resultadosFiltrados.length / itemsPerPage);
    const indexOfLastItem = currentPage * itemsPerPage;
    const indexOfFirstItem = indexOfLastItem - itemsPerPage;
    const currentItems = resultadosFiltrados.slice(indexOfFirstItem, indexOfLastItem);
    const nextPage = () => { if(currentPage < totalPages) setCurrentPage(prev => prev + 1); };
    const prevPage = () => { if(currentPage > 1) setCurrentPage(prev => prev - 1); }

    return (
        <div className="flex h-screen bg-gray-100">
            <MenuLateral />

            <main className="flex-1 ml-20 p-8 overflow-y-auto">

                <header className="flex justify-between items-center mb-6">
                    <div className="relative w-1/2">
                        <div className="flex items-center bg-white px-3 py-2 rounded-lg shadow-md w-full">
                            <Search className="text-gray-500 mr-2" />
                            <input
                                type="text"
                                placeholder="Buscar por recrutador, pesquisa, tags..."
                                value={termoBusca}
                                onChange={(e) => setTermoBusca(e.target.value)}
                                onKeyPress={handleKeyPress}
                                className="flex-1 text-gray-600 outline-none cursor-text"
                            />
                            {termoBusca && (
                                <button type="button" onClick={() => setTermoBusca("")} className="text-gray-500 hover:text-gray-700 ml-2 cursor-pointer"><X size={16} /></button>
                            )}
                            <button type="button" onClick={handleNovaBusca} className="ml-2 bg-[#990000] text-white px-4 py-1 rounded-md hover:bg-red-700">
                                Buscar
                            </button>
                        </div>
                    </div>

                    {/* Bot√£o de Perfil Atualizado */}
                    <div className="flex items-center gap-4">
                        <div className="flex items-center bg-white px-3 py-2 rounded-lg shadow-md">
                            <img
                                src={imagemPerfil}
                                alt="user"
                                className="w-8 h-8 rounded-full mr-2 cursor-pointer object-cover"
                                onClick={handleNavegarParaPerfil} // <--- A√á√ÉO CORRIGIDA
                            />
                            <span className="mr-2 text-gray-600 cursor-default">{nome || "Carregando..."}</span>
                            <button
                                className="bg-[#990000] text-white px-3 py-1 rounded-md shadow-md hover:bg-red-700 cursor-pointer transition-colors"
                                onClick={handleNavegarParaPerfil} // <--- A√á√ÉO CORRIGIDA
                            >
                                Ver Perfil
                            </button>
                        </div>
                    </div>
                </header>

                <div className="mb-6">
                    <h1 className="text-2xl font-bold text-gray-900">Resultados da busca para "{query}"</h1>
                </div>

                <div className="flex border-b border-gray-300 mb-6">
                    <button onClick={() => handleFilterChange('todos')} className={filtroAtivo === 'todos' ? "py-2 px-4 text-red-700 border-b-2 border-red-700 font-semibold" : "py-2 px-4 text-gray-500 hover:text-gray-800"}>Todos</button>
                    <button onClick={() => handleFilterChange('empresa')} className={filtroAtivo === 'empresa' ? "py-2 px-4 text-red-700 border-b-2 border-red-700 font-semibold" : "py-2 px-4 text-gray-500 hover:text-gray-800"}>Empresas</button>
                    <button onClick={() => handleFilterChange('pesquisador')} className={filtroAtivo === 'pesquisador' ? "py-2 px-4 text-red-700 border-b-2 border-red-700 font-semibold" : "py-2 px-4 text-gray-500 hover:text-gray-800"}>Pesquisadores</button>
                </div>

                <div className="max-w-full">
                    {carregandoResultados && <p>Carregando...</p>}
                    {!carregandoResultados && resultadosFiltrados.length === 0 && <p className="text-gray-500 text-sm mb-1">Nenhum resultado encontrado para este filtro.</p>}
                    {!carregandoResultados && resultadosFiltrados.length > 0 && (
                        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                            {currentItems.map(resultado => (
                                <ResultadoCard key={`${resultado.tipo}-${resultado.id}`} resultado={resultado} onBookmarkClick={(usuarioId) => handleBookmarkClick(usuarioId)} />
                            ))}
                        </div>
                    )}
                </div>

                {!carregandoResultados && totalPages > 1 && (
                    <div className="flex justify-center items-center gap-4 mt-8">
                        <button onClick={prevPage} disabled={currentPage === 1} className="px-4 py-2 bg-white rounded-md shadow disabled:opacity-50">Anterior</button>
                        <span className="text-gray-700">P√°gina {currentPage} de {totalPages}</span>
                        <button onClick={nextPage} disabled={currentPage === totalPages} className="px-4 py-2 bg-white rounded-md shadow disabled:opacity-50">Pr√≥xima</button>
                    </div>
                )}
            </main>

            {/* Modal (mantido igual) */}
            {modalOpen && (
                <div className="fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50">
                    <div className="bg-white p-6 rounded-lg shadow-lg w-96">
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="text-lg font-bold text-[#990000]">Salvar em...</h2>
                            <button onClick={() => setModalOpen(false)}><X className="w-5 h-5 text-gray-500" /></button>
                        </div>
                        {loadingModal ? <p>Carregando listas...</p> : (
                            <>
                                <div className="flex flex-col gap-2 text-gray-600 max-h-40 overflow-y-auto mb-4">
                                    {minhasListas.map((lista) => (
                                        <button key={lista.id} onClick={() => handleAddToList(lista.id)} className="w-full text-left p-2 rounded hover:bg-gray-100">{lista.nomeLista}</button>
                                    ))}
                                    {minhasListas.length === 0 && <p className="text-sm text-gray-500">Nenhuma lista customizada encontrada.</p>}
                                </div>
                                <div className="border-t pt-4 flex gap-2">
                                    <input type="text" placeholder="Criar nova lista..." value={novoNomeLista} onChange={(e) => setNovoNomeLista(e.target.value)} className="flex-1 w-full border text-gray-600 px-3 py-2 rounded" />
                                    <button onClick={handleCreateAndAddToList} className="p-2 rounded bg-[#990000] text-white"><ListPlus size={20} /></button>
                                </div>
                            </>
                        )}
                    </div>
                </div>
            )}
        </div>
    );
}

### ARQUIVO: pesquisadores\[id]\page.tsx ###
import { Suspense } from 'react';
import ProfileScreen from './ProfileScreen';
import { LoadingSpinner } from '@/app/components/LoadingSpinner';

export default function TelaPerfil() {
  return (
    <div>
      <Suspense fallback={
        <main className="flex-1 flex items-center justify-center">
          <div className="flex flex-col items-center space-y-4">
            <LoadingSpinner></LoadingSpinner>
          </div>
        </main>
      }>
        <ProfileScreen/>
      </Suspense>
    </div>
  );
}


### ARQUIVO: pesquisadores\[id]\ProfileScreen.tsx ###
"use client";

import { useSearchParams, useRouter, useParams } from "next/navigation";
import {
  Home,
  User,
  Settings,
  LogOut,
  LayoutDashboard,
  Target,
  Pencil,
} from "lucide-react";
import Link from "next/link";
import Image from "next/image";
import { useEffect, useState } from "react";
import { CardLista } from "@/app/components/CardLista";
import MenuLateral from "@/app/components/MenuLateral";
import {
  formatarDataHora,
  obterAnoOuPadrao,
  obterNumeroOuPadrao,
  obterValorOuPadrao,
} from "@/app/utils/formatadores";
import { CardLinhaDoTempo } from "@/app/components/CardLinhaTempo";
import { HeaderPesquisador } from "@/app/components/HeaderPesquisador";
import { DadosPesquisador } from "@/app/types/pesquisador.types";
import { LoadingSpinner } from "@/app/components/LoadingSpinner";
import { CardContato } from "@/app/components/CardContato";
import NotFound from "@/app/not-found";

''

export default function ProfileScreen() {
  const [carregando, setCarregando] = useState(true);
  const [naoEncontrado, setNaoEncontrado] = useState(false);
  const [erro, setErro] = useState<string | null>(null);

  const router = useRouter();
  const { id } = useParams();

  const [dadosPesquisador, setDadosPesquisador] =
    useState<DadosPesquisador | null>(null);
  const [podeEditar, setPodeEditar] = useState(false);
  const [aberto, setAberto] = useState(false);

  useEffect(() => {
    const idUsuarioLogado = localStorage.getItem("usuarioId");
    const tipoUsuarioLogado = localStorage.getItem("tipo_usuario");
    const editor =
      id === idUsuarioLogado && tipoUsuarioLogado === "pesquisador";

    setPodeEditar(editor);

    const buscarDados = async () => {
      const token = localStorage.getItem("token");

      if (!token) {
        router.push("/login");
        return;
      }

      try {
        const res = await fetch(
          `http://localhost:8080/api/dadosPesquisador/${id}`,
          {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
          }
        );

        if (res.status === 404) {
          setNaoEncontrado(true);
          setCarregando(false);
          return;
        }

        if (!res.ok) {
          throw new Error("Falha ao buscar dados do pesquisador");
        }

        const data = await res.json();
        console.log(data);
        setDadosPesquisador(data);
      } catch (err) {
        console.error("Erro ao buscar perfil:", err);
        setErro("Erro ao carregar perfil");
      } finally {
        setCarregando(false);
      }
    };

    buscarDados();
  }, [id]);

  if (naoEncontrado) {
    return <NotFound/>
  }

  if (carregando) {
      return (
        <div className="flex h-screen bg-gray-100">
          <MenuLateral />
          <main className="flex-1 flex items-center justify-center">
            <div className="flex flex-col items-center space-y-4">
              <LoadingSpinner></LoadingSpinner>
            </div>
          </main>
        </div>
      );
  }


  // Erro
  if (erro || !dadosPesquisador) {
    return (
      <div className="flex h-screen items-center justify-center">
        <p className="text-xl text-red-600">
          {erro || "Perfil n√£o encontrado"}
        </p>
      </div>
    );
  }

  return (
    <div className="flex h-screen bg-gray-100">
      {/* Menu Lateral */}
      <MenuLateral />

      {/* Conte√∫do da Tela */}
      <main className="flex-1 flex flex-col ml-20 bg-[#ECECEC]">
        {/* Topo Vermelho */}
        <HeaderPesquisador
          nomePesquisador={obterValorOuPadrao(
            dadosPesquisador.pesquisador.nomePesquisador
          )}
          sobrenome={obterValorOuPadrao(dadosPesquisador.pesquisador.sobrenome)}
          ocupacao={dadosPesquisador.pesquisador.ocupacao}
          imagemPerfil={dadosPesquisador.pesquisador.imagemPerfil}
          tags={dadosPesquisador.tags?.listaTags ?? []}
          dataAtualizacao={formatarDataHora(
            dadosPesquisador.pesquisador.dataAtualizacao,
            dadosPesquisador.pesquisador.horaAtualizacao
          )}
          horaAtualizacao=""
          podeEditar={podeEditar}
          idPesquisador={dadosPesquisador.pesquisador.id}
          pais={dadosPesquisador.endereco?.pais}
          cidade={dadosPesquisador.endereco?.cidade}
          nacionalidade={dadosPesquisador.pesquisador.nacionalidade}
          usuarioId={dadosPesquisador.pesquisador.usuario.id}
          onClickContato={() => setAberto(true)}
        />

        {/* Se√ß√£o de Conte√∫do */}
        <div className="p-8 bg-[#ECECEC] overflow-y-auto">
          {/* Primeira Linha - Linha do tempo e Forma√ß√£o Acad√™mica */}
          <div className="flex gap-6 mb-6">
            {/* Card 1 - Linha do tempo */}
            <CardLinhaDoTempo
              items={(dadosPesquisador.linhaDoTempo ?? []).map((item) => ({
                id: item.id,
                ano: item.ano,
                titulo: obterValorOuPadrao(item.titulo),
                tipo: item.tipo
              }))}
              podeEditar={podeEditar}
              onClickAdicionar={() => console.log("Adicionar destaque")}
            />

            {/* Card 2 - Forma√ß√£o Acad√™mica */}
            <CardLista
              titulo="Forma√ß√£o Acad√™mica"
              items={(dadosPesquisador?.formacoesAcademicas ?? []).map(
                (formacao) => ({
                  id: formacao.id,
                  titulo: `${obterValorOuPadrao(
                    formacao.nivel
                  )} ‚Äî ${obterValorOuPadrao(formacao.curso)}`,
                  subtitulo: `${obterValorOuPadrao(
                    formacao.instituicao
                  )} (${obterAnoOuPadrao(
                    formacao.anoInicio
                  )} - ${obterAnoOuPadrao(formacao.anoConclusao)})`,
                  detalhes: {
                    "Status": obterValorOuPadrao(formacao.status),
                    "T√≠tulo do Trabalho": obterValorOuPadrao(formacao.tituloTrabalho),
                    "Orientador": obterValorOuPadrao(formacao.orientador),
                    "Ano de In√≠cio": obterAnoOuPadrao(formacao.anoInicio),
                    "Ano de Conclus√£o": obterAnoOuPadrao(formacao.anoConclusao),
                  },
                  destaque: formacao.destaque
                })
              )}
              podeEditar={podeEditar}
              tabName="Forma√ß√µes Acad√™micas"
            />
          </div>

          <div className="flex gap-6 mb-6">
            {/* Card 3 - Atua√ß√£o Profissional */}
            <CardLista
              titulo="Atua√ß√£o Profissional"
              items={(dadosPesquisador?.atuacoesProfissionais ?? []).map(
                (atuacao) => ({
                  id: atuacao.id,
                  titulo: obterValorOuPadrao(atuacao.cargo),
                  subtitulo: `${obterValorOuPadrao(
                    atuacao.instituicao
                  )} (${obterAnoOuPadrao(
                    atuacao.anoInicio
                  )} - ${obterAnoOuPadrao(atuacao.anoFim)})`,
                  detalhes: {
                    "Institui√ß√£o": obterValorOuPadrao(atuacao.instituicao),
                    "Ano de In√≠cio": obterAnoOuPadrao(atuacao.anoInicio),
                    "Ano de T√©rmino": obterAnoOuPadrao(atuacao.anoFim),
                  },
                  destaque: atuacao.destaque
                })
              )}
              podeEditar={podeEditar}
              tabName="Atua√ß√µes Profissionais"
            />

            {/* Card 4 - Artigos Publicados */}
            <CardLista
              titulo="Artigos Publicados"
              items={(dadosPesquisador?.artigos ?? []).map((artigo) => ({
                id: artigo.id,
                titulo: obterValorOuPadrao(artigo.titulo),
                subtitulo: `Peri√≥dico: ${obterValorOuPadrao(
                  artigo.periodico
                )} (${obterNumeroOuPadrao(artigo.ano)})`,
                detalhes: {
                  "Ano": obterNumeroOuPadrao(artigo.ano),
                  "DOI": obterValorOuPadrao(artigo.doi),
                  "Idioma": obterValorOuPadrao(artigo.idioma),
                  "Autores": obterValorOuPadrao(artigo.autores)
                },
                destaque: artigo.destaque
              }))}
              podeEditar={podeEditar}
              tabName="Artigos"
            />
          </div>

          <div className="flex gap-6 mb-6">
            {/* Card 5 - Livros Publicados */}
            <CardLista
              titulo="Livros Publicados"
              items={(dadosPesquisador?.livros ?? []).map((livro) => ({
                id: livro.id,
                titulo: obterValorOuPadrao(livro.titulo),
                subtitulo: `Editora: ${obterValorOuPadrao(
                  livro.editora
                )} (${obterNumeroOuPadrao(livro.ano)})`,
                detalhes: {
                  "Ano": obterNumeroOuPadrao(livro.ano),
                  "ISBN": obterValorOuPadrao(livro.isbn),
                  "Idioma": obterValorOuPadrao(livro.idioma),
                  "N√∫mero de P√°ginas": obterNumeroOuPadrao(livro.numeroPaginas),
                  "Autores": obterValorOuPadrao(livro.autores)
                },
                destaque:livro.destaque
              }))}
              podeEditar={podeEditar}
              tabName="Livros"
            />

            {/* Card 6 - Cap√≠tulos Publicados */}
            <CardLista
              titulo="Cap√≠tulos Publicados"
              items={(dadosPesquisador?.capitulos ?? []).map((capitulo) => ({
                id: capitulo.id,
                titulo: obterValorOuPadrao(capitulo.tituloCapitulo),
                subtitulo: `Livro: ${obterValorOuPadrao(
                  capitulo.nomeLivro
                )} (${obterNumeroOuPadrao(capitulo.ano)})`,
                detalhes: {
                  "Nome do Livro": obterValorOuPadrao(capitulo.nomeLivro),
                  "Ano": obterNumeroOuPadrao(capitulo.ano),
                  "P√°gina Inicial": obterNumeroOuPadrao(capitulo.paginaInicial),
                  "P√°gina Final": obterNumeroOuPadrao(capitulo.paginaFinal),
                  "DOI do Livro": obterValorOuPadrao(capitulo.doi),
                },
                destaque: capitulo.destaque
              }))}
              podeEditar={podeEditar}
              tabName="Cap√≠tulos"
            />
          </div>

          <div className="flex gap-6 mb-6">
            {/* Card 7 - Trabalhos em Eventos */}
            <CardLista
              titulo="Trabalhos em Eventos"
              items={(dadosPesquisador?.trabalhosEvento ?? []).map(
                (evento) => ({
                  id: evento.id,
                  titulo: obterValorOuPadrao(evento.titulo),
                  subtitulo: `${obterValorOuPadrao(
                    evento.nomeEvento
                  )} (${obterNumeroOuPadrao(evento.ano)})`,
                  detalhes: {
                    "Nome do Evento": obterValorOuPadrao(evento.nomeEvento),
                    "Classifica√ß√£o": obterValorOuPadrao(evento.classificacaoEvento),
                    "Cidade": obterValorOuPadrao(evento.cidadeEvento),
                    "Ano": obterNumeroOuPadrao(evento.ano),
                  },
                  destaque: evento.destaque
                })
              )}
              podeEditar={podeEditar}
              tabName="Trabalho em Eventos"
            />

            {/* Card 8 - Projetos de Pesquisa */}
            <CardLista
              titulo="Projetos de Pesquisa"
              items={(dadosPesquisador?.projetosPesquisa ?? []).map(
                (projeto) => ({
                  id: projeto.id,
                  titulo: obterValorOuPadrao(projeto.titulo),
                  subtitulo: `${obterValorOuPadrao(
                    projeto.instituicao
                  )} (${obterNumeroOuPadrao(projeto.ano)})`,
                  detalhes: {
                    "Institui√ß√£o": obterValorOuPadrao(projeto.instituicao),
                    "Ano": obterNumeroOuPadrao(projeto.ano),
                    "Financiador": obterValorOuPadrao(projeto.financiador),
                  },
                  destaque: projeto.destaque
                })
              )}
              podeEditar={podeEditar}
              tabName="Projetos de Pesquisa"
            />
          </div>

          <div className="flex gap-6 mb-6">
            {/* Card 9 - Premia√ß√µes */}
            <CardLista
              titulo="Premia√ß√µes"
              items={(dadosPesquisador?.premiacoes ?? []).map((premiacao) => ({
                id: premiacao.id,
                titulo: obterValorOuPadrao(premiacao.titulo),
                subtitulo: `${obterValorOuPadrao(
                  premiacao.instituicao
                )} (${obterNumeroOuPadrao(premiacao.ano)})`,
                detalhes: {
                  "Institui√ß√£o": obterValorOuPadrao(premiacao.instituicao),
                  "Ano": obterNumeroOuPadrao(premiacao.ano),
                },
                destaque: premiacao.destaque
              }))}
              podeEditar={podeEditar}
              tabName="Premia√ß√µes"
            />

            {/* Card 10 - Orienta√ß√µes */}
            <CardLista
              titulo="Orienta√ß√µes"
              items={(dadosPesquisador?.orientacoes ?? []).map(
                (orientacao) => ({
                  id: orientacao.id,
                  titulo: obterValorOuPadrao(orientacao.tituloTrabalho),
                  subtitulo: `${obterValorOuPadrao(
                    orientacao.tipo
                  )} (${obterNumeroOuPadrao(orientacao.ano)})`,
                  detalhes: {
                    "Nome do Orientado": obterValorOuPadrao(orientacao.nomeOrientado),
                    "Tipo": obterValorOuPadrao(orientacao.tipo),
                    "Curso": obterValorOuPadrao(orientacao.nomeCurso),
                    "Institui√ß√£o": obterValorOuPadrao(orientacao.instituicao),
                    "Ano": obterNumeroOuPadrao(orientacao.ano),
                  },
                  destaque: orientacao.destaque
                })
              )}
              podeEditar={podeEditar}
              tabName="Orienta√ß√µes"
            />
          </div>
        </div>

        {/* Modal Contato */}
        <CardContato
          idPesquisador={dadosPesquisador.pesquisador.id}
          aberto={aberto}
          podeEditar={podeEditar}
          onClose={() => setAberto(false)}
          exibirContato={dadosPesquisador.pesquisador.exibirContato}
          email={dadosPesquisador.endereco?.email || ""}
          cidade={dadosPesquisador.endereco?.cidade || ""}
          telefone={dadosPesquisador.endereco?.telefone || ""}
          pais={dadosPesquisador.endereco?.pais || ""}
        />
      </main>
    </div>
  );
}

### ARQUIVO: redefinirSenha\page.tsx ###
import { Suspense } from 'react';
import ResetPassword from './ResetPassword';

export default function Home() {
  return (
      <div>
        <Suspense fallback={<p>Carregando...</p>}>
          <ResetPassword />
        </Suspense>
      </div>
    );
}


### ARQUIVO: redefinirSenha\ResetPassword.tsx ###
"use client";

import Image from "next/image";
import { useState, useEffect } from "react";
import { useSearchParams, useRouter } from "next/navigation";

export default function NovaSenha() {
  const router = useRouter();
  const searchParams = useSearchParams();
  const [codigo, setCodigo] = useState("");
  const [senha, setSenha] = useState("");
  const [confirmarSenha, setConfirmarSenha] = useState("");
  const [erro, setErro] = useState("");
  const [loading, setLoading] = useState(false);
  const [sucesso, setSucesso] = useState("");
  const [verificandoCodigo, setVerificandoCodigo] = useState(true);

  useEffect(() => {
    const codigoParam = searchParams.get("codigo");

    if (!codigoParam) {
      router.replace("/esqueciSenha");
      return;
    }

    const validarCodigo = async () => {
      try {
        const res = await fetch(`http://localhost:8080/api/redefinicao/validar?codigo=${codigoParam}`, {
            method: "POST",
            headers: { "Content-Type": "application/json" }
        });
        const data = await res.json();

        if (data ==true) {
          setCodigo(codigoParam);
        } else {
          router.replace("/esqueciSenha");
        }
      } catch (error) {
        console.error("Erro ao validar c√≥digo:", error);
        router.replace("/esqueciSenha");
      } finally {
        // Delay de 300ms para evitar o ‚Äúflash‚Äù visual
        setTimeout(() => setVerificandoCodigo(false), 300);
      }
    };

    validarCodigo();
  }, [searchParams, router]);

  const validarSenha = (senha: string) => {
    if (senha.length < 6) {
      return "A senha deve ter no m√≠nimo 6 caracteres.";
    }
    return "";
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    const erroSenha = validarSenha(senha);
    if (erroSenha) {
      setErro(erroSenha);
      return;
    }

    if (senha !== confirmarSenha) {
      setErro("As senhas n√£o coincidem.");
      return;
    }

    if (!codigo) {
      setErro("C√≥digo de redefini√ß√£o inv√°lido.");
      return;
    }

    setErro("");
    setSucesso("");
    setLoading(true);

    try {
      const res = await fetch("http://localhost:8080/api/redefinicao/alterar", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          codigo: codigo,
          senha: senha,
        }),
      });

      if (res.ok) {
        setSucesso("Senha redefinida com sucesso! Voc√™ ser√° redirecionado para o login...");
        setSenha("");
        setConfirmarSenha("");

        setTimeout(() => {
          window.location.href = "/login";
        }, 2000);
      } else {
        const data = await res.json();
        setErro(data.message || "Erro ao redefinir a senha. O c√≥digo pode estar expirado.");
      }
    } catch (error) {
      console.error("Erro:", error);
      setErro("Erro ao conectar com o servidor.");
    } finally {
      setLoading(false);
    }
  };

  if (verificandoCodigo) {
    return (
      <div className="flex flex-col items-center justify-center h-screen bg-white text-red-800 animate-fadeIn">
        {/* Spinner animado */}
        <div className="w-10 h-10 border-4 border-red-300 border-t-red-800 rounded-full animate-spin mb-4"></div>
      </div>
    );
  }

  return (
    <div className="flex flex-col md:flex-row h-screen animate-fadeIn">
      {/* Lado esquerdo: decora√ß√µes */}
      <div className="hidden md:flex w-1/3 bg-red-800 items-center justify-center relative overflow-hidden"></div>

      {/* Lado direito: formul√°rio */}
      <div className="flex-1 flex items-start justify-center bg-white pt-12 px-4 md:px-0 transition-opacity duration-500">
        <div className="w-full max-w-md">
          <Image
            src="/images/logo_1.png"
            alt="Logo"
            width={150}
            height={150}
            quality={100}
            priority
            className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer mx-auto"
          />

          <h2 className="text-xl font-semibold mb-4 mt-32 text-center md:text-left text-red-800">
            Criar Nova Senha
          </h2>

          <p className="text-gray-700 text-sm mb-8 text-center md:text-left">
            Digite sua nova senha e confirme-a para concluir a redefini√ß√£o.
          </p>

          <form onSubmit={handleSubmit} className="space-y-6">
            <div className="relative">
              <input
                type="password"
                placeholder=" "
                value={senha}
                onChange={(e) => setSenha(e.target.value)}
                required
                className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                         focus:border-red-700 focus:outline-none focus:ring-0
                         text-gray-700 py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-2 -top-3.5 text-gray-500 text-sm transition-all
                             peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                             peer-placeholder-shown:top-2
                             peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Nova Senha*
              </label>
            </div>

            <div className="relative">
              <input
                type="password"
                placeholder=" "
                value={confirmarSenha}
                onChange={(e) => setConfirmarSenha(e.target.value)}
                required
                className="peer w-full border-0 border-b-2 border-gray-500 bg-transparent
                         focus:border-red-700 focus:outline-none focus:ring-0
                         text-gray-700 py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-2 -top-3.5 text-gray-500 text-sm transition-all
                             peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700
                             peer-placeholder-shown:top-2
                             peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Confirmar Senha*
              </label>
            </div>

            {(erro || sucesso) && (
              <div
                className={`p-3 rounded-lg border text-sm font-medium animate-fadeIn ${
                  erro
                    ? "bg-red-100 border-red-300 text-red-700"
                    : "bg-green-100 border-green-300 text-green-700"
                }`}
              >
                {erro || sucesso}
              </div>
            )}

            <button
              type="submit"
              disabled={loading || !codigo}
              className="w-full bg-red-800 text-white p-3 rounded-lg hover:bg-red-900 transition disabled:opacity-50 flex items-center justify-center"
            >
              {loading ? (
                <div className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                  Redefinindo...
                </div>
              ) : (
                "Confirmar Nova Senha"
              )}
            </button>
          </form>

          <p className="text-sm text-center mt-3 text-gray-700">
            <a
              href="/login"
              className="text-red-800 font-medium hover:text-red-900 transition-colors"
            >
              Voltar para o login
            </a>
          </p>
        </div>
      </div>
    </div>
  );
}


### ARQUIVO: selecionandoTags\page.tsx ###
import { Suspense } from 'react';
import TagsSelector from './TagsSelector';

export default function SelecionandoTagsPage() {
  return (
    <div>
      <Suspense fallback={<p>Carregando...</p>}>
        <TagsSelector />
      </Suspense>
    </div>
  );
}

### ARQUIVO: selecionandoTags\TagsSelector.tsx ###
"use client";

import { useSearchParams, useRouter } from "next/navigation";
import { useState, useEffect } from "react";
import { FiSearch, FiX, FiArrowRight, FiAlertCircle } from "react-icons/fi";
import { motion, AnimatePresence } from "framer-motion";
import { jwtDecode } from "jwt-decode";
import { TokenPayload } from "../types/auth.types";

export default function TagsSelector() {
    const router = useRouter();
    const searchParams = useSearchParams();
    const tagsQuery = searchParams.get("tags");
    

    const [tagsSelecionadas, setTagsSelecionadas] = useState<string[]>([]);
    const [novaTag, setNovaTag] = useState("");
    const [isLoading, setIsLoading] = useState(true);
    const [erro, setErro] = useState("");

    useEffect(() => {
        if (tagsQuery) {
        const tagsArray = tagsQuery.split(",").map((tag) => tag.trim());
        setTagsSelecionadas(tagsArray);
        }
        setIsLoading(false);
    }, [tagsQuery]);

    const handleAddTag = () => {
        const tagFormatada = novaTag.trim();

        if (tagFormatada === "") {
        setErro("Por favor, digite uma tag v√°lida");
        return;
        }

        if (tagsSelecionadas.includes(tagFormatada)) {
        setErro("Esta tag j√° foi adicionada");
        return;
        }

        setTagsSelecionadas([...tagsSelecionadas, tagFormatada]);
        setNovaTag("");
        setErro("");
    };

    const handleRemoveTag = (tagParaRemover: string) => {
        setTagsSelecionadas(
        tagsSelecionadas.filter((tag) => tag !== tagParaRemover)
        );
        setErro("");
    };

    const handleContinuar = async () => {
        const token = localStorage.getItem("token")
        const idPesquisador = searchParams.get("idPesquisador");

        console.log("Id do pesquisador na tela de sele√ß√£o de tags: " + idPesquisador);

        const jsonData = {
            pesquisador: {id: idPesquisador},
            listaTags: tagsSelecionadas,
        };
    
        try {

            const resposta = await fetch("http://localhost:8080/api/tags/salvarTag", {
                method: "POST",
                headers: { "Content-Type": "application/json",
                "Authorization": `Bearer ${token}` },
                body: JSON.stringify(jsonData),
            });
        
            if (!resposta.ok) {
                throw new Error("Erro ao salvar as tags");
            }
            
            router.push(`/meu-perfil`);

        } catch (error) {
            console.error("Erro ao salvar tags:", error);
            setErro("N√£o foi poss√≠vel salvar as tags. Tente novamente.");
        }
    };

    const PulsePlaceholder = () => (
        <div className="flex space-x-2 animate-pulse">
        <div className="h-3 w-3 rounded-full bg-gray-300"></div>
        <div className="h-3 w-3 rounded-full bg-gray-300"></div>
        <div className="h-3 w-3 rounded-full bg-gray-300"></div>
        </div>
    );

    return (
        <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        transition={{ duration: 0.5 }}
        className="flex flex-col items-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 px-4 sm:px-6 lg:px-8 py-8 sm:py-12"
        >
        {/* Cabe√ßalho */}
        <div className="w-full max-w-4xl mb-6 sm:mb-8 lg:mb-10 text-center">
            <motion.h1
            initial={{ y: -20, opacity: 0 }}
            animate={{ y: 0, opacity: 1 }}
            transition={{ delay: 0.2, duration: 0.5 }}
            className="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-3 sm:mb-4"
            >
            Escolha as tags que mais combinam com voc√™!
            </motion.h1>

            <motion.p
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            transition={{ delay: 0.3 }}
            className="text-sm sm:text-base lg:text-lg text-gray-600 px-2 sm:px-0"
            >
            Elas foram geradas automaticamente a partir das palavras-chave
            encontradas no seu curr√≠culo e ajudam a destacar suas √°reas de
            atua√ß√£o. Voc√™ pode edit√°-las a qualquer momento, se desejar.
            </motion.p>
        </div>

        {/* Container principal */}
        <motion.div
            initial={{ scale: 0.98, opacity: 0 }}
            animate={{ scale: 1, opacity: 1 }}
            transition={{ delay: 0.4, duration: 0.5 }}
            className="bg-white p-4 sm:p-6 md:p-8 lg:p-10 rounded-xl sm:rounded-2xl w-full max-w-4xl shadow-md sm:shadow-lg border border-gray-200"
        >
            {/* Campo de input */}
            <div className="mb-2 sm:mb-3">
            <motion.div whileHover={{ scale: 1.005 }} className="relative w-full">
                <input
                type="text"
                placeholder="Adicionar outras tags"
                value={novaTag}
                onChange={(e) => {
                    setNovaTag(e.target.value);
                    setErro("");
                }}
                onKeyDown={(e) => {
                    if (e.key === "Enter") {
                    e.preventDefault();
                    handleAddTag();
                    }
                }}
                className={`w-full border-2 ${
                    erro ? "border-red-500" : "border-gray-200"
                } rounded-full px-4 sm:px-6 py-2 sm:py-3 text-base sm:text-lg text-gray-900 focus:outline-none focus:ring-2 ${
                    erro ? "focus:ring-red-200" : "focus:ring-red-200"
                } pr-12 sm:pr-14 placeholder-gray-500 bg-white shadow-sm transition-all duration-300`}
                />
                <motion.button
                whileHover={{ scale: 1.1 }}
                whileTap={{ scale: 0.9 }}
                onClick={handleAddTag}
                className="absolute right-3 sm:right-4 top-1/2 transform -translate-y-1/2 text-red-600 hover:text-red-700 cursor-pointer transition-colors duration-200"
                aria-label="Adicionar tag"
                >
                <FiSearch size={20} className="sm:w-6 sm:h-6" />
                </motion.button>
            </motion.div>

            {/* Mensagem de erro */}
            <AnimatePresence>
                {erro && (
                <motion.div
                    initial={{ opacity: 0, y: -10 }}
                    animate={{ opacity: 1, y: 0 }}
                    exit={{ opacity: 0, y: -10 }}
                    transition={{ duration: 0.2 }}
                    className="flex items-center mt-1 sm:mt-2 ml-3 sm:ml-4 text-red-600 text-xs sm:text-sm"
                >
                    <FiAlertCircle className="mr-1 w-3 h-3 sm:w-4 sm:h-4" />
                    <span>{erro}</span>
                </motion.div>
                )}
            </AnimatePresence>
            </div>

            {/* √Årea de tags */}
            <div className="w-full min-h-40 sm:min-h-52 p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl bg-gray-50 border-2 border-gray-200 transition-all duration-300 hover:border-gray-300">
            {isLoading ? (
                <div className="flex items-center justify-center h-32 sm:h-40">
                <PulsePlaceholder />
                </div>
            ) : (
                <AnimatePresence>
                {tagsSelecionadas.length > 0 ? (
                    <div className="flex flex-wrap gap-2 sm:gap-3 md:gap-4">
                    {tagsSelecionadas.map((tag) => (
                        <motion.div
                        key={tag}
                        layout
                        initial={{ opacity: 0, scale: 0.95, y: 10 }}
                        animate={{ opacity: 1, scale: 1, y: 0 }}
                        exit={{ opacity: 0, scale: 0.9, x: 20 }}
                        transition={{
                            type: "spring",
                            stiffness: 500,
                            damping: 30,
                        }}
                        whileHover={{ scale: 1.05 }}
                        className="flex items-center gap-2 sm:gap-3 border-2 border-gray-200 rounded-full px-3 sm:px-4 md:px-5 py-1 sm:py-2 md:py-3 bg-white text-gray-800 text-sm sm:text-base font-semibold shadow-sm hover:shadow-md transition-all duration-200"
                        >
                        <motion.span
                            whileHover={{ scale: 1.2 }}
                            whileTap={{ scale: 0.8 }}
                        >
                            <FiX
                            size={14}
                            className="sm:w-4 sm:h-4 md:w-[18px] md:h-[18px] text-red-600 cursor-pointer hover:text-red-800 transition-colors duration-200"
                            onClick={() => handleRemoveTag(tag)}
                            aria-label={`Remover tag ${tag}`}
                            />
                        </motion.span>
                        <span className="truncate max-w-[120px] sm:max-w-[150px] md:max-w-xs">
                            {tag}
                        </span>
                        </motion.div>
                    ))}
                    </div>
                ) : (
                    <motion.div
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    className="flex items-center justify-center h-32 sm:h-40"
                    >
                    <p className="text-gray-500 text-sm sm:text-base md:text-lg">
                        Adicione tags para come√ßar...
                    </p>
                    </motion.div>
                )}
                </AnimatePresence>
            )}
            </div>
        </motion.div>

        {/* Bot√£o continuar */}
        <motion.div
            className="flex justify-end w-full max-w-4xl mt-4 sm:mt-5 md:mt-6"
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.6 }}
        >
            <motion.button
            onClick={handleContinuar}
            disabled={tagsSelecionadas.length === 0}
            whileHover={
                tagsSelecionadas.length > 0
                ? {
                    scale: 1.03,
                    boxShadow: "0px 5px 15px rgba(176, 0, 0, 0.3)",
                    }
                : {}
            }
            whileTap={tagsSelecionadas.length > 0 ? { scale: 0.97 } : {}}
            className={`flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 md:px-10 py-2 sm:py-2.5 md:py-3 rounded-md font-semibold text-white text-base sm:text-lg transition-all duration-300 ${
                tagsSelecionadas.length === 0
                ? "bg-gray-400 cursor-not-allowed"
                : "bg-[#b00000] hover:bg-[#900000] cursor-pointer shadow-md"
            }`}
            aria-label="Continuar para o pr√≥ximo passo"
            >
            Continuar
            <motion.span
                animate={tagsSelecionadas.length > 0 ? { x: [0, 5, 0] } : {}}
                transition={
                tagsSelecionadas.length > 0
                    ? {
                        repeat: Infinity,
                        duration: 1.5,
                        ease: "easeInOut",
                    }
                    : {}
                }
            >
                <FiArrowRight size={18} className="sm:w-5 sm:h-5" />
            </motion.span>
            </motion.button>
        </motion.div>
        </motion.div>
    );
}

### ARQUIVO: telaEdicaoPesquisador\EditProfileForm.tsx ###
"use client";

import { useState, useEffect } from "react";
import {
  Search,
  UploadCloud,
  UserRound,
} from "lucide-react";
import { useRouter, useSearchParams } from "next/navigation";
import MenuLateral from "../components/MenuLateral";
import FormField from "../components/FormField";
import { ToggleSwitch } from "../components/ToggleSwitch";
import { PerfilAcademicoTabs } from "../components/editar-perfil-pesquisador/PerfilAcademicoTabs";
import { initialChanges, ChangesMap, mapFormacoesToChanges, ItemChange } from "../types/perfilAcademico.types";
import { FormacoesSection } from "../components/editar-perfil-pesquisador/FormacoesSection";
import { LoadingSpinner } from "../components/LoadingSpinner";
import { AtuacoesSection } from "../components/editar-perfil-pesquisador/AtuacoesSection";
import { ArtigosSection } from "../components/editar-perfil-pesquisador/ArtigosSection";
import { LivrosSection } from "../components/editar-perfil-pesquisador/LivrosSection";
import { CapitulosSection } from "../components/editar-perfil-pesquisador/CapitulosSection";
import { EventosSection } from "../components/editar-perfil-pesquisador/EventosSection";
import { ProjetosPesquisaSection } from "../components/editar-perfil-pesquisador/ProjetosPesquisaSection";
import { PremiacoesSection } from "../components/editar-perfil-pesquisador/PremiacoesSection";
import { OrientacoesSection } from "../components/editar-perfil-pesquisador/OrientacoesSection";

export default function EditProfileForm() {
  
  const searchParams = useSearchParams();
  const tagsParam = searchParams.get("tags");
  const [idTag, setIdTag] = useState("");
  const initialTags = tagsParam ? tagsParam.split(",") : [];
  const [tags, setTags] = useState<string[]>(initialTags);
  const [newTag, setNewTag] = useState("");

  const tabParam = searchParams.get("tab");

  const [activeTab, setActiveTab] = useState("");
  const [changes, setChanges] = useState<ChangesMap>(initialChanges);

  const [isLoading, setIsLoading] = useState(true)



  const [imagemPerfil, setImagemPerfil] = useState<string | null>(null);
  const [imagemAlterada, setImagemAlterada] = useState(false);
  const [arquivoImagem, setArquivoImagem] = useState<File | null>(null);

  const router = useRouter();

  const [nome, setNome] = useState("");
  const [sobrenome, setSobrenome] = useState("");
  const [especialidade, setEspecialidade] = useState("");

  const [idEndereco, setIdEndereco] = useState("");
  const [telefone, setTelefone] = useState("");
  const [email, setEmail] = useState("");
  const [cidade, setCidade] = useState("");
  const [pais, setPais] = useState("");
  const [bairro, setBairro] = useState("");
  const [nacionalidade, setNacionalidade] = useState("");
  const [exibirContato, setExibirContato] = useState(false);


  const addTag = () => {
    if (newTag.trim()) {
      setTags((t) => [...t, newTag.trim()]);
      setNewTag("");
    }
  };
  
  const removeTag = (i: number) =>
    setTags((t) => t.filter((_, idx) => idx !== i));

  const token = localStorage.getItem("token");
  const usuarioId = localStorage.getItem("usuarioId");
  const pesquisadorId = localStorage.getItem("idPesquisador");

  const atualizarTags = (id: number) => {
    return fetch(`http://localhost:8080/api/tags/alterarTag/${id}`, {
      method: "PUT",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${token}`,
      },
      body: JSON.stringify({
        listaTags: tags,
      }),
    }).then((res) => {
      if (!res.ok) {
        throw new Error("Falha ao atualizar as tags");
      }
      return res;
    });
  };

  const atualizarPesquisador = (id: number) => {
    const dadosAtualizados = {
      nomePesquisador: nome,
      sobrenome: sobrenome,
      nacionalidade: nacionalidade,
      ocupacao: especialidade,
      exibirContato: exibirContato
    };
    return fetch(
      `http://localhost:8080/api/pesquisadores/alterarPesquisador/${id}`,
      {
        method: "PUT",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${token}`,
        },
        body: JSON.stringify(dadosAtualizados),
      }
    ).then((res) => {
      if (!res.ok) {
        throw new Error("Falha ao atualizar pesquisador");
      }
      return res;
    });
  };

  const atualizarEndereco = (id: number) => {
    const dadosAtualizados = {
      id: id,
      cidade: cidade,
      pais: pais,
      bairro: bairro,
      telefone: telefone,
      email: email
    };

    return fetch(
      `http://localhost:8080/api/enderecos/alterarEndereco/${id}`,
      {
        method: "PUT",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${token}`,
        },
        body: JSON.stringify(dadosAtualizados),
      }
    ).then((res) => {
      if (!res.ok) {
        throw new Error("Falha ao atualizar pesquisador");
      }
      return res;
    });
  }


  const atualizarFoto = () => {
    if (!arquivoImagem) {
      throw new Error("Nenhum arquivo de imagem selecionado");
    }

    const formData = new FormData();
    formData.append("file", arquivoImagem);
    return fetch(
      `http://localhost:8080/api/pesquisadores/${pesquisadorId}/imagem`,
      {
        method: "PUT",
        headers: {
          Authorization: `Bearer ${token}`,
        },
        body: formData,
      }
    ).then((res) => {
      if (!res.ok) {
        throw new Error("Falha ao atualizar login");
      }
      return res;
    });
  };

  function prepararItemParaEnvio(item: any) {
    const novo = { ...item };

    if (novo.id && isNaN(Number(novo.id))) {
      delete novo.id;
    }

    if (novo.anoInicio !== undefined && novo.anoInicio !== null) {
      novo.anoInicio = Number(novo.anoInicio);
    }

    if (novo.anoConclusao !== undefined && novo.anoConclusao !== null) {
      novo.anoConclusao = Number(novo.anoConclusao);
    }

  return novo;
}

  function processarAba(changesArray: ItemChange[]) {
  return {
    adicionados: changesArray
      .filter(i => i.status === "adicionado")
      .map(i => prepararItemParaEnvio(i.data)),

    editados: changesArray
      .filter(i => i.status === "editado")
      .map(i => prepararItemParaEnvio(i.data)),

    deletados: changesArray
      .filter(i => i.status === "deletado")
      .map(i => Number(i.data.id)), 
  };
}

  function montarJsonFinal(changes: ChangesMap) {
    return {
      formacoesAcademicas: processarAba(changes["Forma√ß√µes Acad√™micas"]),
      atuacoesProfissionais: processarAba(changes["Atua√ß√µes Profissionais"]),
      artigos: processarAba(changes["Artigos"]),
      livros: processarAba(changes["Livros"]),
      capitulos: processarAba(changes["Cap√≠tulos"]),
      trabalhosEventos: processarAba(changes["Trabalho em Eventos"]),
      projetosPesquisa: processarAba(changes["Projetos de Pesquisa"]),
      premiacoes: processarAba(changes["Premia√ß√µes"]),
      orientacoes: processarAba(changes["Orienta√ß√µes"]),
    };
  }

  const atualizarPerfilAcademico = (id: number, dados: any) => {
    const payload = montarJsonFinal(dados)
    console.log(payload)
    return fetch(
    `http://localhost:8080/api/perfilAcademico/${id}`,
    {
      method: "PUT",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${token}`,
      },
      body: JSON.stringify(payload),
    }).then((res) => {
      if (!res.ok) {
        throw new Error("Falha ao atualizar perfil acad√™mico");
      }
      return res;
    });
  }

  function addItem(tab: string, data: any) {
    setChanges(prev => ({
      ...prev,
      [tab]: [
        {
          data: { ...data, id: crypto.randomUUID() },
          status: "adicionado"
        },
        ...prev[tab]
      ]
    }));
  }


  function editItem(tab: string, id: number | string, updatedData: any) {
    setChanges(prev => ({
      ...prev,
      [tab]: prev[tab].map(item =>
        item.data.id === id
          ? {
              ...item,
              data: updatedData,
              status:
                item.status === "adicionado" || item.status === "original"
                  ? item.status === "adicionado" ? "adicionado" : "editado"
                  : item.status
            }
          : item
      )
    }));
  } 

    function deleteItem(tab: string, id: number | string) {
      setChanges(prev => ({
        ...prev,
        [tab]: prev[tab]
          .map(item =>
            item.data.id === id
              ? item.status === "adicionado"
                  ? null 
                  : { ...item, status: "deletado" }
              : item
          )
          .filter(Boolean)
      }));
    }

  

  const handleSubmit = async () => {

    try {
      const promessasDeAtualizacao = [
        atualizarTags(Number(idTag)),
        atualizarPesquisador(Number(pesquisadorId)),
        atualizarEndereco(Number(idEndereco)),
        atualizarPerfilAcademico(Number(pesquisadorId), changes)
      ];

      if (imagemAlterada) {
        promessasDeAtualizacao.push(atualizarFoto());
      }

      await Promise.all(promessasDeAtualizacao);

      router.push(`/pesquisadores/${usuarioId}`);
      
    } catch (err) {
      console.error("Falha ao salvar as atualiza√ß√µes:", err);
    }
  };

  useEffect(() => {
    const handleDadosPesquisador = async () => {
      if (!token) {
        console.error("Usu√°rio n√£o logado. Redirecionando...");
        router.push("/login");
        return;
      }
      const email = localStorage.getItem("email");
      const telefoneFicticio = "(99) 9999-9999"
      try {
        const response = await fetch(
          // FIX: Use a vari√°vel 'email' direto na URL
          `http://localhost:8080/api/dadosPesquisador/${usuarioId}`,
          {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
          }
        );

        if (!response.ok) {
          throw new Error("Falha ao buscar dados do pesquisador");
        }

        const dadosPesquisador = await response.json();

        localStorage.setItem("idPesquisador", dadosPesquisador.pesquisador.id);
        console.log(dadosPesquisador);
        setNome(dadosPesquisador.pesquisador.nomePesquisador);
        setSobrenome(dadosPesquisador.pesquisador.sobrenome);
        setTags(dadosPesquisador.tags.listaTags);

        // Informa√ß√µes de Contato:
        if (dadosPesquisador.endereco) {
          setIdEndereco(dadosPesquisador.endereco.id ?? "");
          setEmail(email ?? "");
          setTelefone(telefoneFicticio ?? "");
          setCidade(dadosPesquisador.endereco.cidade ?? "");
          setPais(dadosPesquisador.endereco.pais ?? "");
          setBairro(dadosPesquisador.endereco.bairro ?? "");
          setExibirContato(dadosPesquisador.pesquisador.exibirContato)
        } else {
            setIdEndereco("");
            setEmail("");
            setTelefone("");
            setCidade("");
            setPais("");
            setBairro("");
        }

        setNacionalidade(dadosPesquisador.pesquisador.nacionalidade);

        if (dadosPesquisador.pesquisador.ocupacao != null) {
          setEspecialidade(dadosPesquisador.pesquisador.ocupacao);
        }
        
        setIdTag(dadosPesquisador.tags.id);

        console.log(dadosPesquisador)


        if (dadosPesquisador?.formacoesAcademicas) {
          setChanges((prev) => ({
            ...prev,
            "Forma√ß√µes Acad√™micas": mapFormacoesToChanges(dadosPesquisador.formacoesAcademicas),
          }));            
        }

        if (dadosPesquisador?.atuacoesProfissionais) {
          setChanges((prev) => ({
            ...prev,
            "Atua√ß√µes Profissionais": mapFormacoesToChanges(dadosPesquisador.atuacoesProfissionais),
          }));            
        }

        if (dadosPesquisador?.artigos) {
          setChanges((prev) => ({
            ...prev,
            "Artigos": mapFormacoesToChanges(dadosPesquisador.artigos),
          }));            
        }

        if (dadosPesquisador?.livros) {
          setChanges((prev) => ({
            ...prev,
            "Livros": mapFormacoesToChanges(dadosPesquisador.livros),
          }));            
        }

        if (dadosPesquisador?.capitulos) {
          setChanges((prev) => ({
            ...prev,
            "Cap√≠tulos": mapFormacoesToChanges(dadosPesquisador.capitulos),
          }));            
        }

        if (dadosPesquisador?.trabalhosEvento) {
          setChanges((prev) => ({
            ...prev,
            "Trabalho em Eventos": mapFormacoesToChanges(dadosPesquisador.trabalhosEvento),
          }));            
        }

        if (dadosPesquisador?.projetosPesquisa) {
          setChanges((prev) => ({
            ...prev,
            "Projetos de Pesquisa": mapFormacoesToChanges(dadosPesquisador.projetosPesquisa),
          }));            
        }

        if (dadosPesquisador?.premiacoes) {
          setChanges((prev) => ({
            ...prev,
            "Premia√ß√µes": mapFormacoesToChanges(dadosPesquisador.premiacoes),
          }));            
        }

        if (dadosPesquisador?.orientacoes) {
          setChanges((prev) => ({
            ...prev,
            "Orienta√ß√µes": mapFormacoesToChanges(dadosPesquisador.orientacoes),
          }));            
        }

        const res = await fetch(
          `http://localhost:8080/api/pesquisadores/${pesquisadorId}/imagem`,
          {
            method: "GET",
            headers: {
              Authorization: `Bearer ${token}`,
            },
          }
        );

        if (!res.ok) {
          throw new Error("Erro ao buscar imagem");
        }

        const blob = await res.blob();
        const urlImagem = URL.createObjectURL(blob);
        setImagemPerfil(urlImagem);



        if (window.location.hash) {
          const id = window.location.hash.replace("#", "");
          const el = document.getElementById(id);
          if (el) el.scrollIntoView({ behavior: "smooth" });
        }

      } catch (err) {
        console.error("Erro ao buscar perfil:", err);
      } finally {
        setIsLoading(false);
      }
    };

    const t = searchParams.get("tab");
    if (t) {
      setActiveTab(t);
    }

    handleDadosPesquisador();

    
  }, [router, searchParams]);

  if (isLoading) {
    return (
      <div className="flex h-screen bg-gray-100">
        <MenuLateral />
        <main className="flex-1 flex items-center justify-center">
          <div className="flex flex-col items-center space-y-4">
            <LoadingSpinner></LoadingSpinner>
          </div>
        </main>
      </div>
    );
  }

  return (
    <div className="flex h-screen bg-gray-100">
      <MenuLateral />

      {/* Main */}
      <main className="flex-1 overflow-y-auto p-8">
        <div className="max-w-4xl mx-auto bg-transparent rounded-lg p-8 space-y-8">
          {/* Se√ß√£o de Avatar + Campos */}
          <div className="flex flex-col md:flex-row md:items-center md:space-x-12">

            {/* Avatar */}
            <div className="flex-shrink-0 flex flex-col items-center">
              <div className="w-40 h-40 rounded-full relative bg-gray-200 shadow-md">
                {imagemPerfil ? (
                  <img
                    src={imagemPerfil}
                    alt="Foto do pesquisador"
                    className="w-full h-full object-cover rounded-full"
                  />
                ) : (
                  <UserRound size={120} className="text-gray-400 m-auto mt-7" />
                )}

                <input
                  type="file"
                  id="upload-foto"
                  accept="image/*"
                  className="hidden"
                  onChange={(e) => {
                    const arquivo = e.target.files?.[0];
                    if (arquivo) {
                      const url = URL.createObjectURL(arquivo);
                      setImagemPerfil(url);
                      setArquivoImagem(arquivo);
                      setImagemAlterada(true);
                    }
                  }}
                />

                <button
                  onClick={() => document.getElementById("upload-foto")?.click()}
                  className="absolute -bottom-2 -right-2 bg-red-700 text-white p-2 rounded-full shadow hover:bg-red-800 transition-colors"
                >
                  <UploadCloud size={18} />
                </button>
              </div>
            </div>

            {/* Campos */}
            <div className="flex-1 space-y-4 w-full">

              <h1 className="text-xl font-semibold text-red-700">Editar Perfil</h1>

                <FormField
                  label="Nome"
                  value={nome}
                  onChange={(e: any) => setNome(e.target.value)}
                  placeholder="Adicionar nome"
                  required
                />

                <FormField
                  label="Sobrenome"
                  value={sobrenome}
                  onChange={(e: any) => setSobrenome(e.target.value)}
                  placeholder="Adicionar sobrenome"
                />

                <FormField
                  label="Ocupa√ß√£o/Especialidade"
                  value={especialidade}
                  onChange={(e: any) => setEspecialidade(e.target.value)}
                  placeholder="Adicionar ocupa√ß√£o ou especialidade"
                />
                </div>
          </div>


          {/* Tags */}
          <section className="mt-12 space-y-3">
            <div>
              <h2 className="text-lg font-semibold text-gray-800">Tags</h2>
              <div className="w-full h-px bg-gray-300 mt-1"></div>
            </div>

            {/* Campo de adicionar tag */}
            <div className="flex items-center space-x-2">
              <div className="flex-1">

                <FormField
                  label=""
                  value={newTag}
                  onChange={(e: any) => setNewTag(e.target.value)}
                  placeholder="Adicionar tag"
                />
              </div>

              <button
                onClick={addTag}
                className="bg-red-700 text-white p-2 rounded-xl shadow hover:bg-red-800 transition"
              >
                <Search size={18} />
              </button>
            </div>

            <div className="bg-white border border-gray-200 rounded-2xl p-4 shadow-sm">
            <div className="flex flex-wrap gap-3">
              {tags.map((tag, i) => (
                <div key={i} className="relative">
                  <span
                    className="bg-gray-100 border border-gray-300 rounded-full px-4 py-1 pr-6 text-sm text-gray-700 shadow-sm block relative"
                  >
                    {tag}
                  </span>

                  <button
                    onClick={() => removeTag(i)}
                    className="absolute -top-1.5 -right-1.5 bg-red-700 text-red rounded-full w-4 h-4 flex items-center justify-center text-[10px] leading-none shadow hover:bg-red-800 transition"
                  >
                    √ó
                  </button>
                </div>
              ))}
            </div>
          </div>

        </section>


          {/* Informa√ß√µes de Contato */}
          <section className="mt-12 space-y-3" id="contato">
            <div>
              <h2 className="text-lg font-semibold text-gray-800">Informa√ß√µes de Contato</h2>
              <div className="w-full h-px bg-gray-300 mt-1"></div>
            </div>

            <ToggleSwitch
              label="Exibir minhas informa√ß√µes de contato para outros usu√°rios"
              value={exibirContato}
              onChange={(val) => setExibirContato(val)}
            />

            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <FormField
                  label="E-mail"
                  value={email}
                  onChange={(e: any) => setEmail(e.target.value)}
                  placeholder="Adicionar e-mail"
                />
              
              <FormField
                label="Telefone"
                value={telefone}
                onChange={(e: any) => setTelefone(e.target.value)}
                placeholder="Adicionar telefone"
              />

              <FormField
                label="Cidade"
                value={cidade}
                onChange={(e: any) => setCidade(e.target.value)}
                placeholder="Adicionar cidade"
              />

              <FormField
                label="Pa√≠s"
                value={pais}
                onChange={(e: any) => setPais(e.target.value)}
                placeholder="Adicionar pa√≠s"
              />

              <FormField
                label="Nacionalidade"
                value={nacionalidade}
                onChange={(e: any) => setNacionalidade(e.target.value)}
                placeholder="Adicionar nacionalidade"
              />
            </div>
          </section>

          <section className="mt-12 space-y-3" id="perfil-academico">
            <div>
              <h2 className="text-lg font-semibold text-gray-800">Editar Perfil Acad√™mico</h2>
              <div className="w-full h-px bg-gray-300 mt-1"></div>

              <PerfilAcademicoTabs active={activeTab} onChange={setActiveTab} />

              {activeTab === "Forma√ß√µes Acad√™micas" && (
                <FormacoesSection
                  data={changes["Forma√ß√µes Acad√™micas"].filter((i) => i.status !== "deletado").map((i) => i.data)}
                  onAdd={(data) => addItem("Forma√ß√µes Acad√™micas", data)}
                  onEdit={(id, data) => editItem("Forma√ß√µes Acad√™micas", id, data)}
                  onDelete={(id) => deleteItem("Forma√ß√µes Acad√™micas", id)}
                />
              )}

              {activeTab === "Atua√ß√µes Profissionais" && (
                <AtuacoesSection
                  data={changes["Atua√ß√µes Profissionais"].filter((i) => i.status !== "deletado").map((i) => i.data)}
                  onAdd={(data) => addItem("Atua√ß√µes Profissionais", data)}
                  onEdit={(id, data) => editItem("Atua√ß√µes Profissionais", id, data)}
                  onDelete={(id) => deleteItem("Atua√ß√µes Profissionais", id)}
                />
              )}

              {activeTab === "Artigos" && (
                <ArtigosSection
                  data={changes["Artigos"].filter((i) => i.status !== "deletado").map((i) => i.data)}
                  onAdd={(data) => addItem("Artigos", data)}
                  onEdit={(id, data) => editItem("Artigos", id, data)}
                  onDelete={(id) => deleteItem("Artigos", id)}
                />
              )}

              {activeTab === "Livros" && (
                <LivrosSection
                  data={changes["Livros"].filter((i) => i.status !== "deletado").map((i) => i.data)}
                  onAdd={(data) => addItem("Livros", data)}
                  onEdit={(id, data) => editItem("Livros", id, data)}
                  onDelete={(id) => deleteItem("Livros", id)}
                />
              )}

              {activeTab === "Cap√≠tulos" && (
                <CapitulosSection
                  data={changes["Cap√≠tulos"].filter((i) => i.status !== "deletado").map((i) => i.data)}
                  onAdd={(data) => addItem("Cap√≠tulos", data)}
                  onEdit={(id, data) => editItem("Cap√≠tulos", id, data)}
                  onDelete={(id) => deleteItem("Cap√≠tulos", id)}
                />
              )}
              
              {activeTab === "Trabalho em Eventos" && (
                <EventosSection
                  data={changes["Trabalho em Eventos"].filter((i) => i.status !== "deletado").map((i) => i.data)}
                  onAdd={(data) => addItem("Trabalho em Eventos", data)}
                  onEdit={(id, data) => editItem("Trabalho em Eventos", id, data)}
                  onDelete={(id) => deleteItem("Trabalho em Eventos", id)}
                />
              )}

              {activeTab === "Projetos de Pesquisa" && (
                <ProjetosPesquisaSection
                  data={changes["Projetos de Pesquisa"].filter((i) => i.status !== "deletado").map((i) => i.data)}
                  onAdd={(data) => addItem("Projetos de Pesquisa", data)}
                  onEdit={(id, data) => editItem("Projetos de Pesquisa", id, data)}
                  onDelete={(id) => deleteItem("Projetos de Pesquisa", id)}
                />
              )}

              {activeTab === "Premia√ß√µes" && (
                <PremiacoesSection
                  data={changes["Premia√ß√µes"].filter((i) => i.status !== "deletado").map((i) => i.data)}
                  onAdd={(data) => addItem("Premia√ß√µes", data)}
                  onEdit={(id, data) => editItem("Premia√ß√µes", id, data)}
                  onDelete={(id) => deleteItem("Premia√ß√µes", id)}
                />
              )}

              {activeTab === "Orienta√ß√µes" && (
                <OrientacoesSection
                  data={changes["Orienta√ß√µes"].filter((i) => i.status !== "deletado").map((i) => i.data)}
                  onAdd={(data) => addItem("Orienta√ß√µes", data)}
                  onEdit={(id, data) => editItem("Orienta√ß√µes", id, data)}
                  onDelete={(id) => deleteItem("Orienta√ß√µes", id)}
                />
              )}

            </div>
          </section>

          {/* Bot√µes de A√ß√£o */}
          {/* Bot√µes fixos no canto inferior direito, um pouco mais √† esquerda */}
<div className="fixed bottom-0 right-0 flex space-x-4 p-4 z-50 mr-8">
  <button
    className="
      w-48 px-4 py-3 
      border border-gray-400 rounded-lg shadow-md transition 
      text-gray-700 hover:bg-gray-50
    "
    onClick={() => {
      router.push(`/pesquisadores/${usuarioId}`);
    }}
  >
    Cancelar
  </button>

  <button
    className="
      w-48 px-4 py-3 
      text-white rounded-lg shadow-md transition 
      bg-[#990000] hover:bg-red-700
    "
    onClick={() => {
      handleSubmit();
    }}
  >
    Salvar
  </button>
</div>


        </div>
      </main>
    </div>
  );
}


### ARQUIVO: telaEdicaoPesquisador\page.tsx ###
import { Suspense } from 'react';
import EditProfileForm from './EditProfileForm';
import { LoadingSpinner } from '../components/LoadingSpinner';

export default function EditProfilePage() {
  return (
    <div>
      <Suspense fallback={
        <div className="flex flex-col items-center space-y-4">
          <LoadingSpinner></LoadingSpinner>
        </div>
        }>
        <EditProfileForm />
      </Suspense>
    </div>
  );
}

### ARQUIVO: types\auth.types.tsx ###
export interface TokenPayload {
  id_usuario: number;
  tipo_usuario: string;
  conta_verificada: boolean;
  sub: string
}

### ARQUIVO: types\perfilAcademico.types.tsx ###

type ItemChangeStatus = "original" | "adicionado" | "editado" | "deletado";

export interface ItemChange {
  id?: number | string; 
  data: any;            
  status: ItemChangeStatus;
}

export interface ChangesMap {
  [tabName: string]: ItemChange[];
}

export const initialChanges: ChangesMap = {
  "Forma√ß√µes Acad√™micas": [],
  "Atua√ß√µes Profissionais": [],
  "Artigos": [],
  "Livros": [],
  "Cap√≠tulos": [],
  "Trabalho em Eventos": [],
  "Projetos de Pesquisa": [],
  "Premia√ß√µes": [],
  "Orienta√ß√µes": [],
};


export function mapFormacoesToChanges(formacoes: any[]): { data: any; status: ItemChangeStatus; id: number | string }[] {
  return formacoes.map((f) => ({
    id: f.id,
    data: f,
    status: "original",
  }));
}

### ARQUIVO: types\pesquisador.types.tsx ###
export interface Usuario {
  login: string;
}

export interface DadosPesquisador {
  pesquisador: Pesquisador;
  endereco?: Endereco;
  formacoesAcademicas: FormacoesAcademicas[];
  atuacoesProfissionais: AtuacoesProfissionais[];
  artigos: Artigos[];
  linhaDoTempo?: LinhaDoTempo[];
  livros: Livros[];
  capitulos: Capitulos[];
  trabalhosEvento: TrabalhosEvento[];
  projetosPesquisa: ProjetosPesquisa[];
  premiacoes: Premiacoes[];
  orientacoes: Orientacoes[];
  tags: {
    listaTags: string[];
  };
}

export interface Endereco {
  id: number;
  cidade: string;
  telefone: string;
  bairro: string;
  pais: string;
  email: string;
}

export interface Pesquisador {
  id: number;
  usuario: Usuario;
  ocupacao: string;
  nomePesquisador: string;
  sobrenome: string;
  dataNascimento: string;
  nomeCitacoesBibliograficas: string;
  dataAtualizacao: string;
  horaAtualizacao: string;
  nacionalidade: string;
  paisNascimento: string;
  lattesId: number;
  imagemPerfil: string | null;
  exibirContato: boolean;
}

export interface AtuacoesProfissionais {
  id: number;
  cargo: string;
  instituicao: string;
  anoInicio: number;
  anoFim: number;
  destaque: false;
}

export interface Artigos {
  id: number;
  ano: number;
  titulo: string;
  periodico: string;
  doi: string;
  autores: string;
  idioma: string;
  destaque: boolean;
}

export interface Livros {
  id: number;
  isbn: string;
  editora: string;
  ano: number;
  numeroPaginas: number;
  titulo: string;
  idioma: string;
  destaque: boolean;
  autores: string;
}

export interface Capitulos {
  id: number;
  editora: string;
  paginaInicial: number;
  paginaFinal: number;
  tituloCapitulo: string;
  nomeLivro: string;
  ano: number;
  destaque: boolean;
  doi: string;
}

export interface ProjetosPesquisa {
  id: number;
  titulo: string;
  descricao: string;
  instituicao: string;
  ano: number;
  financiador: string;
  destaque: boolean;
}

export interface TrabalhosEvento {
  id: number;
  titulo: string;
  ano: number;
  nomeEvento: string;
  cidadeEvento: string;
  classificacaoEvento: string;
  destaque: boolean;
}

export interface FormacoesAcademicas {
  id: number;
  nivel: string;
  sequenciaFormacao: number;
  instituicao: string;
  curso: string;
  status: string;
  anoInicio: number;
  anoConclusao: number;
  tituloTrabalho: string;
  orientador: string;
  destaque: boolean;
}

export interface Premiacoes {
  id: number;
  titulo: string;
  instituicao: string;
  ano: number;
  destaque: boolean;
}

export interface Orientacoes {
  id: number;
  nomeOrientado: string;
  nomeCurso: string;
  ano: number;
  instituicao: string;
  tituloTrabalho: string;
  tipo: string;
  destaque: boolean;
}

export interface LinhaDoTempo {
  ano: number;
  titulo: string;
  id?: number;
  tipo: string;
}

### ARQUIVO: utils\formatadores.tsx ###
/**
 * Retorna o valor se for uma string v√°lida, caso contr√°rio retorna "N√£o informado"
 * @param valor - String que pode ser null, undefined ou vazia
 * @param padrao - Valor padr√£o a retornar (default: "N√£o informado")
 * @returns String v√°lida ou valor padr√£o
 */
export const obterValorOuPadrao = (
  valor: string | null | undefined,
  padrao: string = "N√£o informado"
): string => {
  if (!valor || valor.trim() === "" || valor.trim() === "0") {
    return padrao;
  }
  return valor.trim();
};

/**
 * Retorna o ano ou "Atualmente" se for 0, null ou undefined
 * @param valor - N√∫mero representando o ano
 * @returns String com o ano ou "Atualmente"
 */
export const obterAnoOuPadrao = (
  valor: number | null | undefined
): string => {
  if (!valor || valor === 0) {
    return "Atualmente";
  }
  return String(valor);
};

/**
 * Retorna o n√∫mero como string ou "N√£o informado" se for 0, null ou undefined
 * @param valor - N√∫mero a ser convertido
 * @returns String com o n√∫mero ou "N√£o informado"
 */
export const obterNumeroOuPadrao = (
  valor: number | null | undefined
): string => {
  if (!valor || valor === 0) {
    return "N√£o informado";
  }
  return String(valor);
};

/**
 * Formata uma data no formato YYYY-MM-DD para DD/MM/YYYY
 * @param data - Data no formato ISO (YYYY-MM-DD)
 * @returns Data formatada (DD/MM/YYYY) ou "N√£o informado"
 */
export const formatarData = (data: string | null | undefined): string => {
  if (!data || data.trim() === "") {
    return "N√£o informado";
  }

  try {
    // Se vier no formato YYYY-MM-DD
    const partes = data.split('-');
    if (partes.length === 3) {
      const [ano, mes, dia] = partes;
      return `${dia}/${mes}/${ano}`;
    }

    // Fallback: tenta criar uma data
    const dataObj = new Date(data);
    if (!isNaN(dataObj.getTime())) {
      return dataObj.toLocaleDateString('pt-BR');
    }

    return data;
  } catch (error) {
    return "N√£o informado";
  }
};

/**
 * Formata uma hora no formato HH:MM:SS para HH:MM
 * @param hora - Hora no formato HH:MM:SS
 * @returns Hora formatada (HH:MM) ou "N√£o informado"
 */
export const formatarHora = (hora: string | null | undefined): string => {
  if (!hora || hora.trim() === "") {
    return "N√£o informado";
  }

  try {
    // Se vier no formato HH:MM:SS, pega apenas HH:MM
    const partes = hora.split(':');
    if (partes.length >= 2) {
      return `${partes[0]}:${partes[1]}`;
    }

    return hora;
  } catch (error) {
    return "N√£o informado";
  }
};

/**
 * Formata data e hora completa
 * @param data - Data no formato YYYY-MM-DD
 * @param hora - Hora no formato HH:MM:SS
 * @returns String formatada "DD/MM/YYYY √†s HH:MM"
 */
export const formatarDataHora = (
  data: string | null | undefined,
  hora: string | null | undefined
): string => {
  const dataFormatada = formatarData(data);
  const horaFormatada = formatarHora(hora);

  if (dataFormatada === "N√£o informado" && horaFormatada === "N√£o informado") {
    return "N√£o informado";
  }

  if (dataFormatada === "N√£o informado") {
    return horaFormatada;
  }

  if (horaFormatada === "N√£o informado") {
    return dataFormatada;
  }

  return `${dataFormatada} √†s ${horaFormatada}`;
};

### ARQUIVO: verificarEmail\page.tsx ###
import { Suspense } from 'react';
import VerifyEmail from './VerifyEmail';

export default function Home() {
  return (
      <div>
        <Suspense fallback={<p>Carregando...</p>}>
          <VerifyEmail/>
        </Suspense>
      </div>
    );
}






### ARQUIVO: verificarEmail\VerifyEmail.tsx ###
"use client";

import { useSearchParams, useRouter } from "next/navigation";
import { useEffect, useState } from "react";
import Image from "next/image";

export default function VerificarEmail() {
  const params = useSearchParams();
  const uniqueId = params.get("codigo");
  const router = useRouter();
  const token = typeof window !== "undefined" ? localStorage.getItem("token") : null;

  const [status, setStatus] = useState<"loading" | "success" | "error">("loading");
  const [mensagem, setMensagem] = useState("");
  const [tipoUsuario, setTipoUsuario] = useState<string | null>(null);

  useEffect(() => {
    if (!uniqueId) {
      setStatus("error");
      setMensagem("Token de verifica√ß√£o ausente.");
      return;
    }

    const verificar = async () => {
      try {
        const res = await fetch(
          `http://localhost:8080/api/usuarios/verificarEmail?codigo=${uniqueId}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
          }
        );

        if (res.ok) {
          const data = await res.json();

          setTipoUsuario(data.tipo);

          setStatus("success");
          setMensagem("Seu e-mail foi confirmado com sucesso!");
        } else {
          const data = await res.json();
          setStatus("error");
          setMensagem(data.message || "Token inv√°lido ou expirado.");
        }
      } catch (err) {
        setStatus("error");
        setMensagem("Erro ao conectar com o servidor.");''
      }
    };

    verificar();
  }, [uniqueId, token, router]);

  const rotaPorTipo = () => {
    if (tipoUsuario === "PESQUISADOR") return "/cadastro-pesquisador";
    if (tipoUsuario === "EMPRESA") return "/cadastro-empresa";
    return "/login"; 
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex">
      <div className="hidden lg:flex lg:w-2/5 bg-gradient-to-br from-[#990000] to-red-900 relative overflow-hidden">
        <div className="absolute inset-0 opacity-10">
          <div className="absolute top-0 right-0 w-64 h-64 bg-white rounded-full -translate-y-32 translate-x-32"></div>
          <div className="absolute bottom-0 left-0 w-96 h-96 bg-white rounded-full translate-y-48 -translate-x-48"></div>
        </div>
      </div>

      <div className="flex-1 flex items-center justify-center px-6 py-12">
        <div className="w-full max-w-md">
          <div className="lg:hidden mb-8 flex justify-center">
            <Image
              src="/images/logo_1.png"
              alt="Logo"
              width={120}
              height={120}
              quality={100}
              priority
            />
          </div>

          {status === "loading" && (
            <div className="text-center">
              <div className="mb-8 flex justify-center">
                <div className="relative">
                  <div className="w-32 h-32 rounded-full border-8 border-gray-200 flex items-center justify-center">
                    <svg
                      className="w-16 h-16 animate-spin text-[#990000]"
                      fill="none"
                      viewBox="0 0 24 24"
                    >
                      <circle
                        className="opacity-25"
                        cx="12"
                        cy="12"
                        r="10"
                        stroke="currentColor"
                        strokeWidth="3"
                      ></circle>
                      <path
                        className="opacity-75"
                        fill="currentColor"
                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"
                      ></path>
                    </svg>
                  </div>
                </div>
              </div>
              <h1 className="text-3xl font-bold text-gray-900 mb-3">
                Verificando seu e-mail
              </h1>
              <p className="text-gray-600 text-lg">Isso n√£o vai demorar...</p>
            </div>
          )}

          {status === "success" && (
            <div className="text-center">
              <div className="mb-8 flex justify-center">
                <div className="w-32 h-32 rounded-full bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center shadow-2xl">
                  <svg
                    className="w-16 h-16 text-white"
                    fill="none"
                    stroke="currentColor"
                    strokeWidth={3}
                    viewBox="0 0 24 24"
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                </div>
              </div>

              <h1 className="text-4xl font-bold text-gray-900 mb-4">
                Tudo certo!
              </h1>
              <p className="text-gray-600 text-lg mb-8">{mensagem}</p>

              <button
                onClick={() => router.push(rotaPorTipo())}
                className="w-full bg-gradient-to-r from-[#b30000] to-[#660000] text-white font-semibold px-8 py-4 rounded-xl transition-all shadow-lg hover:shadow-2xl hover:scale-105 focus:ring-4 focus:ring-red-300"
              >
                Continuar Cadastro
              </button>
            </div>
          )}

          {status === "error" && (
            <div className="text-center">
              <div className="mb-8 flex justify-center">
                <div className="w-32 h-32 rounded-full bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center shadow-2xl">
                  <svg
                    className="w-16 h-16 text-white"
                    fill="none"
                    stroke="currentColor"
                    strokeWidth={3}
                    viewBox="0 0 24 24"
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      d="M6 18L18 6M6 6l12 12"
                    />
                  </svg>
                </div>
              </div>

              <h1 className="text-4xl font-bold text-gray-900 mb-4">
                Ops, algo deu errado!
              </h1>
              <p className="text-gray-600 text-lg mb-8">{mensagem}</p>

              <div className="bg-red-50 border-l-4 border-red-500 rounded-lg p-6 mb-8">
                <div className="flex items-start gap-3">
                  <svg
                    className="w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fillRule="evenodd"
                      d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                      clipRule="evenodd"
                    />
                  </svg>
                  <p className="text-sm text-red-800 font-medium text-left">
                    O link pode ter expirado ou j√° foi utilizado anteriormente. Tente fazer login ou solicite um novo e-mail de verifica√ß√£o.
                  </p>
                </div>
              </div>

              <button
                onClick={() => router.push("/login")}
                className="w-full bg-[#990000] hover:bg-red-900 text-white font-semibold px-8 py-4 rounded-xl transition-all shadow-lg hover:shadow-xl"
              >
                Ir para o Login
              </button>
            </div>
          )}
        </div>
      </div>
    </div>
  );
}
