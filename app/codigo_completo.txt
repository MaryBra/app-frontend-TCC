

### ARQUIVO: globals.css ###
@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  background: var(--background) !important;
  color: var(--foreground) !important;
  transition: background-color 0.3s ease, color 0.3s ease;
}

body {
  font-family: Arial, Helvetica, sans-serif;
}

/* ========== LIGHT MODE ========== */
:root {
  color-scheme: light;
}

body {
  background: #ffffff !important;
  color: #000000 !important;
}

.bg-white {
  background-color: #ffffff !important;
}

.bg-gray-50 {
  background-color: #f8fafc !important;
}

.bg-gray-100 {
  background-color: #f1f5f9 !important;
}

.bg-gray-200 {
  background-color: #e2e8f0 !important;
}

.text-gray-900 {
  color: #000000 !important;
}

.text-gray-800 {
  color: #1a1a1a !important;
}

.text-gray-700 {
  color: #2d2d2d !important;
}

.text-gray-600 {
  color: #4a4a4a !important;
}

.text-gray-500 {
  color: #6b6b6b !important;
}

.border-gray-200 {
  border-color: #e2e8f0 !important;
}

.border-gray-300 {
  border-color: #cbd5e1 !important;
}

input,
textarea,
select {
  background-color: #ffffff !important;
  border: 1px solid #d1d5db !important;
  color: #000000 !important;
}

input:focus,
textarea:focus,
select:focus {
  border-color: #990000 !important;
  outline: none !important;
  box-shadow: 0 0 0 3px rgba(153, 0, 0, 0.1) !important;
}

input::placeholder,
textarea::placeholder {
  color: #6b7280 !important;
}

/* ========== DARK MODE ========== */
html.dark {
  color-scheme: dark;
}

html.dark body {
  background: #0f0f0f !important;
  color: #ffffff !important;
}

html.dark .bg-white {
  background-color: #1a1a1a !important;
}

html.dark .bg-gray-50 {
  background-color: #0f0f0f !important;
}

html.dark .bg-gray-100 {
  background-color: #1a1a1a !important;
}

html.dark .bg-gray-200 {
  background-color: #2d2d2d !important;
}

html.dark .bg-gray-300 {
  background-color: #404040 !important;
}

html.dark .text-gray-900 {
  color: #ffffff !important;
}

html.dark .text-gray-800 {
  color: #f8f8f8 !important;
}

html.dark .text-gray-700 {
  color: #e8e8e8 !important;
}

html.dark .text-gray-600 {
  color: #d4d4d4 !important;
}

html.dark .text-gray-500 {
  color: #a8a8a8 !important;
}

html.dark .border-gray-200 {
  border-color: #2d2d2d !important;
}

html.dark .border-gray-300 {
  border-color: #404040 !important;
}

html.dark input,
html.dark textarea,
html.dark select {
  background-color: #1a1a1a !important;
  border: 1px solid #2d2d2d !important;
  color: #ffffff !important;
}

html.dark input:focus,
html.dark textarea:focus,
html.dark select:focus {
  border-color: #dc2626 !important;
  box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.2) !important;
}

html.dark input::placeholder,
html.dark textarea::placeholder {
  color: #8a8a8a !important;
}

/* ========== CORES VERMELHAS DO TEMA ========== */
/* Textos importantes em vermelho */
.text-important {
  color: #990000 !important;
}

html.dark .text-important {
  color: #ef4444 !important;
}

/* Bordas das tags em vermelho */
.tag-border {
  border-color: #990000 !important;
}

html.dark .tag-border {
  border-color: #ef4444 !important;
}

/* Nome do usu√°rio em vermelho */
.username {
  color: #990000 !important;
}

html.dark .username {
  color: #ef4444 !important;
}

/* Bot√µes principais */
.btn-primary {
  background-color: #990000 !important;
  color: white !important;
}

html.dark .btn-primary {
  background-color: #dc2626 !important;
  color: white !important;
}

.btn-primary:hover {
  background-color: #7a0000 !important;
}

html.dark .btn-primary:hover {
  background-color: #b91c1c !important;
}

/* ========== CORES PERSONALIZADAS DAS LISTAS ========== */
/* Cores customizadas para as listas */
.bg-custom-1 {
  background-color: #990000 !important;
}
.bg-custom-2 {
  background-color: #dc2626 !important;
}
.bg-custom-3 {
  background-color: #ea580c !important;
}
.bg-custom-4 {
  background-color: #d97706 !important;
}
.bg-custom-5 {
  background-color: #059669 !important;
}
.bg-custom-6 {
  background-color: #0891b2 !important;
}
.bg-custom-7 {
  background-color: #3730a3 !important;
}
.bg-custom-8 {
  background-color: #7c3aed !important;
}

/* Garantir que cores customizadas n√£o sejam sobrescritas */
[class*="bg-custom-"] {
  background-color: inherit !important;
}

/* ========== SHADOWS ========== */
.shadow-sm {
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
}

.shadow-md {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
}

.shadow-lg {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1) !important;
}

.shadow-xl {
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1) !important;
}

html.dark .shadow-sm {
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3) !important;
}

html.dark .shadow-md {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.4) !important;
}

html.dark .shadow-lg {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.4) !important;
}

html.dark .shadow-xl {
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.4) !important;
}

/* ========== CURSORES E INTERA√á√ïES ========== */
button,
a,
[role="button"],
input[type="submit"],
input[type="button"],
.clickable {
  cursor: pointer !important;
}

button:hover,
a:hover,
[role="button"]:hover {
  transform: translateY(-1px) !important;
}

input[type="text"],
input[type="email"],
input[type="password"],
textarea {
  cursor: text !important;
}

button:disabled,
input:disabled {
  cursor: not-allowed !important;
  opacity: 0.6 !important;
}

/* ========== SCROLLBAR ========== */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: #f1f5f9;
}

::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

html.dark ::-webkit-scrollbar-track {
  background: #1a1a1a;
}

html.dark ::-webkit-scrollbar-thumb {
  background: #404040;
}

html.dark ::-webkit-scrollbar-thumb:hover {
  background: #595959;
}

/* ========== LOADING ========== */
.loading-spinner {
  border: 2px solid #f3f3f3;
  border-top: 2px solid #990000;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  animation: spin 1s linear infinite;
}

html.dark .loading-spinner {
  border: 2px solid #2d2d2d;
  border-top: 2px solid #dc2626;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* ========== ELIMINAR CORES AZUIS ========== */
.bg-blue-50,
.bg-blue-100,
.bg-blue-200 {
  background-color: #f1f5f9 !important;
}

html.dark .bg-blue-50,
html.dark .bg-blue-100,
html.dark .bg-blue-200 {
  background-color: #1a1a1a !important;
}

.text-blue-600,
.text-blue-700,
.text-blue-800 {
  color: #374151 !important;
}

html.dark .text-blue-600,
html.dark .text-blue-700,
html.dark .text-blue-800 {
  color: #d1d5db !important;
}

.bg-green-50,
.bg-green-100 {
  background-color: #f0fdf4 !important;
}

html.dark .bg-green-50,
html.dark .bg-green-100 {
  background-color: #1a1a1a !important;
}

.text-green-600,
.text-green-800 {
  color: #374151 !important;
}

html.dark .text-green-600,
html.dark .text-green-800 {
  color: #d1d5db !important;
}

/* ========== TRANSITIONS ========== */
* {
  transition: background-color 0.3s ease, border-color 0.3s ease,
    color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease !important;
}

/* ========== FOCUS STATES ========== */
button:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 2px solid #990000 !important;
  outline-offset: 2px !important;
}

html.dark button:focus-visible,
html.dark input:focus-visible,
html.dark textarea:focus-visible,
html.dark select:focus-visible {
  outline: 2px solid #dc2626 !important;
  outline-offset: 2px !important;
}

/* ========== GARANTIR HERAN√áA DE CORES ========== */
div,
section,
main,
header,
footer,
article,
aside,
nav {
  background-color: inherit !important;
  color: inherit !important;
}

/* ========== FIXES ESPEC√çFICOS ========== */
/* Sidebar diferenciada */
.bg-gray-800 {
  background-color: #1f2937 !important;
}

html.dark .bg-gray-800 {
  background-color: #1a1a1a !important;
}

/* Cards */
.bg-gray-50 {
  background-color: #f8fafc !important;
}

html.dark .bg-gray-50 {
  background-color: #0f0f0f !important;
}

/* Hover effects */
.hover\:bg-gray-50:hover {
  background-color: #f1f5f9 !important;
}

html.dark .hover\:bg-gray-50:hover {
  background-color: #2d2d2d !important;
}

.hover\:bg-gray-100:hover {
  background-color: #e2e8f0 !important;
}

html.dark .hover\:bg-gray-100:hover {
  background-color: #404040 !important;
}

/* ========== GARANTIR QUE TODOS OS TEXTOS SEJAM LEG√çVEIS ========== */
p,
span,
div,
li,
td,
th {
  color: inherit !important;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  color: inherit !important;
  font-weight: 600 !important;
}

/* Contraste m√°ximo */
body {
  color: #000000 !important;
}

html.dark body {
  color: #ffffff !important;
}


### ARQUIVO: layout.tsx ###
import type { Metadata } from "next";
import { Geist, Geist_Mono } from "next/font/google";
import "./globals.css";
import { SidebarProvider } from "./contexts/SidebarContext";
import { UserProvider } from "./contexts/UserContext";
import ThemeProvider from "./contexts/ThemeProvider";

const geistSans = Geist({
  variable: "--font-geist-sans",
  subsets: ["latin"],
});

const geistMono = Geist_Mono({
  variable: "--font-geist-mono",
  subsets: ["latin"],
});

export const metadata: Metadata = {
  title: "LaVerse",
  description: "Plataforma de pesquisa unificada",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="pt-BR" suppressHydrationWarning>
      <head>
        <script
          dangerouslySetInnerHTML={{
            __html: `
              (function() {
                try {
                  var savedTheme = localStorage.getItem('theme');
                  var systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                  
                  // Tema padr√£o √© light - s√≥ dark se explicitamente salvo como dark
                  var isDark = savedTheme === 'dark';
                  
                  // Se n√£o tem tema salvo, usar prefer√™ncia do sistema
                  if (!savedTheme && systemPrefersDark) {
                    isDark = true;
                    localStorage.setItem('theme', 'dark');
                  } else if (!savedTheme) {
                    isDark = false;
                    localStorage.setItem('theme', 'light');
                  }
                  
                  // Aplicar tema imediatamente
                  if (isDark) {
                    document.documentElement.classList.add('dark');
                    document.documentElement.style.colorScheme = 'dark';
                    document.body.classList.add('dark');
                    document.body.style.backgroundColor = '#111827';
                  } else {
                    document.documentElement.classList.remove('dark');
                    document.documentElement.style.colorScheme = 'light';
                    document.body.classList.remove('dark');
                    document.body.style.backgroundColor = '#ffffff';
                  }
                  
                  // For√ßar repaint para garantir que as cores sejam aplicadas
                  document.body.style.display = 'none';
                  document.body.offsetHeight; // Trigger reflow
                  document.body.style.display = '';
                } catch (e) {
                  console.log('Erro ao aplicar tema:', e);
                }
              })();
            `,
          }}
        />
      </head>
      <body
        className={`${geistSans.variable} ${geistMono.variable} antialiased`}
        suppressHydrationWarning
      >
        <ThemeProvider>
          <UserProvider>
            <SidebarProvider>{children}</SidebarProvider>
          </UserProvider>
        </ThemeProvider>
      </body>
    </html>
  );
}


### ARQUIVO: page.tsx ###
"use client";

import { useRouter } from "next/navigation";
import { useState, useEffect } from "react";
import Image from "next/image";
import { Lightbulb } from "lucide-react";
import { CircleHelp } from "lucide-react";
import { Workflow } from "lucide-react";
import { SearchCheck } from "lucide-react";
import { CircleUser } from "lucide-react";
import { Earth } from "lucide-react";

export default function Inicio() {
  const router = useRouter();
  const [currentSection, setCurrentSection] = useState(0);
  const [isVisible, setIsVisible] = useState({});

  // üî• ADICIONE ESTE USEEFFECT
  useEffect(() => {
    const html = document.documentElement;
    const savedTheme = localStorage.getItem("theme");

    if (savedTheme === "dark") {
      html.classList.add("dark");
      html.style.colorScheme = "dark";
      document.body.style.backgroundColor = "#111827";
    } else {
      html.classList.remove("dark");
      html.style.colorScheme = "light";
      document.body.style.backgroundColor = "#ffffff";
    }
  }, []);

  const sections = [
    "hero",
    "projeto",
    "como-funciona",
    "beneficios",
    "video",
    "integrantes",
    "contato",
  ];

  useEffect(() => {
    const observerOptions = {
      threshold: 0.3,
      rootMargin: "-10% 0px -10% 0px",
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          setIsVisible((prev) => ({
            ...prev,
            [entry.target.id]: true,
          }));

          const sectionIndex = sections.indexOf(entry.target.id);
          if (sectionIndex !== -1) {
            setCurrentSection(sectionIndex);
          }
        }
      });
    }, observerOptions);

    sections.forEach((section) => {
      const element = document.getElementById(section);
      if (element) observer.observe(element);
    });

    return () => observer.disconnect();
  }, []);

  const scrollToSection = (sectionId: string) => {
    document.getElementById(sectionId)?.scrollIntoView({
      behavior: "smooth",
      block: "start",
    });
  };

  const scrollToNext = () => {
    const nextIndex = (currentSection + 1) % sections.length;
    scrollToSection(sections[nextIndex]);
  };

  return (
    // üî• MODIFIQUE A DIV PRINCIPAL
    <div className="min-h-screen bg-white dark:bg-gray-900 bg-page">
      {/* Navigation Dots */}
      <div className="fixed bottom-3 left-1/2 transform -translate-x-1/2 z-50">
        {sections.map((section, index) => (
          <button
            key={section}
            onClick={() => scrollToSection(section)}
            className={`w-3 h-3 rounded-full transition-all duration-300 mr-1 ${
              currentSection === index
                ? "bg-[#990000] scale-125"
                : "bg-gray-400 hover:bg-gray-600"
            }`}
            title={section.charAt(0).toUpperCase() + section.slice(1)}
          />
        ))}
      </div>

      {/* Scroll to Next Button */}
      <button
        onClick={scrollToNext}
        className="fixed bottom-6 right-6 bg-[#990000] text-white p-3 rounded-full shadow-lg hover:bg-red-800 transition-all duration-300 hover:scale-110 z-50"
      >
        <svg
          className="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeWidth={2}
            d="M19 14l-7 7m0 0l-7-7m7 7V3"
          />
        </svg>
      </button>

      {/* Header */}
      <header className="bg-white dark:bg-gray-800 shadow-sm fixed w-full top-0 z-40 transition-all duration-300">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center h-16">
            <div className="flex items-center">
              <Image
                src="/images/logo_1.png"
                alt="Logo"
                width={150}
                height={150}
                quality={100}
                priority
                className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer mx-auto"
              />
            </div>
            <nav className="hidden md:flex space-x-8">
              <button
                onClick={() => scrollToSection("projeto")}
                className="text-gray-700 dark:text-gray-300 hover:text-[#990000] transition-colors"
              >
                Projeto
              </button>
              <button
                onClick={() => scrollToSection("integrantes")}
                className="text-gray-700 dark:text-gray-300 hover:text-[#990000] transition-colors"
              >
                Sobre n√≥s
              </button>
              <button
                onClick={() => scrollToSection("contato")}
                className="text-gray-700 dark:text-gray-300 hover:text-[#990000] transition-colors"
              >
                Contato
              </button>
            </nav>
            <div className="flex space-x-4">
              <button
                onClick={() => router.push("/login")}
                className="px-4 py-2 border-2 border-[#990000] text-[#990000] rounded hover:bg-[#990000] hover:text-white transition-all duration-300"
              >
                Entrar
              </button>
              <button
                onClick={() => router.push("/criarConta")}
                className="px-4 py-2 bg-[#990000] text-white rounded hover:bg-red-800 transition-all duration-300 hover:shadow-lg"
              >
                Cadastro
              </button>
            </div>
          </div>
        </div>
      </header>

      {/* Hero Section */}
      <section
        id="hero"
        className="bg-white dark:bg-gray-800 py-20 pt-20 min-h-screen flex items-center"
      >
        <div className="mx-auto w-full pr-10">
          <div className="flex flex-col lg:flex-row items-center">
            <div
              className={`lg:w-1/2 lg:pr-12 transition-all duration-1000 ${
                (isVisible as any).hero
                  ? "opacity-100 translate-x-0"
                  : "opacity-0 -translate-x-10"
              }`}
            >
              <Image
                src="/images/note.png"
                alt="Logo"
                width={1048}
                height={1048}
                quality={100}
                priority
                className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer mx-auto"
              />
            </div>
            <div
              className={`lg:w-1/2 mt-10 lg:mt-0 transition-all duration-1000 delay-300 ${
                (isVisible as any).hero
                  ? "opacity-100 translate-x-0"
                  : "opacity-0 translate-x-10"
              }`}
            >
              <h1 className="text-4xl font-bold text-gray-900 dark:text-white mb-6 mr-20">
                Plataforma de pesquisa unificada para pesquisadores e empresas
              </h1>
              <p className="text-gray-600 dark:text-gray-300 mb-8 mr-20">
                Conectamos pesquisadores e empresas com um √∫nico ecossistema a
                busca por talentos, inova√ß√£o e oportunidades.
              </p>
              <button className="bg-[#990000] text-white px-8 py-3 rounded-lg hover:bg-red-800 transition-all duration-300  hover:shadow-lg hover:scale-105">
                Veja como funciona!
              </button>
            </div>
          </div>
        </div>
      </section>

      {/* Projeto Section */}
      <section
        id="projeto"
        className="bg-gray-50 dark:bg-gray-900 py-20 min-h-screen flex items-center"
      >
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
          <h2
            className={`text-3xl mb-8 font-bold text-center transition-all duration-1000 ${
              (isVisible as any).projeto
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Projeto
          </h2>

          <div className="grid md:grid-cols-2 gap-12 items-center mb-16">
            <div
              className={`transition-all duration-1000 delay-300 ${
                (isVisible as any).projeto
                  ? "opacity-100 translate-x-0"
                  : "opacity-0 -translate-x-10"
              }`}
            >
              <div className="flex items-start mb-6 group">
                <div className="bg-[#990000] p-2 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold mr-4 mt-1 group-hover:scale-110 transition-transform duration-300">
                  <CircleHelp />
                </div>
                <div>
                  <h3 className="text-2xl text-[#990000] mb-2">
                    O que √© a plataforma?
                  </h3>
                  <p className="text-gray-600 dark:text-gray-300">
                    A plataforma conecta pesquisadores especializados com
                    empresas que buscam solu√ß√µes inovadoras atrav√©s de um
                    sistema de pesquisa por palavra-chave, facilitando a
                    comunica√ß√£o e colabora√ß√£o entre ambos os lados.
                  </p>
                </div>
              </div>

              <div className="flex items-start group">
                <div className="bg-[#990000] p-2 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold mr-4 mt-1 group-hover:scale-110 transition-transform duration-300">
                  <Lightbulb />
                </div>
                <div>
                  <h3 className="text-2xl  text-[#990000] mb-2">
                    Por que criamos essa solu√ß√£o?
                  </h3>
                  <p className="text-gray-600 dark:text-gray-300">
                    Identificamos a necessidade de uma ponte entre o
                    conhecimento acad√™mico e as demandas do mercado. Nossa
                    plataforma oferece uma solu√ß√£o eficiente para conectar
                    talentos especializados com empresas que buscam inova√ß√£o e
                    solu√ß√µes espec√≠ficas.
                  </p>
                </div>
              </div>
            </div>

            <div
              className={`transition-all duration-1000 delay-500 ${
                (isVisible as any).projeto
                  ? "opacity-100 translate-x-0"
                  : "opacity-0 translate-x-10"
              }`}
            >
              <Image
                src="/images/note2.png"
                alt="Logo"
                width={400}
                height={400}
                quality={100}
                priority
                className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer mx-auto"
              />
            </div>
          </div>
        </div>
      </section>

      {/* Como a plataforma resolve isso? */}
      <section
        id="como-funciona"
        className="bg-[#990000] py-20 min-h-screen flex items-center"
      >
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center w-full">
          <h2
            className={`text-3xl font-bold text-white mb-4 transition-all duration-1000 ${
              (isVisible as any)["como-funciona"]
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Como a plataforma resolve isso?
          </h2>
          <p
            className={`text-red-100 mb-12 max-w-3xl mx-auto transition-all duration-1000 delay-200 ${
              (isVisible as any)["como-funciona"]
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Nossa plataforma atua como intermedi√°ria entre pesquisadores e
            empresas, facilitando encontros estrat√©gicos que geram valor real
            para ambos os lados atrav√©s de funcionalidades espec√≠ficas.
          </p>

          <div className="grid md:grid-cols-4 gap-6">
            {[
              {
                icon: <Workflow className="w-14 h-14" />,
                title: "Integra√ß√£o",
                desc: "Encontre especialistas atrav√©s de palavras-chave relacionadas √† sua √°rea de interesse.",
              },
              {
                icon: <SearchCheck className="w-14 h-14" />,
                title: "Busca",
                desc: "Utilize filtros espec√≠ficos para encontrar o perfil ideal para seu projeto.",
              },
              {
                icon: <CircleUser className="w-14 h-14" />,
                title: "Perfil",
                desc: "Visualize informa√ß√µes detalhadas sobre forma√ß√£o, experi√™ncia e projetos.",
              },
              {
                icon: <Earth className="w-14 h-14" />,
                title: "Conex√£o",
                desc: "Conecte-se diretamente com pesquisadores atrav√©s de nossa plataforma.",
              },
            ].map((item, index) => (
              <div
                key={index}
                className={`bg-white p-8 rounded-lg hover:shadow-xl hover:scale-105 transition-all duration-500 ${
                  (isVisible as any)["como-funciona"]
                    ? "opacity-100 translate-y-0"
                    : "opacity-0 translate-y-10"
                }`}
                style={{ transitionDelay: `${400 + index * 100}ms` }}
              >
                <div className="bg-gray-100 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-4 hover:bg-gray-200 transition-colors duration-300">
                  <span className="text-5xl">{item.icon}</span>
                </div>
                <h3 className="font-bold mb-2 text-xl">{item.title}</h3>
                <p className="text-md text-gray-600">{item.desc}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Por que usar a plataforma? */}
      <section
        id="beneficios"
        className="bg-white dark:bg-gray-800 py-20 min-h-screen flex items-center relative overflow-hidden"
      >
        <div className="w-full">
          <h2
            className={`text-3xl font-bold text-center transition-all duration-1000 ${
              (isVisible as any).beneficios
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Por que usar a plataforma?
          </h2>

          {/* Imagem de fundo */}
          <div
            className={`absolute top-10 -translate-x-1/2 z-0 transition-all duration-1000 delay-300 ${
              (isVisible as any).beneficios
                ? "opacity-100 translate-x-0"
                : "opacity-0 -translate-x-10"
            }`}
          >
            <Image
              src="/images/fundo.png"
              alt="Logo"
              width={400}
              height={400}
              quality={100}
              priority
              className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer"
            />
          </div>

          {/* Conte√∫do principal */}
          <div className="relative flex justify-center z-10">
            <div className="lg:w-2/3 lg:mb-20 mt-20 mx-auto">
              <div className="grid md:grid-cols-2 gap-8">
                <div
                  className={`bg-[#990000] text-white p-12 rounded-lg hover:shadow-xl hover:scale-105 transition-all duration-500 ${
                    (isVisible as any).beneficios
                      ? "opacity-100 translate-y-0"
                      : "opacity-0 translate-y-10"
                  }`}
                  style={{ transitionDelay: "500ms" }}
                >
                  <h3 className="text-xl font-bold mb-4">Para Pesquisadores</h3>
                  <ul className="space-y-2 text-sm">
                    <li>‚Ä¢ Aumente a visibilidade do seu trabalho</li>
                    <li>‚Ä¢ Encontre oportunidades de colabora√ß√£o</li>
                    <li>‚Ä¢ Monetize seu conhecimento especializado</li>
                    <li>
                      ‚Ä¢ Conecte-se com empresas do seu setor e diversifique sua
                      carreira
                    </li>
                    <li>‚Ä¢ Amplie suas redes de pesquisa e suas √°reas</li>
                  </ul>
                </div>

                <div
                  className={`bg-[#990000] text-white p-12 rounded-lg hover:shadow-xl hover:scale-105 transition-all duration-500 ${
                    (isVisible as any).beneficios
                      ? "opacity-100 translate-y-0"
                      : "opacity-0 translate-y-10"
                  }`}
                  style={{ transitionDelay: "700ms" }}
                >
                  <h3 className="text-xl font-bold mb-4">Para Empresas</h3>
                  <ul className="space-y-2 text-sm">
                    <li>‚Ä¢ Tenha acesso r√°pido aos melhores especialistas</li>
                    <li>
                      ‚Ä¢ Encontre solu√ß√µes customizadas para problemas
                      espec√≠ficos
                    </li>
                    <li>‚Ä¢ Acelere processos de inova√ß√£o</li>
                    <li>‚Ä¢ Reduza custos com consultorias externas</li>
                    <li>
                      ‚Ä¢ Mantenha-se atualizado com as √∫ltimas pesquisas e
                      inova√ß√µes
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Video Section */}
      <section
        id="video"
        className="bg-[#990000] py-20 min-h-screen flex items-center"
      >
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center w-full">
          <p
            className={`text-red-100 mb-8 transition-all duration-1000 ${
              (isVisible as any).video
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Assista ao tutorial completo de como se cadastrar na plataforma
            abaixo
          </p>
          <h2
            className={`text-2xl font-bold text-white mb-12 transition-all duration-1000 delay-200 ${
              (isVisible as any).video
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Como exportar o meu curriculo lattes para o LaVerse?
          </h2>

          <div className="flex flex-col lg:flex-row items-center justify-center gap-12">
            <div
              className={`w-96 h-64 rounded-lg overflow-hidden shadow-lg transition-all duration-500 hover:scale-105 ${
                (isVisible as any).video
                  ? "opacity-100 translate-x-0"
                  : "opacity-0 -translate-x-10"
              }`}
              style={{ transitionDelay: "400ms" }}
            >
              <iframe
                className="w-full h-full"
                src="https://www.youtube.com/embed/3ZnC4DTshc4"
                title="YouTube video"
                frameBorder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowFullScreen
              ></iframe>
            </div>

            <div
              className={`text-center max-w-md transition-all duration-1000 delay-600 ${
                (isVisible as any).video
                  ? "opacity-100 translate-x-0"
                  : "opacity-0 translate-x-10"
              }`}
            >
              <h3 className="text-xl font-bold text-white mb-4">
                üîí Seguran√ßa garantida:{" "}
                <span className="font-normal">
                  Seus dados sens√≠veis s√£o protegidos e utilizados apenas para
                  fins de conex√£o entre pesquisadores e empresas, em
                  conformidade com a LGPD.
                </span>
              </h3>
              <Image
                src="/images/video.png"
                alt="Logo"
                width={250}
                height={250}
                quality={100}
                priority
                className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer"
              />
            </div>
          </div>
        </div>
      </section>

      {/* Integrantes */}
      <section
        id="integrantes"
        className="bg-white dark:bg-gray-800 py-20 min-h-screen flex items-center"
      >
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
          <h2
            className={`text-3xl font-bold text-center mb-16 transition-all duration-1000 ${
              (isVisible as any).integrantes
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Integrantes
          </h2>

          <div
            className={`bg-[#990000] p-8  mb-8 hover:shadow-xl transition-all duration-500 ${
              (isVisible as any).integrantes
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
            style={{ transitionDelay: "300ms" }}
          >
            <div className="flex justify-center space-x-8">
              {[1, 2, 3, 4, 5].map((i) => (
                <div key={i} className="text-center group">
                  <div className="w-24 h-24 bg-white rounded-full mx-auto mb-2 group-hover:scale-110 transition-transform duration-300"></div>
                  <p className="text-white text-sm">Integrante {i}</p>
                </div>
              ))}
            </div>
          </div>

          <div className="flex justify-between items-start">
            <div
              className={`max-w-2xl transition-all duration-1000 delay-500 ${
                (isVisible as any).integrantes
                  ? "opacity-100 translate-x-0"
                  : "opacity-0 -translate-x-10"
              }`}
            >
              <p className="text-gray-600 dark:text-gray-300 mb-4 mt-10 text-lg font-bold">
                O projeto foi desenvolvido por um grupo de estudantes
                comprometidos em criar solu√ß√µes inovadoras que conectem a
                pesquisa acad√™mica ao mercado. Cada integrante contribuiu com
                suas habilidades para tornar essa plataforma poss√≠vel.
              </p>
            </div>
            <div
              className={`bg-[#990000] p-8  mb-8 hover:shadow-xl transition-all duration-500 ${
                (isVisible as any).integrantes
                  ? "opacity-100 translate-y-0"
                  : "opacity-0 translate-y-10"
              }`}
              style={{ transitionDelay: "300ms" }}
            >
              <div className="flex justify-center space-x-8">
                {[1].map((i) => (
                  <div key={i} className="text-center group">
                    <div className="w-24 h-24 bg-white rounded-full mx-auto mb-2 group-hover:scale-110 transition-transform duration-300"></div>
                    <p className="text-white text-sm">Orientador</p>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Contato */}
      <section
        id="contato"
        className="bg-gray-50 dark:bg-gray-900 py-20 min-h-screen flex flex-col justify-between"
      >
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center w-full">
          <h2
            className={`text-3xl font-bold mb-8 transition-all duration-1000 ${
              (isVisible as any).contato
                ? "opacity-100 translate-y-0"
                : "opacity-0 translate-y-10"
            }`}
          >
            Contato
          </h2>
          <div className="max-w-2xl mx-auto">
            <p
              className={`text-gray-600 dark:text-gray-300 mb-12 transition-all duration-1000 delay-200 ${
                (isVisible as any).contato
                  ? "opacity-100 translate-y-0"
                  : "opacity-0 translate-y-10"
              }`}
            >
              Tem interesse em conhecer mais sobre o projeto ou falar com a
              nossa equipe? Estamos dispon√≠veis para tirar d√∫vidas, receber
              sugest√µes e compartilhar mais detalhes sobre a plataforma.
            </p>

            <div
              className={`flex justify-center transition-all duration-1000 delay-400 ${
                (isVisible as any).contato
                  ? "opacity-100 scale-100"
                  : "opacity-0 scale-95"
              }`}
            >
              <Image
                src="/images/contato.png"
                alt="Logo"
                width={400}
                height={400}
                quality={100}
                priority
                className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer"
              />
            </div>
          </div>
        </div>

        {/* Footer dentro da se√ß√£o */}
        <div className="bg-[#990000] text-white py-20">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p className="flex items-center justify-center gap-2 mb-4">
              <span className="text-xl">‚úâÔ∏è</span> projetolaverse@gmail.com
            </p>
            <p className="text-sm text-red-200">
              ¬© 2025 Todos os direitos reservados. Este projeto √© resultado do
              Trabalho de Conclus√£o de Curso desenvolvido pelos alunos da
              Universidade Positiva.
            </p>
          </div>
        </div>
      </section>
    </div>
  );
}


### ARQUIVO: aguardandoVerificacao\page.tsx ###
"use client";

import Image from "next/image";
import { useSearchParams } from "next/navigation";
import { motion } from "framer-motion";
import { useEffect, useState } from "react";

export default function AguardandoVerificacao() {
  const params = useSearchParams();
  const [email, setEmail] = useState("");
  const [showChangeEmail, setShowChangeEmail] = useState(false);
  const [newEmail, setNewEmail] = useState("");
  const [message, setMessage] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const [operationType, setOperationType] = useState<
    "resend" | "change" | null
  >(null);

  useEffect(() => {
    const storedEmail = localStorage.getItem("email");
    if (storedEmail) {
      setEmail(storedEmail);
    }
  }, []);

  const handleResendCode = async () => {
    setIsLoading(true);
    setOperationType("resend");
    setMessage("");

    try {
      const res = await fetch(
        `http://localhost:8080/api/email/reenviarVerificacao?email=${encodeURIComponent(
          email
        )}`,
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
        }
      );

      const result = await res.json();

      if (res.ok) {
        setMessage(
          result.message ||
            "C√≥digo reenviado com sucesso! Verifique seu e-mail."
        );
      } else {
        setMessage(result.error || "Erro ao reenviar c√≥digo. Tente novamente.");
      }
    } catch (e) {
      setMessage("Erro ao conectar com o servidor.");
    } finally {
      setIsLoading(false);
      setOperationType(null);
    }
  };

  const handleChangeEmail = async () => {
    if (!newEmail || !newEmail.includes("@")) {
      setMessage("Por favor, insira um e-mail v√°lido.");
      return;
    }

    if (newEmail === email) {
      setMessage("O novo e-mail deve ser diferente do atual.");
      return;
    }

    setIsLoading(true);
    setOperationType("change");
    setMessage("");

    try {
      const res = await fetch(
        `http://localhost:8080/api/email/alterarEmail?emailAntigo=${encodeURIComponent(
          email
        )}&emailNovo=${encodeURIComponent(newEmail)}`,
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
        }
      );

      const result = await res.json();

      if (res.ok) {
        // Atualiza o email no estado e localStorage
        setEmail(newEmail);
        localStorage.setItem("email", newEmail);
        setShowChangeEmail(false);
        setNewEmail("");
        setMessage(
          result.message ||
            "E-mail alterado com sucesso! Verifique seu novo e-mail para o c√≥digo de verifica√ß√£o."
        );
      } else {
        setMessage(result.error || "Erro ao alterar e-mail.");
      }
    } catch (e) {
      setMessage("Erro ao conectar com o servidor.");
    } finally {
      setIsLoading(false);
      setOperationType(null);
    }
  };

  // Fun√ß√£o para ocultar parte do email
  const maskEmail = (email: string) => {
    if (!email) return "seu e-mail";
    const [user, domain] = email.split("@");
    if (user.length <= 3) return `${user[0]}***@${domain}`;
    return `${user.slice(0, 3)}***@${domain}`;
  };

  const getButtonText = () => {
    if (isLoading) {
      if (operationType === "resend") return "Enviando...";
      if (operationType === "change") return "Alterando...";
      return "Processando...";
    }
    return "Reenviar C√≥digo";
  };

  return (
    <div className="min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center px-6 py-12 relative overflow-hidden">
      {/* Elementos decorativos de fundo */}
      <div className="absolute top-0 left-0 w-96 h-96 bg-[#990000] opacity-5 rounded-full blur-3xl"></div>
      <div className="absolute bottom-0 right-0 w-96 h-96 bg-[#990000] opacity-5 rounded-full blur-3xl"></div>

      <motion.div
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.6 }}
        className="w-full max-w-lg"
      >
        {/* Card principal */}
        <div className="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 md:p-12 relative overflow-hidden">
          {/* Detalhe decorativo vermelho no topo */}
          <div className="absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-[#990000] via-red-600 to-[#990000]"></div>

          {/* Logo */}
          <div className="mb-8 flex justify-center">
            <motion.div
              initial={{ scale: 0.8, opacity: 0 }}
              animate={{ scale: 1, opacity: 1 }}
              transition={{ delay: 0.2, duration: 0.5 }}
            >
              <Image
                src="/images/logo_1.png"
                alt="Logo"
                width={180}
                height={180}
                quality={100}
                priority
                className="drop-shadow-lg"
              />
            </motion.div>
          </div>

          {/* √çcone de email */}
          <motion.div
            initial={{ scale: 0 }}
            animate={{ scale: 1 }}
            transition={{ delay: 0.4, type: "spring", stiffness: 200 }}
            className="mb-6 flex justify-center"
          >
            <div className="relative">
              <div className="w-20 h-20 rounded-full bg-red-50 dark:bg-red-900/20 flex items-center justify-center">
                <svg
                  className="w-10 h-10 text-[#990000] dark:text-red-400"
                  fill="none"
                  stroke="currentColor"
                  strokeWidth={2}
                  viewBox="0 0 24 24"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                  />
                </svg>
              </div>
              {/* Pulse ring */}
              <div className="absolute inset-0 rounded-full bg-[#990000] opacity-20 animate-ping"></div>
            </div>
          </motion.div>

          {/* T√≠tulo */}
          <h1 className="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4 text-center">
            Verifique seu e-mail
          </h1>

          {/* Descri√ß√£o */}
          <p className="text-gray-600 dark:text-gray-300 text-center leading-relaxed mb-6">
            Enviamos um link de confirma√ß√£o para
            <br />
            <span className="font-semibold text-[#990000] dark:text-red-400 inline-block mt-2">
              {maskEmail(email)}
            </span>
          </p>

          {/* Mensagem de status */}
          {message && (
            <div
              className={`mb-4 p-3 rounded-lg text-center ${
                message.includes("sucesso") || message.includes("enviado")
                  ? "bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-800"
                  : "bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 border border-red-200 dark:border-red-800"
              }`}
            >
              {message}
            </div>
          )}

          {/* Formul√°rio para alterar email */}
          {showChangeEmail && (
            <motion.div
              initial={{ opacity: 0, height: 0 }}
              animate={{ opacity: 1, height: "auto" }}
              className="mb-4 space-y-3"
            >
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                  Novo e-mail
                </label>
                <input
                  type="email"
                  placeholder="Digite seu novo e-mail"
                  value={newEmail}
                  onChange={(e) => setNewEmail(e.target.value)}
                  className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#990000] dark:bg-gray-700 dark:text-white"
                />
              </div>
              <div className="flex gap-2">
                <button
                  onClick={() => {
                    setShowChangeEmail(false);
                    setNewEmail("");
                    setMessage("");
                  }}
                  className="flex-1 px-4 py-2 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer"
                  disabled={isLoading}
                >
                  Cancelar
                </button>
                <button
                  onClick={handleChangeEmail}
                  className="flex-1 px-4 py-2 bg-[#990000] text-white rounded-lg hover:bg-red-800 disabled:opacity-50 cursor-pointer"
                  disabled={isLoading}
                >
                  {isLoading && operationType === "change"
                    ? "Alterando..."
                    : "Alterar E-mail"}
                </button>
              </div>
            </motion.div>
          )}

          {/* Instru√ß√µes */}
          <div className="bg-gradient-to-br from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20 rounded-xl p-6 mb-6 border border-red-100 dark:border-red-800">
            <p className="text-gray-700 dark:text-gray-300 text-sm text-center leading-relaxed">
              Clique no link recebido para confirmar seu cadastro e ativar sua
              conta. O link √© v√°lido por 24 horas.
            </p>
          </div>

          {/* Bot√µes de a√ß√£o */}
          <div className="flex flex-col gap-3 mb-4">
            <button
              onClick={handleResendCode}
              disabled={isLoading}
              className="w-full px-4 py-2 bg-[#990000] text-white rounded-lg hover:bg-red-800 disabled:opacity-50 transition-colors cursor-pointer"
            >
              {getButtonText()}
            </button>

            {!showChangeEmail && (
              <button
                onClick={() => setShowChangeEmail(true)}
                disabled={isLoading}
                className="w-full px-4 py-2 text-[#990000] dark:text-red-400 border border-[#990000] dark:border-red-400 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 disabled:opacity-50 transition-colors cursor-pointer"
              >
                Alterar E-mail
              </button>
            )}
          </div>

          {/* Nota de rodap√© */}
          <div className="pt-6 border-t border-gray-100 dark:border-gray-700">
            <p className="text-xs text-gray-500 dark:text-gray-400 text-center leading-relaxed">
              N√£o recebeu o e-mail? Verifique sua pasta de spam ou lixo
              eletr√¥nico.
            </p>
          </div>
        </div>

        {/* Link de suporte */}
        <p className="text-center mt-6 text-sm text-gray-500 dark:text-gray-400">
          Precisa de ajuda?{" "}
          <a
            href="#"
            className="text-[#990000] dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 font-medium transition cursor-pointer"
          >
            Entre em contato
          </a>
        </p>
      </motion.div>
    </div>
  );
}


### ARQUIVO: buscar\page.tsx ###
"use client";

import { useState, useEffect, useRef } from "react";
import LayoutWrapper from "../components/LayoutWrapper";
import {
  Search,
  X,
  User,
  Building,
  MapPin,
  Bookmark,
  Heart,
  Filter,
} from "lucide-react";
import { useRouter } from "next/navigation";

interface ResultadoBusca {
  id: number;
  nome: string;
  tipo: "pesquisador" | "empresa";
  area: string;
  localizacao?: string;
  tags?: string[];
  especialidades?: string[];
}

export default function Buscar() {
  const [termoBusca, setTermoBusca] = useState("");
  const [resultados, setResultados] = useState<ResultadoBusca[]>([]);
  const [resultadosFiltrados, setResultadosFiltrados] = useState<
    ResultadoBusca[]
  >([]);
  const [carregando, setCarregando] = useState(false);
  const [mostrarResultados, setMostrarResultados] = useState(false);
  const [filtroTipo, setFiltroTipo] = useState<
    "todos" | "pesquisador" | "empresa"
  >("todos");
  const [filtroArea, setFiltroArea] = useState("todas");
  const router = useRouter();
  const searchRef = useRef<HTMLDivElement>(null);

  // üî• ADICIONE ESTE USEEFFECT
  useEffect(() => {
    const html = document.documentElement;
    const savedTheme = localStorage.getItem("theme");

    if (savedTheme === "dark") {
      html.classList.add("dark");
      html.style.colorScheme = "dark";
      document.body.style.backgroundColor = "#111827";
    } else {
      html.classList.remove("dark");
      html.style.colorScheme = "light";
      document.body.style.backgroundColor = "#ffffff";
    }
  }, []);

  const mockResultados: ResultadoBusca[] = [
    {
      id: 1,
      nome: "Dr. Carlos Silva",
      tipo: "pesquisador",
      area: "Intelig√™ncia Artificial",
      localizacao: "S√£o Paulo, SP",
      tags: ["Machine Learning", "Deep Learning", "Python"],
      especialidades: ["AI", "Data Science"],
    },
    {
      id: 2,
      nome: "Tech Solutions Ltda",
      tipo: "empresa",
      area: "Desenvolvimento de Software",
      localizacao: "Curitiba, PR",
      tags: ["SaaS", "Cloud Computing", "Mobile"],
      especialidades: ["Tecnologia", "Inova√ß√£o"],
    },
    {
      id: 3,
      nome: "Dra. Maria Santos",
      tipo: "pesquisador",
      area: "Ci√™ncia de Dados",
      localizacao: "Rio de Janeiro, RJ",
      tags: ["Big Data", "Python", "Estat√≠stica"],
      especialidades: ["Data Analysis", "BI"],
    },
    {
      id: 4,
      nome: "Inova Tech",
      tipo: "empresa",
      area: "Consultoria em TI",
      localizacao: "Belo Horizonte, MG",
      tags: ["Consultoria", "Digital Transformation", "IT"],
      especialidades: ["Consultoria", "Transforma√ß√£o Digital"],
    },
    {
      id: 5,
      nome: "Dr. Jo√£o Pereira",
      tipo: "pesquisador",
      area: "Seguran√ßa da Informa√ß√£o",
      localizacao: "Porto Alegre, RS",
      tags: ["Cybersecurity", "Network Security", "Encryption"],
      especialidades: ["Security", "Networking"],
    },
  ];

  const areasUnicas = [...new Set(mockResultados.map((item) => item.area))];

  useEffect(() => {
    setResultados(mockResultados);
    setResultadosFiltrados(mockResultados);
  }, []);

  useEffect(() => {
    filtrarResultados();
  }, [termoBusca, filtroTipo, filtroArea, resultados]);

  const filtrarResultados = () => {
    let filtrados = resultados;

    if (filtroTipo !== "todos") {
      filtrados = filtrados.filter((item) => item.tipo === filtroTipo);
    }

    if (filtroArea !== "todas") {
      filtrados = filtrados.filter((item) => item.area === filtroArea);
    }

    if (termoBusca.trim()) {
      const termo = termoBusca.toLowerCase();
      filtrados = filtrados.filter(
        (item) =>
          item.nome.toLowerCase().includes(termo) ||
          item.area.toLowerCase().includes(termo) ||
          item.tags?.some((tag) => tag.toLowerCase().includes(termo)) ||
          item.especialidades?.some((esp) =>
            esp.toLowerCase().includes(termo)
          ) ||
          item.localizacao?.toLowerCase().includes(termo)
      );
    }

    setResultadosFiltrados(filtrados);
  };

  const handleBuscar = async () => {
    if (!termoBusca.trim()) {
      setMostrarResultados(false);
      return;
    }

    setCarregando(true);
    setMostrarResultados(true);

    setTimeout(() => {
      filtrarResultados();
      setCarregando(false);
    }, 500);
  };

  const limparBusca = () => {
    setTermoBusca("");
    setMostrarResultados(false);
    setResultadosFiltrados(resultados);
  };

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === "Enter") {
      handleBuscar();
    }
  };

  const handleCurtir = (id: number, tipo: string) => {
    const listaCurtidos = JSON.parse(localStorage.getItem("curtidos") || "[]");
    const itemId = `${tipo}-${id}`;

    if (listaCurtidos.includes(itemId)) {
      const novaLista = listaCurtidos.filter((item: string) => item !== itemId);
      localStorage.setItem("curtidos", JSON.stringify(novaLista));
    } else {
      listaCurtidos.push(itemId);
      localStorage.setItem("curtidos", JSON.stringify(listaCurtidos));
    }

    window.dispatchEvent(new Event("favoritosAtualizados"));
  };

  const handleSalvar = (id: number, tipo: string) => {
    const listaSalvos = JSON.parse(localStorage.getItem("salvos") || "[]");
    const itemId = `${tipo}-${id}`;

    if (listaSalvos.includes(itemId)) {
      const novaLista = listaSalvos.filter((item: string) => item !== itemId);
      localStorage.setItem("salvos", JSON.stringify(novaLista));
    } else {
      listaSalvos.push(itemId);
      localStorage.setItem("salvos", JSON.stringify(listaSalvos));
    }
  };

  const handleVerPerfil = (resultado: ResultadoBusca) => {
    if (resultado.tipo === "pesquisador") {
      router.push(`/perfilPesquisador/${resultado.id}`);
    } else {
      router.push(`/perfilEmpresa/${resultado.id}`);
    }
  };

  const isCurtido = (id: number, tipo: string) => {
    const listaCurtidos = JSON.parse(localStorage.getItem("curtidos") || "[]");
    return listaCurtidos.includes(`${tipo}-${id}`);
  };

  const isSalvo = (id: number, tipo: string) => {
    const listaSalvos = JSON.parse(localStorage.getItem("salvos") || "[]");
    return listaSalvos.includes(`${tipo}-${id}`);
  };

  useEffect(() => {
    function handleClickOutside(event: MouseEvent) {
      if (
        searchRef.current &&
        !searchRef.current.contains(event.target as Node)
      ) {
        setMostrarResultados(false);
      }
    }

    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, []);

  return (
    <LayoutWrapper>
      <div className="p-4 md:p-6 bg-gray-100 dark:bg-gray-900 min-h-screen">
        <div className="max-w-6xl mx-auto">
          <h1 className="text-2xl md:text-3xl font-bold text-[#990000] dark:text-red-400 mb-6">
            Buscar
          </h1>

          <div className="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 md:p-6 mb-6">
            <div className="relative mb-4" ref={searchRef}>
              <div className="flex gap-2">
                <div className="flex-1 relative">
                  <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" />
                  <input
                    type="text"
                    placeholder="Buscar por pesquisadores, empresas, tags, √°reas..."
                    value={termoBusca}
                    onChange={(e) => setTermoBusca(e.target.value)}
                    onKeyPress={handleKeyPress}
                    className="w-full pl-10 pr-10 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#990000] dark:bg-gray-700 dark:text-white"
                  />
                  {termoBusca && (
                    <button
                      onClick={limparBusca}
                      className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"
                    >
                      <X size={20} />
                    </button>
                  )}
                </div>
                <button
                  onClick={handleBuscar}
                  disabled={carregando}
                  className="bg-[#990000] text-white px-6 py-3 rounded-lg hover:bg-red-800 disabled:opacity-50 cursor-pointer"
                >
                  {carregando ? "Buscando..." : "Buscar"}
                </button>
              </div>
            </div>

            <div className="flex flex-wrap gap-4 mb-4">
              <div className="flex items-center space-x-2">
                <Filter className="text-gray-400" />
                <span className="text-gray-700 dark:text-gray-300 text-sm">
                  Filtrar por:
                </span>
                <select
                  value={filtroTipo}
                  onChange={(e) => setFiltroTipo(e.target.value as any)}
                  className="border border-gray-300 dark:border-gray-600 rounded px-3 py-2 dark:bg-gray-700 dark:text-white text-sm cursor-pointer"
                >
                  <option value="todos">Todos</option>
                  <option value="pesquisador">Pesquisadores</option>
                  <option value="empresa">Empresas</option>
                </select>
              </div>

              <div className="flex items-center space-x-2">
                <select
                  value={filtroArea}
                  onChange={(e) => setFiltroArea(e.target.value)}
                  className="border border-gray-300 dark:border-gray-600 rounded px-3 py-2 dark:bg-gray-700 dark:text-white text-sm cursor-pointer"
                >
                  <option value="todas">Todas as √°reas</option>
                  {areasUnicas.map((area) => (
                    <option key={area} value={area}>
                      {area}
                    </option>
                  ))}
                </select>
              </div>
            </div>

            {mostrarResultados && (
              <div className="mt-4">
                <div className="flex justify-between items-center mb-4">
                  <h3 className="text-lg font-semibold text-gray-800 dark:text-white">
                    Resultados da busca {termoBusca && `para "${termoBusca}"`}
                  </h3>
                  <span className="text-sm text-gray-600 dark:text-gray-400">
                    {resultadosFiltrados.length} resultado(s) encontrado(s)
                  </span>
                </div>

                {carregando ? (
                  <div className="text-center py-8">
                    <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-[#990000] mx-auto"></div>
                    <p className="mt-4 text-gray-600 dark:text-gray-400">
                      Buscando...
                    </p>
                  </div>
                ) : resultadosFiltrados.length > 0 ? (
                  <div className="grid gap-4 md:grid-cols-2">
                    {resultadosFiltrados.map((resultado) => (
                      <div
                        key={`${resultado.tipo}-${resultado.id}`}
                        className="border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow bg-white dark:bg-gray-800"
                      >
                        <div className="flex justify-between items-start mb-3">
                          <div className="flex items-center space-x-3">
                            <div
                              className={`p-2 rounded-full ${
                                resultado.tipo === "pesquisador"
                                  ? "bg-blue-100 dark:bg-blue-900"
                                  : "bg-green-100 dark:bg-green-900"
                              }`}
                            >
                              {resultado.tipo === "pesquisador" ? (
                                <User className="w-5 h-5 text-blue-600 dark:text-blue-400" />
                              ) : (
                                <Building className="w-5 h-5 text-green-600 dark:text-green-400" />
                              )}
                            </div>
                            <div>
                              <h4 className="font-semibold text-gray-900 dark:text-white">
                                {resultado.nome}
                              </h4>
                              <p className="text-sm text-gray-600 dark:text-gray-400">
                                {resultado.area}
                              </p>
                            </div>
                          </div>
                          <div className="flex space-x-2">
                            <button
                              onClick={() =>
                                handleCurtir(resultado.id, resultado.tipo)
                              }
                              className={`p-1 rounded-full ${
                                isCurtido(resultado.id, resultado.tipo)
                                  ? "bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-400"
                                  : "bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"
                              } cursor-pointer`}
                            >
                              <Heart
                                className="w-4 h-4"
                                fill={
                                  isCurtido(resultado.id, resultado.tipo)
                                    ? "currentColor"
                                    : "none"
                                }
                              />
                            </button>
                            <button
                              onClick={() =>
                                handleSalvar(resultado.id, resultado.tipo)
                              }
                              className={`p-1 rounded-full ${
                                isSalvo(resultado.id, resultado.tipo)
                                  ? "bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400"
                                  : "bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"
                              } cursor-pointer`}
                            >
                              <Bookmark
                                className="w-4 h-4"
                                fill={
                                  isSalvo(resultado.id, resultado.tipo)
                                    ? "currentColor"
                                    : "none"
                                }
                              />
                            </button>
                          </div>
                        </div>

                        {resultado.localizacao && (
                          <div className="flex items-center text-sm text-gray-600 dark:text-gray-400 mb-2">
                            <MapPin className="w-4 h-4 mr-1" />
                            {resultado.localizacao}
                          </div>
                        )}

                        {resultado.tags && resultado.tags.length > 0 && (
                          <div className="flex flex-wrap gap-1 mb-3">
                            {resultado.tags.slice(0, 3).map((tag, index) => (
                              <span
                                key={index}
                                className="px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs rounded-full"
                              >
                                {tag}
                              </span>
                            ))}
                            {resultado.tags.length > 3 && (
                              <span className="px-2 py-1 text-xs text-gray-500 dark:text-gray-400">
                                +{resultado.tags.length - 3}
                              </span>
                            )}
                          </div>
                        )}

                        <button
                          onClick={() => handleVerPerfil(resultado)}
                          className="w-full mt-2 bg-[#990000] text-white py-2 rounded-lg hover:bg-red-800 transition-colors cursor-pointer"
                        >
                          Ver Perfil
                        </button>
                      </div>
                    ))}
                  </div>
                ) : (
                  <div className="text-center py-8">
                    <p className="text-gray-600 dark:text-gray-400">
                      Nenhum resultado encontrado para sua busca.
                    </p>
                  </div>
                )}
              </div>
            )}
          </div>

          {!mostrarResultados && (
            <div className="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
              <h3 className="text-lg font-semibold text-gray-800 dark:text-white mb-4">
                Sugest√µes de busca
              </h3>
              <div className="flex flex-wrap gap-2">
                {[
                  "Intelig√™ncia Artificial",
                  "Data Science",
                  "Desenvolvimento Web",
                  "Cloud Computing",
                  "Machine Learning",
                  "UX/UI Design",
                ].map((sugestao) => (
                  <button
                    key={sugestao}
                    onClick={() => {
                      setTermoBusca(sugestao);
                      handleBuscar();
                    }}
                    className="px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm cursor-pointer"
                  >
                    {sugestao}
                  </button>
                ))}
              </div>
            </div>
          )}
        </div>
      </div>
    </LayoutWrapper>
  );
}


### ARQUIVO: cadastroEmpresa\CompanyRegistration.tsx ###
"use client";

import { useRouter } from "next/navigation";
import Image from "next/image";
import React, { useState } from "react";

export default function CompanyRegistration() {
  const router = useRouter();

  // Aba ativa
  const [abaAtiva, setAbaAtiva] = useState("empresa");

  // Estados para cada campo
  const [nomeComercial, setEmpresa] = useState("");
  const [cnpj, setCNPJ] = useState("");
  const [nomeRegistro, setNomeRegistro] = useState("");
  const [telefone, setTelefone] = useState("");
  const [email, setEmail] = useState("");
  const [site, setSite] = useState("");
  const [setor, setSetor] = useState("");
  const [frase, setFrase] = useState("");
  const [textoEmpresa, setTextoEmpresa] = useState("");

  // Endere√ßo
  const [logradouro, setLogradouro] = useState("");
  const [bairro, setBairro] = useState("");
  const [numeroEndereco, setNumero] = useState("");
  const [cidade, setCidade] = useState("");
  const [estado, setEstado] = useState("");
  const [cep, setCep] = useState("");

  // M√°scara para telefone
  const handleTelefoneChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    let value = e.target.value.replace(/\D/g, "");
    if (value.length > 11) value = value.slice(0, 11);
    value = value.replace(/^(\d{2})(\d)/g, "($1) $2");
    value = value.replace(/(\d{5})(\d)/, "$1-$2");
    setTelefone(value);
  };

  //Fun√ß√£o que preenche as informa√ß√µes de endere√ßo com base no cep
  const buscarCep = async (valor: string) => {
    const cepFormatado = valor.replace(/\D/g, ""); // remove n√£o num√©ricos
    setCep(valor);

    if (cepFormatado.length === 8) {
      // s√≥ chama API se tiver 8 d√≠gitos
      try {
        const res = await fetch(
          `https://viacep.com.br/ws/${cepFormatado}/json/`
        );
        const data = await res.json();

        if (!data.erro) {
          setLogradouro(data.logradouro || "");
          setBairro(data.bairro || ""); // <- corrigido
          setCidade(data.localidade || ""); // <- cidade
          setEstado(data.uf || ""); // <- estado
        } else {
          alert("CEP n√£o encontrado!");
        }
      } catch (error) {
        console.error("Erro ao buscar CEP:", error);
      }
    }
  };

  // Fun√ß√£o para enviar os dados ao backend
  const handleSubmit = async () => {
    const dados = {
      nomeComercial,
      nomeRegistro,
      cnpj,
      telefone,
      email,
      site,
      setor,
      frase,
      textoEmpresa,
      logradouro,
      numeroEndereco,
      cidade,
      estado,
      cep,
      bairro,
    };

    const token = localStorage.getItem("token");

    try {
      const res = await fetch(
        "http://localhost:8080/api/empresas/salvarEmpresa",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
          body: JSON.stringify(dados),
        }
      );

      if (res.ok) {
        const empresaCriada = await res.json(); //Back retorna o id cadastrado
        alert("Empresa cadastrada com sucesso!");
        console.log(token);

        if (token != null) {
          localStorage.setItem("token", token);
        }

        router.push(`/perfilEmpresa/${empresaCriada.id}`); // vai direto para o perfil certo
      } else {
        alert("Erro ao cadastrar a empresa.");
      }
    } catch (error) {
      console.error(error);
      alert("Erro na requisi√ß√£o.");
    }
  };

  // Valida√ß√£o da primeira aba antes de prosseguir
  const handleNext = () => {
    if (
      !nomeComercial ||
      !nomeRegistro ||
      !cnpj ||
      !telefone ||
      !email ||
      !setor
    ) {
      alert("Preencha os campos obrigat√≥rios da Empresa antes de continuar!");
      return;
    }
    setAbaAtiva("endereco");
  };

  const handleCNPJChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    let valor = e.target.value.replace(/\D/g, ""); // remove tudo que n√£o for n√∫mero
    if (valor.length > 14) valor = valor.slice(0, 14); // limita 14 d√≠gitos

    // aplica a m√°scara 00.000.000/0000-00
    valor = valor.replace(/^(\d{2})(\d)/, "$1.$2");
    valor = valor.replace(/^(\d{2})\.(\d{3})(\d)/, "$1.$2.$3");
    valor = valor.replace(/\.(\d{3})(\d)/, ".$1/$2");
    valor = valor.replace(/(\d{4})(\d)/, "$1-$2");

    setCNPJ(valor);
  };

  return (
    <div className="flex items-center justify-between h-screen bg-gray-100 dark:bg-gray-900">
      {/* MENU LATERAL */}
      <div className="bg-[#990000] w-1/5 h-full flex flex-col items-center relative">
        <h2 className="text-white text-2xl font-bold text-center mt-20 mr-20">
          Criar Conta
        </h2>
        <div className="absolute top-1/2 transform -translate-y-1/2 flex flex-col items-start gap-6">
          {/* Aba Empresa */}
          <div
            className="cursor-pointer"
            onClick={() => setAbaAtiva("empresa")}
          >
            <h2 className="text-white text-lg font-bold">Dados da Empresa</h2>
            {abaAtiva === "empresa" && (
              <div className="bg-white h-0.5 w-full mt-1"></div>
            )}
          </div>

          {/* Aba Endere√ßo */}
          <div
            className="cursor-pointer"
            onClick={() => setAbaAtiva("endereco")}
          >
            <h2 className="text-white text-lg font-bold">Endere√ßo</h2>
            {abaAtiva === "endereco" && (
              <div className="bg-white h-0.5 w-full mt-1"></div>
            )}
          </div>
        </div>
      </div>

      {/* CONTE√öDO */}
      <div className="bg-white dark:bg-gray-800 p-8 shadow-md w-4/5 h-full flex items-center justify-start flex-col overflow-y-auto">
        <Image
          src="/images/logo_1.png"
          alt="Logo"
          width={150}
          height={150}
          quality={100}
          priority
          className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer"
        />

        {/* CONTE√öDO DA ABA EMPRESA */}
        {abaAtiva === "empresa" && (
          <div className="w-full flex flex-col items-center">
            {/* Nome de registro da empresa */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={nomeRegistro}
                onChange={(e) => setNomeRegistro(e.target.value)}
                placeholder=" "
                required
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Nome de Registro *
              </label>
            </div>
            {/* Nome da Empresa */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={nomeComercial}
                onChange={(e) => setEmpresa(e.target.value)}
                placeholder=" "
                required
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Nome Comercial *
              </label>
            </div>

            {/* CNPJ */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={cnpj}
                onChange={handleCNPJChange}
                placeholder=" "
                required
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                CNPJ *
              </label>
            </div>

            {/* Telefone + Email */}
            <div className="flex gap-4 mt-8 w-2/3">
              <div className="relative w-1/3">
                <input
                  type="text"
                  value={telefone}
                  onChange={handleTelefoneChange}
                  placeholder=" "
                  required
                  className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                    focus:border-red-700 focus:outline-none focus:ring-0
                                    text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                    peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                    peer-placeholder-shown:top-2
                                    peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  Telefone *
                </label>
              </div>
              <div className="relative w-2/3">
                <input
                  type="text"
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                  placeholder=" "
                  required
                  className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  Email *
                </label>
              </div>
            </div>

            {/* site */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={site}
                onChange={(e) => setSite(e.target.value)}
                placeholder=" "
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Site
              </label>
            </div>

            {/* setor */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={setor}
                onChange={(e) => setSetor(e.target.value)}
                placeholder=" "
                required
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Setor *
              </label>
            </div>

            {/* frase */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={frase}
                onChange={(e) => setFrase(e.target.value)}
                placeholder=" "
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Frase
              </label>
              {/* √çcone de ? */}
              <div className="absolute right-0 top-0 mt-1 flex items-center">
                <span className="group relative cursor-pointer text-gray-500 dark:text-gray-400 font-bold text-lg">
                  ?{/* Tooltip */}
                  <span
                    className="absolute bottom-full mb-2 w-80 left-1/2 -translate-x-1/2 
                                        bg-gray-700 dark:bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 
                                        group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"
                  >
                    Use esse campo para adicionar um texto complementar, um
                    subtitulo que complemente o objetivo da sua empresa!
                  </span>
                </span>
              </div>
            </div>

            {/* texto da empresa */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={textoEmpresa}
                onChange={(e) => setTextoEmpresa(e.target.value)}
                placeholder=" "
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Descri√ß√£o da Empresa
              </label>
              {/* √çcone de ? */}
              <div className="absolute right-0 top-0 mt-1 flex items-center">
                <span className="group relative cursor-pointer text-gray-500 dark:text-gray-400 font-bold text-lg">
                  ?{/* Tooltip */}
                  <span
                    className="absolute bottom-full mb-2 w-80 left-1/2 -translate-x-1/2 
                                        bg-gray-700 dark:bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 
                                        group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"
                  >
                    Use esse campo para descrever a sua empresa, todas as
                    informa√ß√µes que voc√™ gostaria que as pessoas vissem sobre.
                  </span>
                </span>
              </div>
            </div>

            {/* Bot√£o de pr√≥ximo */}
            <div className="flex justify-end mt-8 w-2/3">
              <button
                onClick={handleNext}
                className="px-6 py-3 bg-red-700 text-white rounded-lg hover:bg-red-800 transition cursor-pointer"
              >
                Pr√≥ximo
              </button>
            </div>
          </div>
        )}

        {/* CONTE√öDO DA ABA ENDERE√áO */}
        {abaAtiva === "endereco" && (
          <div className="w-full flex flex-col items-center">
            {/* CEP */}
            <div className="relative w-2/3 mt-8">
              <input
                type="text"
                value={cep}
                onChange={(e) => buscarCep(e.target.value)}
                maxLength={9} // formato 00000-000
                placeholder=" "
                required
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                focus:border-red-700 focus:outline-none focus:ring-0
                                text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                peer-placeholder-shown:top-2
                                peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                CEP *
              </label>
            </div>

            {/* Logradouro */}
            <div className="flex gap-4 mt-8 w-2/3">
              <div className="relative w-3/4">
                <input
                  type="text"
                  value={logradouro}
                  onChange={(e) => setLogradouro(e.target.value)}
                  placeholder=" "
                  required
                  className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                    focus:border-red-700 focus:outline-none focus:ring-0
                                    text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                    peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                    peer-placeholder-shown:top-2
                                    peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  Logradouro *
                </label>
              </div>
              <div className="relative w-1/4">
                <input
                  type="text"
                  value={numeroEndereco}
                  onChange={(e) => setNumero(e.target.value)}
                  placeholder=" "
                  required
                  className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                    focus:border-red-700 focus:outline-none focus:ring-0
                                    text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                    peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                    peer-placeholder-shown:top-2
                                    peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  N√∫mero *
                </label>
              </div>
            </div>

            {/* Cidade + Estado */}
            <div className="flex gap-4 mt-8 w-2/3">
              <div className="relative w-1/3">
                <input
                  type="text"
                  value={bairro}
                  onChange={(e) => setBairro(e.target.value)}
                  placeholder=" "
                  required
                  className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                    focus:border-red-700 focus:outline-none focus:ring-0
                                    text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                    peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                    peer-placeholder-shown:top-2
                                    peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  Bairro *
                </label>
              </div>

              <div className="relative w-1/3">
                <input
                  type="text"
                  value={cidade}
                  onChange={(e) => setCidade(e.target.value)}
                  placeholder=" "
                  required
                  className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                    focus:border-red-700 focus:outline-none focus:ring-0
                                    text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                    peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                    peer-placeholder-shown:top-2
                                    peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  Cidade *
                </label>
              </div>

              <div className="relative w-1/3">
                <input
                  type="text"
                  value={estado}
                  onChange={(e) => setEstado(e.target.value)}
                  placeholder=" "
                  required
                  className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-800
                                    focus:border-red-700 focus:outline-none focus:ring-0
                                    text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-0 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                    peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                    peer-placeholder-shown:top-2
                                    peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  Estado *
                </label>
              </div>
            </div>

            {/* Bot√£o de cadastrar */}
            <div className="flex justify-end mt-8 w-2/3">
              <button
                onClick={handleSubmit}
                className="px-6 py-3 bg-red-700 text-white rounded-lg hover:bg-red-800 transition cursor-pointer"
              >
                Cadastrar
              </button>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}


### ARQUIVO: cadastroEmpresa\page.tsx ###
import { Suspense } from 'react';
import CompanyRegistration from './CompanyRegistration';

export default function Inicio() {
  return (
        <div>
          <Suspense fallback={<p>Carregando...</p>}>
            <CompanyRegistration />
          </Suspense>
        </div>
      );
}


### ARQUIVO: components\LayoutWrapper.tsx ###
"use client";
import { ReactNode } from "react";
import MenuLateral from "./MenuLateral";
import { useSidebar } from "../contexts/SidebarContext";

interface LayoutWrapperProps {
  children: ReactNode;
}

export default function LayoutWrapper({ children }: LayoutWrapperProps) {
  const { isCollapsed, isMobile } = useSidebar();

  const mainMargin = isCollapsed
    ? isMobile
      ? "ml-0"
      : "md:ml-20"
    : "md:ml-64";

  return (
    <div className="min-h-screen bg-white dark:bg-gray-900 flex transition-colors duration-300">
      <MenuLateral />
      <main
        className={`flex-1 transition-all duration-300 ${mainMargin} w-full min-h-screen bg-white dark:bg-gray-900`}
      >
        {children}
      </main>
    </div>
  );
}


### ARQUIVO: components\MenuLateral.tsx ###
"use client";
import Image from "next/image";
import {
  Home,
  User,
  Settings,
  LogOut,
  ChevronLeft,
  ChevronRight,
  Users,
  Bookmark,
  Search,
  Building,
  Moon,
  Sun,
} from "lucide-react";
import { useRouter, usePathname } from "next/navigation";
import { useState, useEffect, useContext } from "react";
import { useSidebar } from "../contexts/SidebarContext";
import { useUser } from "../contexts/UserContext";

// Hook seguro para tema
const useThemeSafe = () => {
  const [isDarkMode, setIsDarkMode] = useState(false);
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
    const savedTheme = localStorage.getItem("theme");
    const shouldBeDark = savedTheme === "dark";
    setIsDarkMode(shouldBeDark);
  }, []);

  const toggleTheme = () => {
    const newDarkMode = !isDarkMode;
    setIsDarkMode(newDarkMode);

    const html = document.documentElement;
    if (newDarkMode) {
      html.classList.add("dark");
      html.style.colorScheme = "dark";
    } else {
      html.classList.remove("dark");
      html.style.colorScheme = "light";
    }

    localStorage.setItem("theme", newDarkMode ? "dark" : "light");

    // Disparar evento para sincronizar com outros componentes
    window.dispatchEvent(
      new CustomEvent("themeChanged", {
        detail: { isDark: newDarkMode },
      })
    );
  };

  return { isDarkMode, toggleTheme, mounted };
};

export default function MenuLateral() {
  const router = useRouter();
  const pathname = usePathname();
  const { isCollapsed, isMobile, toggleSidebar } = useSidebar();
  const { userData, logout } = useUser();
  const { isDarkMode, toggleTheme, mounted } = useThemeSafe();

  // Sincronizar tema quando mudar em outras abas
  useEffect(() => {
    const handleThemeChanged = (e: CustomEvent) => {
      const { isDark } = e.detail;
      // Atualizar o estado local se necess√°rio
      if (isDark !== isDarkMode) {
        toggleTheme(); // Isso vai atualizar o estado
      }
    };

    window.addEventListener(
      "themeChanged",
      handleThemeChanged as EventListener
    );

    return () => {
      window.removeEventListener(
        "themeChanged",
        handleThemeChanged as EventListener
      );
    };
  }, [isDarkMode, toggleTheme]);

  const handleLogout = () => {
    logout();
    router.push("/login");
  };

  const isActive = (path: string) => {
    return pathname === path;
  };

  const isProfileActive = () => {
    return (
      pathname.includes("/perfil") ||
      pathname.includes("/telaPerfil") ||
      pathname.includes("/telaEdicao")
    );
  };

  const baseMenuItems = [
    { icon: Home, label: "In√≠cio", path: "/home", active: isActive("/home") },
    {
      icon: Search,
      label: "Buscar",
      path: "/buscar",
      active: isActive("/buscar"),
    },
    {
      icon: Users,
      label: "Pesquisadores",
      path: "/pesquisadores",
      active: isActive("/pesquisadores"),
    },
  ];

  const pesquisadorMenuItems = [
    {
      icon: Bookmark,
      label: "Listas",
      path: "/gerenciarListas",
      active: isActive("/gerenciarListas"),
    },
    {
      icon: User,
      label: "Meu Perfil",
      path: "/telaPerfil",
      active: isProfileActive(),
    },
  ];

  const empresaMenuItems = [
    {
      icon: Building,
      label: "Minha Empresa",
      path: "/perfilEmpresa",
      active:
        pathname.includes("/perfilEmpresa") ||
        pathname.includes("/edicaoEmpresa"),
    },
  ];

  const menuItems = [
    ...baseMenuItems,
    ...(userData?.tipo === "empresa" ? empresaMenuItems : pesquisadorMenuItems),
  ];

  const settingsItems = [
    {
      icon: Settings,
      label: "Configura√ß√µes",
      path: "/configuracoes",
      active: isActive("/configuracoes"),
    },
  ];

  const handleNavigation = (path: string) => {
    const validPaths = [
      "/home",
      "/buscar",
      "/pesquisadores",
      "/gerenciarListas",
      "/telaPerfil",
      "/perfilEmpresa",
      "/configuracoes",
    ];

    if (validPaths.includes(path)) {
      router.push(path);
    } else {
      router.push("/home");
    }

    if (isMobile) {
      toggleSidebar();
    }
  };

  const handleThemeToggle = () => {
    toggleTheme();
  };

  if (!mounted) {
    return (
      <div className="fixed left-0 top-0 h-screen bg-white dark:bg-gray-800 shadow-lg z-40 w-20 md:w-20 flex flex-col border-r border-gray-200 dark:border-gray-700 overflow-hidden">
        <div className="flex items-center justify-center p-4 border-b border-gray-200 dark:border-gray-700 min-h-[73px]">
          <div className="animate-pulse bg-gray-300 dark:bg-gray-600 w-10 h-10 rounded-lg"></div>
        </div>
      </div>
    );
  }

  return (
    <>
      {/* Sidebar */}
      <div
        className={`
        fixed left-0 top-0 h-screen bg-white dark:bg-gray-800 shadow-lg z-40
        transition-all duration-300 ease-in-out
        ${isCollapsed ? "w-0 md:w-20" : "w-64"}
        ${isMobile && !isCollapsed ? "w-64" : ""}
        flex flex-col border-r border-gray-200 dark:border-gray-700
        overflow-hidden
      `}
      >
        {/* Header com Logo e Bot√£o de Toggle */}
        <div
          className={`flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 min-h-[73px] ${
            isCollapsed ? "px-2" : ""
          }`}
        >
          {!isCollapsed && (
            <div className="flex items-center gap-3">
              <Image
                src="/images/logo.png"
                alt="Logo"
                width={40}
                height={40}
                className="rounded-lg"
              />
              <span className="text-lg font-semibold text-gray-800 dark:text-white">
                LaVerse
              </span>
            </div>
          )}

          {isCollapsed && (
            <div className="flex justify-center w-full">
              <Image
                src="/images/logo.png"
                alt="Logo"
                width={40}
                height={40}
                className="rounded-lg"
              />
            </div>
          )}

          {!isMobile && !isCollapsed && (
            <button
              onClick={toggleSidebar}
              className="p-1.5 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors cursor-pointer"
            >
              <ChevronLeft
                size={16}
                className="text-gray-600 dark:text-gray-300"
              />
            </button>
          )}

          {!isMobile && isCollapsed && (
            <button
              onClick={toggleSidebar}
              className="p-1.5 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors absolute -right-3 top-8 cursor-pointer"
            >
              <ChevronRight
                size={16}
                className="text-gray-600 dark:text-gray-300"
              />
            </button>
          )}

          {isMobile && !isCollapsed && (
            <button
              onClick={toggleSidebar}
              className="p-1.5 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors cursor-pointer"
            >
              <ChevronLeft
                size={16}
                className="text-gray-600 dark:text-gray-300"
              />
            </button>
          )}
        </div>

        {/* Menu Items Principal */}
        <nav className="flex-1 py-4">
          {menuItems.map((item) => {
            const Icon = item.icon;
            return (
              <button
                key={item.path}
                onClick={() => handleNavigation(item.path)}
                className={`
                  w-full flex items-center transition-all duration-200
                  ${
                    item.active
                      ? "text-[#990000] dark:text-red-400 bg-red-50 dark:bg-red-900/20 border-r-2 border-[#990000] dark:border-red-400"
                      : "text-gray-600 dark:text-gray-300 hover:text-[#990000] dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700"
                  }
                  ${
                    isCollapsed
                      ? "justify-center px-2 py-4"
                      : "justify-start px-4 py-3 mb-1"
                  }
                `}
                title={isCollapsed ? item.label : ""}
              >
                <Icon size={24} className="flex-shrink-0" />
                {!isCollapsed && (
                  <span className="ml-3 font-medium">{item.label}</span>
                )}
              </button>
            );
          })}
        </nav>

        {/* Separador */}
        {!isCollapsed && (
          <div className="px-4 py-2">
            <hr className="border-gray-200 dark:border-gray-700" />
          </div>
        )}

        {/* Menu Items de Configura√ß√µes e Sair */}
        <div className="mt-auto">
          {/* Toggle de Tema */}
          <button
            onClick={handleThemeToggle}
            className={`
              w-full flex items-center text-gray-600 dark:text-gray-300 
              hover:text-[#990000] dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200
              ${
                isCollapsed
                  ? "justify-center px-2 py-4"
                  : "justify-start px-4 py-3 mb-1"
              }
            `}
            title={
              isCollapsed ? (isDarkMode ? "Modo Claro" : "Modo Escuro") : ""
            }
          >
            {isDarkMode ? <Sun size={24} /> : <Moon size={24} />}
            {!isCollapsed && (
              <span className="ml-3 font-medium">
                {isDarkMode ? "Modo Claro" : "Modo Escuro"}
              </span>
            )}
          </button>

          {/* Menu Items de Configura√ß√µes */}
          <nav className="py-2">
            {settingsItems.map((item) => {
              const Icon = item.icon;
              return (
                <button
                  key={item.path}
                  onClick={() => handleNavigation(item.path)}
                  className={`
                    w-full flex items-center transition-all duration-200
                    ${
                      item.active
                        ? "text-[#990000] dark:text-red-400 bg-red-50 dark:bg-red-900/20 border-r-2 border-[#990000] dark:border-red-400"
                        : "text-gray-600 dark:text-gray-300 hover:text-[#990000] dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700"
                    }
                    ${
                      isCollapsed
                        ? "justify-center px-2 py-4"
                        : "justify-start px-4 py-3 mb-1"
                    }
                  `}
                  title={isCollapsed ? item.label : ""}
                >
                  <Icon size={24} className="flex-shrink-0" />
                  {!isCollapsed && (
                    <span className="ml-3 font-medium">{item.label}</span>
                  )}
                </button>
              );
            })}
          </nav>

          {/* Bot√£o Sair */}
          <div
            className={`border-t border-gray-200 dark:border-gray-700 ${
              isCollapsed ? "p-2" : "p-4"
            }`}
          >
            <button
              onClick={handleLogout}
              className={`
                w-full flex items-center text-gray-600 dark:text-gray-300 
                hover:text-[#990000] dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200
                rounded-lg
                ${
                  isCollapsed
                    ? "justify-center px-2 py-4"
                    : "justify-start px-4 py-3"
                }
              `}
              title={isCollapsed ? "Sair" : ""}
            >
              <LogOut size={24} className="flex-shrink-0" />
              {!isCollapsed && <span className="ml-3 font-medium">Sair</span>}
            </button>
          </div>
        </div>
      </div>

      {/* Overlay para mobile quando sidebar est√° aberta */}
      {!isCollapsed && isMobile && (
        <div
          className="fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden cursor-pointer"
          onClick={toggleSidebar}
        />
      )}
    </>
  );
}


### ARQUIVO: configuracoes\page.tsx ###
"use client";

import LayoutWrapper from "../components/LayoutWrapper";
import { useState, useEffect } from "react";

export default function Configuracoes() {
  const [isDarkMode, setIsDarkMode] = useState(false);
  const [notificacoes, setNotificacoes] = useState(true);
  const [emailMarketing, setEmailMarketing] = useState(false);
  const [mounted, setMounted] = useState(false);

  // üî• ADICIONE ESTE USEEFFECT
  useEffect(() => {
    const html = document.documentElement;
    const savedTheme = localStorage.getItem("theme");

    if (savedTheme === "dark") {
      html.classList.add("dark");
      html.style.colorScheme = "dark";
      document.body.style.backgroundColor = "#111827";
      setIsDarkMode(true);
    } else {
      html.classList.remove("dark");
      html.style.colorScheme = "light";
      document.body.style.backgroundColor = "#ffffff";
      setIsDarkMode(false);
    }
    setMounted(true);
  }, []);

  const toggleTheme = () => {
    const newDarkMode = !isDarkMode;
    setIsDarkMode(newDarkMode);

    const html = document.documentElement;
    if (newDarkMode) {
      html.classList.add("dark");
      html.style.colorScheme = "dark";
      document.body.style.backgroundColor = "#111827";
    } else {
      html.classList.remove("dark");
      html.style.colorScheme = "light";
      document.body.style.backgroundColor = "#ffffff";
    }

    localStorage.setItem("theme", newDarkMode ? "dark" : "light");

    // Disparar evento para sincronizar com outros componentes
    window.dispatchEvent(
      new CustomEvent("themeChanged", {
        detail: { isDark: newDarkMode },
      })
    );
  };

  // Sincronizar tema quando mudar em outras abas
  useEffect(() => {
    const handleThemeChanged = (e: CustomEvent) => {
      const { isDark } = e.detail;
      if (isDark !== isDarkMode) {
        setIsDarkMode(isDark);
      }
    };

    window.addEventListener(
      "themeChanged",
      handleThemeChanged as EventListener
    );

    return () => {
      window.removeEventListener(
        "themeChanged",
        handleThemeChanged as EventListener
      );
    };
  }, [isDarkMode]);

  if (!mounted) {
    return (
      <LayoutWrapper>
        <div className="p-4 md:p-6 bg-gray-100 dark:bg-gray-900 min-h-screen">
          <div className="max-w-4xl mx-auto">
            <div className="animate-pulse bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
              <div className="h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-4"></div>
              <div className="space-y-4">
                <div className="h-4 bg-gray-200 dark:bg-gray-700 rounded"></div>
                <div className="h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"></div>
              </div>
            </div>
          </div>
        </div>
      </LayoutWrapper>
    );
  }

  return (
    <LayoutWrapper>
      <div className="p-4 md:p-6 bg-gray-100 dark:bg-gray-900 min-h-screen">
        <div className="max-w-4xl mx-auto">
          <h1 className="text-2xl md:text-3xl font-bold text-[#990000] dark:text-red-400 mb-6">
            Configura√ß√µes
          </h1>

          <div className="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 md:p-6">
            <div className="mb-8 pb-6 border-b border-gray-200 dark:border-gray-700">
              <h2 className="text-xl font-semibold text-gray-800 dark:text-white mb-4">
                Apar√™ncia
              </h2>
              <div className="flex items-center justify-between">
                <div>
                  <p className="text-gray-700 dark:text-gray-300 font-medium">
                    Modo Escuro
                  </p>
                  <p className="text-sm text-gray-500 dark:text-gray-400">
                    Alterne entre modo claro e escuro
                  </p>
                </div>
                <button
                  onClick={toggleTheme}
                  className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
                    isDarkMode ? "bg-[#990000]" : "bg-gray-300"
                  } cursor-pointer`}
                >
                  <span
                    className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${
                      isDarkMode ? "translate-x-6" : "translate-x-1"
                    }`}
                  />
                </button>
              </div>
            </div>

            <div className="mb-8 pb-6 border-b border-gray-200 dark:border-gray-700">
              <h2 className="text-xl font-semibold text-gray-800 dark:text-white mb-4">
                Notifica√ß√µes
              </h2>

              <div className="space-y-4">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-gray-700 dark:text-gray-300 font-medium">
                      Notifica√ß√µes do sistema
                    </p>
                    <p className="text-sm text-gray-500 dark:text-gray-400">
                      Receba alertas sobre novas mensagens e atualiza√ß√µes
                    </p>
                  </div>
                  <button
                    onClick={() => setNotificacoes(!notificacoes)}
                    className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
                      notificacoes ? "bg-[#990000]" : "bg-gray-300"
                    } cursor-pointer`}
                  >
                    <span
                      className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${
                        notificacoes ? "translate-x-6" : "translate-x-1"
                      }`}
                    />
                  </button>
                </div>

                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-gray-700 dark:text-gray-300 font-medium">
                      Email marketing
                    </p>
                    <p className="text-sm text-gray-500 dark:text-gray-400">
                      Receba novidades e atualiza√ß√µes por email
                    </p>
                  </div>
                  <button
                    onClick={() => setEmailMarketing(!emailMarketing)}
                    className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
                      emailMarketing ? "bg-[#990000]" : "bg-gray-300"
                    } cursor-pointer`}
                  >
                    <span
                      className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${
                        emailMarketing ? "translate-x-6" : "translate-x-1"
                      }`}
                    />
                  </button>
                </div>
              </div>
            </div>

            <div>
              <h2 className="text-xl font-semibold text-gray-800 dark:text-white mb-4">
                Privacidade
              </h2>
              <div className="space-y-3">
                <button className="w-full text-left p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer">
                  <p className="font-medium text-gray-800 dark:text-white">
                    Exportar meus dados
                  </p>
                  <p className="text-sm text-gray-500 dark:text-gray-400">
                    Baixe uma c√≥pia dos seus dados pessoais
                  </p>
                </button>

                <button className="w-full text-left p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer">
                  <p className="font-medium text-red-600 dark:text-red-400">
                    Excluir minha conta
                  </p>
                  <p className="text-sm text-gray-500 dark:text-gray-400">
                    Remover permanentemente sua conta e dados
                  </p>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </LayoutWrapper>
  );
}


### ARQUIVO: contexts\SidebarContext.tsx ###
"use client";
import React, {
  createContext,
  useContext,
  useState,
  useEffect,
  ReactNode,
} from "react";

interface SidebarContextType {
  isCollapsed: boolean;
  isMobile: boolean;
  toggleSidebar: () => void;
}

const SidebarContext = createContext<SidebarContextType | undefined>(undefined);

export function SidebarProvider({ children }: { children: ReactNode }) {
  const [isCollapsed, setIsCollapsed] = useState(false);
  const [isMobile, setIsMobile] = useState(false);

  useEffect(() => {
    const checkMobile = () => {
      const mobile = window.innerWidth < 768;
      setIsMobile(mobile);
      if (mobile) {
        setIsCollapsed(true);
      }
    };

    checkMobile();
    window.addEventListener("resize", checkMobile);

    return () => window.removeEventListener("resize", checkMobile);
  }, []);

  const toggleSidebar = () => {
    setIsCollapsed(!isCollapsed);
  };

  return (
    <SidebarContext.Provider value={{ isCollapsed, isMobile, toggleSidebar }}>
      {children}
    </SidebarContext.Provider>
  );
}

export function useSidebar() {
  const context = useContext(SidebarContext);
  if (context === undefined) {
    throw new Error("useSidebar must be used within a SidebarProvider");
  }
  return context;
}


### ARQUIVO: contexts\ThemeContext.tsx ###
"use client";

// Re-export para compatibilidade com imports antigos
export { default } from "./ThemeProvider";
export { useTheme } from "./ThemeProvider";


### ARQUIVO: contexts\ThemeProvider.tsx ###
"use client";

import React, {
  createContext,
  useContext,
  useState,
  useEffect,
  ReactNode,
} from "react";

interface ThemeContextType {
  isDarkMode: boolean;
  toggleTheme: () => void;
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

export const useTheme = () => {
  const context = useContext(ThemeContext);
  if (context === undefined) {
    throw new Error("useTheme must be used within a ThemeProvider");
  }
  return context;
};

interface ThemeProviderProps {
  children: ReactNode;
}

export default function ThemeProvider({ children }: ThemeProviderProps) {
  const [isDarkMode, setIsDarkMode] = useState(false);
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
    const savedTheme = localStorage.getItem("theme");
    const systemPrefersDark = window.matchMedia(
      "(prefers-color-scheme: dark)"
    ).matches;

    // Tema padr√£o √© light, s√≥ dark se explicitamente salvo como dark
    const shouldBeDark =
      savedTheme === "dark" || (!savedTheme && systemPrefersDark);

    setIsDarkMode(shouldBeDark);

    // Aplicar o tema ao HTML
    const html = document.documentElement;
    if (shouldBeDark) {
      html.classList.add("dark");
      html.style.colorScheme = "dark";
    } else {
      html.classList.remove("dark");
      html.style.colorScheme = "light";
      // Garantir que o tema light seja salvo como padr√£o se n√£o houver prefer√™ncia
      if (!savedTheme && !systemPrefersDark) {
        localStorage.setItem("theme", "light");
      }
    }
  }, []);

  const toggleTheme = () => {
    const newDarkMode = !isDarkMode;
    setIsDarkMode(newDarkMode);

    const html = document.documentElement;
    if (newDarkMode) {
      html.classList.add("dark");
      html.style.colorScheme = "dark";
    } else {
      html.classList.remove("dark");
      html.style.colorScheme = "light";
    }

    localStorage.setItem("theme", newDarkMode ? "dark" : "light");

    // Disparar evento para sincroniza√ß√£o
    window.dispatchEvent(
      new CustomEvent("themeChanged", {
        detail: { isDark: newDarkMode },
      })
    );
  };

  // Sincronizar tema entre abas
  useEffect(() => {
    const handleStorageChange = (e: StorageEvent) => {
      if (e.key === "theme") {
        const newTheme = e.newValue;
        const shouldBeDark = newTheme === "dark";

        setIsDarkMode(shouldBeDark);

        const html = document.documentElement;
        if (shouldBeDark) {
          html.classList.add("dark");
          html.style.colorScheme = "dark";
        } else {
          html.classList.remove("dark");
          html.style.colorScheme = "light";
        }
      }
    };

    const handleThemeChanged = (e: CustomEvent) => {
      const { isDark } = e.detail;
      setIsDarkMode(isDark);
    };

    window.addEventListener("storage", handleStorageChange);
    window.addEventListener(
      "themeChanged",
      handleThemeChanged as EventListener
    );

    return () => {
      window.removeEventListener("storage", handleStorageChange);
      window.removeEventListener(
        "themeChanged",
        handleThemeChanged as EventListener
      );
    };
  }, []);

  // Evitar hidrata√ß√£o incorreta
  if (!mounted) {
    return (
      <div className="bg-white dark:bg-gray-900 min-h-screen">{children}</div>
    );
  }

  return (
    <ThemeContext.Provider value={{ isDarkMode, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
}


### ARQUIVO: contexts\UserContext.tsx ###
"use client";
import React, {
  createContext,
  useContext,
  useState,
  useEffect,
  ReactNode,
} from "react";

interface PesquisadorData {
  id: number;
  nomePesquisador: string;
  sobrenome: string;
  nomeCompleto: string;
  dataNascimento?: string;
  nacionalidade?: string;
  paisNascimento?: string;
  nomeCitacoesBibliograficas?: string;
  dataAtualizacao?: string;
  horaAtualizacao?: string;
  telefone?: string;
}

interface UserData {
  id: number;
  login: string;
  tipo: string;
  nome?: string;
  email?: string;
  emailVerificado?: boolean;
  fotoPerfil?: string;
  pesquisador?: PesquisadorData;
}

interface UserContextType {
  userData: UserData | null;
  loading: boolean;
  refreshUserData: () => Promise<void>;
  logout: () => void;
  updateUserPhoto: (fotoUrl: string) => void;
  updateUserData: (newData: Partial<UserData>) => void;
}

const UserContext = createContext<UserContextType | undefined>(undefined);

export function UserProvider({ children }: { children: ReactNode }) {
  const [userData, setUserData] = useState<UserData | null>(null);
  const [loading, setLoading] = useState(true);

  const updateUserPhoto = (fotoUrl: string) => {
    if (userData) {
      const updatedUserData = {
        ...userData,
        fotoPerfil: fotoUrl,
      };
      setUserData(updatedUserData);
      localStorage.setItem("userData", JSON.stringify(updatedUserData));
      localStorage.setItem(`userPhoto_${userData.id}`, fotoUrl);
    }
  };

  const updateUserData = (newData: Partial<UserData>) => {
    if (userData) {
      const updatedUserData = {
        ...userData,
        ...newData,
      };
      setUserData(updatedUserData);
      localStorage.setItem("userData", JSON.stringify(updatedUserData));
    }
  };

  const refreshUserData = async () => {
    const token = localStorage.getItem("token");
    const email = localStorage.getItem("email");

    if (!token || !email) {
      setUserData(null);
      setLoading(false);
      return;
    }

    try {
      const userResponse = await fetch(
        `http://localhost:8080/api/usuarios/listarUsuario/${encodeURIComponent(
          email
        )}`,
        {
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
        }
      );

      if (userResponse.ok) {
        const userDataFromApi = await userResponse.json();

        const fotoSalva = localStorage.getItem(
          `userPhoto_${userDataFromApi.id}`
        );

        let userDataCompleto: UserData = {
          ...userDataFromApi,
          nome: userDataFromApi.login,
          fotoPerfil:
            fotoSalva || userDataFromApi.fotoPerfil || "/images/user.png",
        };

        if (userDataFromApi.tipoUsuario?.name === "PESQUISADOR") {
          try {
            const pesquisadorResponse = await fetch(
              `http://localhost:8080/api/pesquisadores/buscarPorUsuario/${userDataFromApi.id}`,
              {
                headers: {
                  "Content-Type": "application/json",
                  Authorization: `Bearer ${token}`,
                },
              }
            );

            if (pesquisadorResponse.ok) {
              const dadosPesquisador = await pesquisadorResponse.json();

              if (dadosPesquisador) {
                const nomeCompleto = `${
                  dadosPesquisador.nomePesquisador || ""
                } ${dadosPesquisador.sobrenome || ""}`.trim();

                userDataCompleto = {
                  ...userDataCompleto,
                  nome: nomeCompleto || userDataFromApi.login,
                  pesquisador: {
                    id: dadosPesquisador.id,
                    nomePesquisador: dadosPesquisador.nomePesquisador,
                    sobrenome: dadosPesquisador.sobrenome,
                    nomeCompleto: nomeCompleto,
                    dataNascimento: dadosPesquisador.dataNascimento,
                    nacionalidade: dadosPesquisador.nacionalidade,
                    paisNascimento: dadosPesquisador.paisNascimento,
                    nomeCitacoesBibliograficas:
                      dadosPesquisador.nomeCitacoesBibliograficas,
                    dataAtualizacao: dadosPesquisador.dataAtualizacao,
                    horaAtualizacao: dadosPesquisador.horaAtualizacao,
                    telefone: dadosPesquisador.telefone,
                  },
                };

                localStorage.setItem("idTag", dadosPesquisador.id.toString());
              }
            }
          } catch (err) {
            console.log(
              "Usu√°rio n√£o √© pesquisador ou dados n√£o encontrados:",
              err
            );
          }
        }

        setUserData(userDataCompleto);
        localStorage.setItem("userData", JSON.stringify(userDataCompleto));
      } else {
        throw new Error("Falha ao carregar dados do usu√°rio");
      }
    } catch (error) {
      console.error("Erro ao carregar dados do usu√°rio:", error);
      const storedData = localStorage.getItem("userData");
      if (storedData) {
        const parsedData = JSON.parse(storedData);
        const fotoSalva = localStorage.getItem(`userPhoto_${parsedData.id}`);
        setUserData({
          ...parsedData,
          fotoPerfil: fotoSalva || parsedData.fotoPerfil || "/images/user.png",
        });
      }
    } finally {
      setLoading(false);
    }
  };

  const logout = () => {
    localStorage.removeItem("token");
    localStorage.removeItem("userEmail");
    localStorage.removeItem("email");
    localStorage.removeItem("usuarioId");
    localStorage.removeItem("idTag");
    localStorage.removeItem("userData");
    setUserData(null);
    window.dispatchEvent(new Event("userLoggedOut"));
  };

  useEffect(() => {
    refreshUserData();
  }, []);

  useEffect(() => {
    const handleUserDataUpdate = () => {
      refreshUserData();
    };

    const handleForceRefresh = () => {
      refreshUserData();
    };

    const handleStorageChange = (e: StorageEvent) => {
      if (e.key === "forceRefresh" || e.key === "userData") {
        refreshUserData();
      }
    };

    window.addEventListener("userDataUpdated", handleUserDataUpdate);
    window.addEventListener("forceRefresh", handleForceRefresh);
    window.addEventListener("storage", handleStorageChange);
    window.addEventListener("userLoggedOut", () => {
      setUserData(null);
      setLoading(false);
    });

    return () => {
      window.removeEventListener("userDataUpdated", handleUserDataUpdate);
      window.removeEventListener("forceRefresh", handleForceRefresh);
      window.removeEventListener("storage", handleStorageChange);
      window.removeEventListener("userLoggedOut", () => {
        setUserData(null);
        setLoading(false);
      });
    };
  }, []);

  return (
    <UserContext.Provider
      value={{
        userData,
        loading,
        refreshUserData,
        logout,
        updateUserPhoto,
        updateUserData,
      }}
    >
      {children}
    </UserContext.Provider>
  );
}

export function useUser() {
  const context = useContext(UserContext);
  if (context === undefined) {
    throw new Error("useUser must be used within a UserProvider");
  }
  return context;
}


### ARQUIVO: criarConta\page.tsx ###
"use client";

import { useRouter } from "next/navigation";
import Image from "next/image";
import { useState } from "react";

export default function Cadastro() {
  const router = useRouter();
  const [abaAtiva, setAbaAtiva] = useState("pesquisador");

  const [email, setEmail] = useState("");
  const [senha, setSenha] = useState("");
  const [confirmarSenha, setConfirmarSenha] = useState("");
  const [erro, setErro] = useState<string | null>(null);
  const [loading, setLoading] = useState(false);

  const validarEmail = (email: string) =>
    /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  const validarSenha = (senha: string) =>
    /^(?=.*[0-9])(?=.*[!@#$%^&*]).{8,}$/.test(senha);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    // Valida√ß√µes
    if (!validarEmail(email)) {
      setErro("Digite um email v√°lido.");
      return;
    }
    if (!validarSenha(senha)) {
      setErro(
        "A senha deve ter no m√≠nimo 8 caracteres, incluir um n√∫mero e um caractere especial."
      );
      return;
    }
    if (senha !== confirmarSenha) {
      setErro("As senhas n√£o coincidem.");
      return;
    }

    setErro(null);
    setLoading(true);

    try {
      const res = await fetch(
        "http://localhost:8080/api/usuarios/salvarUsuario",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            login: email,
            password: senha,
            tipo_usuario: abaAtiva,
            roles: abaAtiva === "pesquisador" ? ["usuario"] : ["empresa"],
          }),
        }
      );

      if (res.ok) {
        const data = await res.json();
        console.log("Conta criada com sucesso:", data);

        const token = data.token;
        localStorage.setItem("token", token.token);
        localStorage.setItem("usuarioId", data.usuarioId);

        if (email) {
          localStorage.setItem("email", email);
        }

        // Salvar dados b√°sicos do usu√°rio no localStorage
        const userData = {
          id: data.usuarioId,
          login: email,
          tipo: abaAtiva,
        };
        localStorage.setItem("userData", JSON.stringify(userData));

        // Disparar evento para atualizar componentes
        window.dispatchEvent(new Event("userDataUpdated"));

        router.push(`/aguardandoVerificacao`);
      } else {
        const errorData = await res.json();
        setErro(errorData.message || "Erro ao criar a conta.");
      }
    } catch (error) {
      console.error("Erro no cadastro:", error);
      setErro("Erro ao conectar com o servidor.");
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="flex flex-col md:flex-row h-screen bg-white dark:bg-gray-900">
      {/* Lado esquerdo: imagem */}
      <div className="hidden md:flex w-1/3 bg-red-800 items-end justify-center overflow-visible">
        <div className="relative h-screen w-[180%]">
          <Image
            src="/images/cadastro.png"
            alt="Cadastro"
            fill
            quality={100}
            priority
            className="object-cover drop-shadow-lg absolute bottom-0"
          />
        </div>
      </div>

      {/* Lado direito: formul√°rio */}
      <div className="flex-1 flex items-start justify-center bg-white dark:bg-gray-900 pt-12 px-4 md:px-0">
        <div className="w-full max-w-md">
          <Image
            src="/images/logo_1.png"
            alt="Logo"
            width={150}
            height={150}
            quality={100}
            priority
            className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer mx-auto"
          />

          <h2 className="text-xl font-semibold mb-8 mt-6 text-center md:text-left dark:text-white">
            Criar Conta
          </h2>

          {/* Abas */}
          <div className="flex space-x-6 mb-6 justify-center md:justify-start">
            <button
              type="button"
              className={`pb-2 ${
                abaAtiva === "pesquisador"
                  ? "border-b-2 border-[#990000] font-semibold text-[#990000] dark:text-red-400"
                  : "text-gray-500 dark:text-gray-400"
              } cursor-pointer`}
              onClick={() => setAbaAtiva("pesquisador")}
            >
              Pesquisador
            </button>
            <button
              type="button"
              className={`pb-2 ${
                abaAtiva === "empresa"
                  ? "border-b-2 border-[#990000] font-semibold text-[#990000] dark:text-red-400"
                  : "text-gray-500 dark:text-gray-400"
              } cursor-pointer`}
              onClick={() => setAbaAtiva("empresa")}
            >
              Empresa
            </button>
          </div>

          {/* Formul√°rio */}
          <form onSubmit={handleSubmit} className="space-y-6">
            <div className="relative">
              <input
                type="email"
                placeholder=" "
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                required
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-900
                           focus:border-red-700 focus:outline-none focus:ring-0
                           text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-2 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                               peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                               peer-placeholder-shown:top-2
                               peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Email*
              </label>
            </div>

            <div className="relative">
              <input
                type="password"
                placeholder=" "
                value={senha}
                onChange={(e) => setSenha(e.target.value)}
                required
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-900
                           focus:border-red-700 focus:outline-none focus:ring-0
                           text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-2 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                               peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                               peer-placeholder-shown:top-2
                               peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Senha*
              </label>
            </div>

            <div className="relative">
              <input
                type="password"
                placeholder=" "
                value={confirmarSenha}
                onChange={(e) => setConfirmarSenha(e.target.value)}
                required
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-900
                           focus:border-red-700 focus:outline-none focus:ring-0
                           text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-2 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                               peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                               peer-placeholder-shown:top-2
                               peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Confirmar Senha*
              </label>
            </div>

            {erro && <p className="text-red-600 text-sm">{erro}</p>}

            <button
              type="submit"
              disabled={loading}
              className="w-full bg-red-800 text-white p-3 rounded-lg hover:bg-red-900 transition disabled:opacity-50 cursor-pointer"
            >
              {loading ? "Criando conta..." : "Criar conta"}
            </button>
          </form>

          <p className="text-sm text-center mt-4 dark:text-gray-400">
            J√° tem uma conta?{" "}
            <a
              href="/login"
              className="text-red-700 dark:text-red-400 font-medium hover:underline"
            >
              Entrar
            </a>
          </p>
        </div>
      </div>
    </div>
  );
}


### ARQUIVO: edicaoEmpresa\CompanyEditForm.tsx ###
"use client";
import React, { useEffect, useState } from "react";
import { User, Camera } from "lucide-react";
import MenuLateral from "../components/MenuLateral";
import { useSearchParams, useRouter } from "next/navigation";
import { useSidebar } from "../contexts/SidebarContext";

export default function CompanyEditForm() {
  const searchParams = useSearchParams();
  const id = searchParams.get("id");
  const router = useRouter();
  const { isCollapsed, isMobile } = useSidebar();

  const mainMargin = isCollapsed
    ? isMobile
      ? "ml-0"
      : "md:ml-20"
    : "md:ml-64";

  const [formData, setFormData] = useState({
    nomeRegistro: "",
    nomeComercial: "",
    cnpj: "",
    telefone: "",
    email: "",
    site: "",
    setor: "Desenvolvimento de Software",
    cep: "",
    logradouro: "",
    numeroEndereco: "",
    bairro: "",
    cidade: "",
    estado: "PR",
    frase: "",
    textoEmpresa: "",
  });

  const [loading, setLoading] = useState(false);

  const token = localStorage.getItem("token");

  // Buscar dados da empresa
  const buscarInfoEmpresa = async () => {
    try {
      const res = await fetch(
        `http://localhost:8080/api/empresas/listarEmpresa/${id}`,
        {
          method: "GET",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
        }
      );
      const data = await res.json();

      setFormData({
        nomeRegistro: data.nomeRegistro || "",
        nomeComercial: data.nomeComercial || "",
        cnpj: data.cnpj || "",
        telefone: data.telefone || "",
        email: data.email || "",
        site: data.site || "",
        setor: data.setor || "Desenvolvimento de Software",
        cep: data.cep || "",
        logradouro: data.logradouro || "",
        numeroEndereco: data.numeroEndereco || "",
        bairro: data.bairro || "",
        cidade: data.cidade || "",
        estado: data.estado || "PR",
        frase: data.frase || "",
        textoEmpresa: data.textoEmpresa || "",
      });
    } catch (error) {
      console.error("Erro ao buscar empresa:", error);
    }
  };

  useEffect(() => {
    if (id) buscarInfoEmpresa();
  }, [id]);

  // Fun√ß√£o geral para atualizar formData
  const handleInputChange = (
    e: React.ChangeEvent<
      HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
    >
  ) => {
    const { name, value } = e.target;
    setFormData((prev) => ({ ...prev, [name]: value }));
  };

  // M√°scara CNPJ
  const handleCNPJChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    let valor = e.target.value.replace(/\D/g, "");
    if (valor.length > 14) valor = valor.slice(0, 14);

    valor = valor.replace(/^(\d{2})(\d)/, "$1.$2");
    valor = valor.replace(/^(\d{2})\.(\d{3})(\d)/, "$1.$2.$3");
    valor = valor.replace(/\.(\d{3})(\d)/, ".$1/$2");
    valor = valor.replace(/(\d{4})(\d)/, "$1-$2");

    setFormData((prev) => ({ ...prev, cnpj: valor }));
  };

  // M√°scara Telefone
  const handleTelefoneChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    let value = e.target.value.replace(/\D/g, "");
    if (value.length > 11) value = value.slice(0, 11);

    value = value.replace(/^(\d{2})(\d)/g, "($1) $2");
    value = value.replace(/(\d{5})(\d)/, "$1-$2");

    setFormData((prev) => ({ ...prev, telefone: value }));
  };

  // M√°scara e busca de CEP
  const handleCepChange = async (e: React.ChangeEvent<HTMLInputElement>) => {
    let valor = e.target.value.replace(/\D/g, "");
    if (valor.length > 8) valor = valor.slice(0, 8);

    let valorFormatado = valor;
    if (valor.length > 5) {
      valorFormatado = valor.replace(/^(\d{5})(\d)/, "$1-$2");
    }

    setFormData((prev) => ({ ...prev, cep: valorFormatado }));

    if (valor.length === 8) {
      try {
        const res = await fetch(`https://viacep.com.br/ws/${valor}/json/`);
        const data = await res.json();
        if (!data.erro) {
          setFormData((prev) => ({
            ...prev,
            logradouro: data.logradouro || "",
            bairro: data.bairro || "",
            cidade: data.localidade || "",
            estado: data.uf || "",
          }));
        } else {
          alert("CEP n√£o encontrado!");
        }
      } catch (err) {
        console.error("Erro ao buscar CEP:", err);
      }
    }
  };

  const handleCancel = () => {
    router.push(`/perfilEmpresa/${id}`);
  };

  const handleSave = async () => {
    setLoading(true);
    try {
      const res = await fetch(
        `http://localhost:8080/api/empresas/alterarEmpresa/${id}`,
        {
          method: "PUT",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(formData),
        }
      );

      if (!res.ok) throw new Error("Erro ao salvar empresa");

      setTimeout(() => {
        router.push(`/perfilEmpresa/${id}`);
      }, 1000);
    } catch (error) {
      console.error(error);
      setLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-gray-100 p-6">
      <MenuLateral />
      <div
        className={`w-4/5 mx-auto bg-white rounded-lg shadow-sm transition-all duration-300 ease-in-out ${mainMargin}`}
      >
        {/* Header */}
        <div className="flex items-center p-6 border-b border-gray-200">
          <div className="w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center mr-6 relative group cursor-pointer">
            <User className="w-8 h-8 text-gray-400" />
            <div className="absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
              <Camera className="w-6 h-6 text-white" />
            </div>
          </div>
          <h1 className="text-2xl font-semibold text-red-600">Editar Perfil</h1>
        </div>

        {/* Form Content */}
        <div className="p-6 space-y-8">
          {/* Informa√ß√µes Principais */}
          <div>
            <h3 className="text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">
              Informa√ß√µes Principais
            </h3>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Nome de Registro
                </label>
                <input
                  type="text"
                  name="nomeRegistro"
                  value={formData.nomeRegistro}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Nome Comercial
                </label>
                <input
                  type="text"
                  name="nomeComercial"
                  value={formData.nomeComercial}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  CNPJ
                </label>
                <input
                  type="text"
                  name="cnpj"
                  value={formData.cnpj}
                  onChange={handleCNPJChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Telefone
                </label>
                <input
                  type="tel"
                  name="telefone"
                  value={formData.telefone}
                  onChange={handleTelefoneChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Email
                </label>
                <input
                  type="email"
                  name="email"
                  value={formData.email}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Site
                </label>
                <input
                  type="url"
                  name="site"
                  value={formData.site}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div className="md:col-span-2">
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Setor
                </label>
                <select
                  name="setor"
                  value={formData.setor}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                >
                  <option value="Desenvolvimento de Software">
                    Desenvolvimento de Software
                  </option>
                  <option value="Tecnologia da Informa√ß√£o">
                    Tecnologia da Informa√ß√£o
                  </option>
                  <option value="Consultoria">Consultoria</option>
                  <option value="Marketing Digital">Marketing Digital</option>
                  <option value="E-commerce">E-commerce</option>
                  <option value="Outros">Outros</option>
                </select>
              </div>
            </div>
          </div>

          {/* Informa√ß√µes de Endere√ßo */}
          <div>
            <h3 className="text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">
              Informa√ß√µes de Endere√ßo
            </h3>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  CEP
                </label>
                <input
                  type="text"
                  name="cep"
                  value={formData.cep}
                  onChange={handleCepChange}
                  maxLength={9}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div className="md:col-span-2">
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Logradouro
                </label>
                <input
                  type="text"
                  name="logradouro"
                  value={formData.logradouro}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  N√∫mero
                </label>
                <input
                  type="text"
                  name="numeroEndereco"
                  value={formData.numeroEndereco}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Bairro
                </label>
                <input
                  type="text"
                  name="bairro"
                  value={formData.bairro}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Cidade
                </label>
                <input
                  type="text"
                  name="cidade"
                  value={formData.cidade}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Estado
                </label>
                <select
                  name="estado"
                  value={formData.estado}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                >
                  <option value="AC">AC</option>
                  <option value="AL">AL</option>
                  <option value="AP">AP</option>
                  <option value="AM">AM</option>
                  <option value="BA">BA</option>
                  <option value="CE">CE</option>
                  <option value="DF">DF</option>
                  <option value="ES">ES</option>
                  <option value="GO">GO</option>
                  <option value="MA">MA</option>
                  <option value="MT">MT</option>
                  <option value="MS">MS</option>
                  <option value="MG">MG</option>
                  <option value="PA">PA</option>
                  <option value="PB">PB</option>
                  <option value="PR">PR</option>
                  <option value="PE">PE</option>
                  <option value="PI">PI</option>
                  <option value="RJ">RJ</option>
                  <option value="RN">RN</option>
                  <option value="RS">RS</option>
                  <option value="RO">RO</option>
                  <option value="RR">RR</option>
                  <option value="SC">SC</option>
                  <option value="SP">SP</option>
                  <option value="SE">SE</option>
                  <option value="TO">TO</option>
                </select>
              </div>
            </div>
          </div>

          {/* Informa√ß√µes Gerais */}
          <div>
            <h3 className="text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">
              Informa√ß√µes Gerais
            </h3>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Frase de Destaque
                </label>
                <input
                  type="text"
                  name="frase"
                  value={formData.frase}
                  onChange={handleInputChange}
                  placeholder="Frase que representa a empresa"
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Descri√ß√£o da Empresa
                </label>
                <textarea
                  name="textoEmpresa"
                  value={formData.textoEmpresa}
                  onChange={handleInputChange}
                  rows={6}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent resize-vertical"
                  placeholder="Descreva a empresa, seus valores, miss√£o e diferencias..."
                />
              </div>
            </div>
          </div>
        </div>

        {/* Bot√µes */}
        <div className="flex justify-end space-x-4 p-6 border-t border-gray-200">
          <button
            onClick={handleCancel}
            className="px-6 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-200 cursor-pointer"
          >
            Cancelar
          </button>
          <button
            onClick={handleSave}
            disabled={loading}
            className="px-6 py-2 text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors duration-200 flex items-center gap-2 cursor-pointer"
          >
            {loading && (
              <span className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></span>
            )}
            {loading ? "Gravando..." : "Gravar"}
          </button>
        </div>
      </div>

      {/* Overlay de loading geral */}
      {loading && (
        <div className="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
          <div className="w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin"></div>
        </div>
      )}
    </div>
  );
}


### ARQUIVO: edicaoEmpresa\page.tsx ###
import { Suspense } from 'react';
import CompanyEditForm from './CompanyEditForm';

export default function EditarPerfil() {
  return (
          <div>
            <Suspense fallback={<p>Carregando...</p>}>
              <CompanyEditForm />
            </Suspense>
          </div>
        );
}


### ARQUIVO: esqueci-senha\page.tsx ###
"use client";

import { useRouter } from "next/navigation";
import Image from "next/image";
import { useState } from "react";
import Link from "next/link";

export default function EsqueciSenha() {
  const router = useRouter();
  const [email, setEmail] = useState("");
  const [erro, setErro] = useState("");
  const [sucesso, setSucesso] = useState("");
  const [loading, setLoading] = useState(false);

  const validarEmail = (email: string) =>
    /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    if (!validarEmail(email)) {
      setErro("Digite um email v√°lido.");
      return;
    }

    setErro("");
    setSucesso("");
    setLoading(true);

    try {
      const res = await fetch(
        "http://localhost:8080/api/usuarios/esqueci-senha",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            email: email,
          }),
        }
      );

      if (res.ok) {
        setSucesso(
          "Email de recupera√ß√£o enviado! Verifique sua caixa de entrada e pasta de spam."
        );
        setEmail("");

        // Redireciona ap√≥s 3 segundos
        setTimeout(() => {
          router.push("/login");
        }, 3000);
      } else {
        const errorData = await res.json();
        setErro(errorData.message || "Erro ao enviar email de recupera√ß√£o");
      }
    } catch (error) {
      console.error("Erro:", error);
      setErro("Erro ao conectar com o servidor");
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="flex flex-col md:flex-row min-h-screen bg-white dark:bg-gray-900">
      {/* Lado esquerdo: imagem */}
      <div className="hidden md:flex md:w-2/5 bg-gradient-to-br from-[#990000] to-red-800 items-center justify-center relative overflow-hidden">
        <div className="relative w-full h-full flex items-center justify-center">
          <Image
            src="/images/login.png"
            alt="Recuperar senha"
            width={500}
            height={600}
            quality={100}
            priority
            className="object-contain drop-shadow-2xl"
          />
        </div>
      </div>

      {/* Lado direito: formul√°rio */}
      <div className="flex-1 flex items-center justify-center py-8 px-4 md:px-0">
        <div className="w-full max-w-md">
          <div className="text-center mb-8">
            <Image
              src="/images/logo_1.png"
              alt="Logo"
              width={150}
              height={150}
              quality={100}
              priority
              className="drop-shadow-lg mx-auto mb-4"
            />
          </div>

          <div className="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-6 md:p-8">
            <h2 className="text-2xl font-bold text-gray-900 dark:text-white mb-2 text-center">
              Recuperar Senha
            </h2>

            <p className="text-gray-600 dark:text-gray-300 mb-6 text-center">
              Digite seu email para receber as instru√ß√µes de recupera√ß√£o de
              senha.
            </p>

            {/* Formul√°rio */}
            <form onSubmit={handleSubmit} className="space-y-6">
              <div className="relative">
                <input
                  type="email"
                  placeholder=" "
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                  required
                  className="peer w-full border-0 border-b-2 border-gray-300 dark:border-gray-600 bg-transparent dark:bg-gray-800
                             focus:border-red-700 focus:outline-none focus:ring-0
                             text-gray-700 dark:text-white py-3 px-2 transition-colors duration-300"
                />
                <label
                  className="absolute left-2 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                                 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                                 peer-placeholder-shown:top-2
                                 peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
                >
                  Email*
                </label>
              </div>

              {/* Mensagens de status */}
              {erro && (
                <div className="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4">
                  <p className="text-red-700 dark:text-red-400 text-sm">
                    {erro}
                  </p>
                </div>
              )}

              {sucesso && (
                <div className="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4">
                  <p className="text-green-700 dark:text-green-400 text-sm">
                    {sucesso}
                  </p>
                </div>
              )}

              <button
                type="submit"
                disabled={loading}
                className="w-full bg-[#990000] text-white p-3 rounded-lg hover:bg-red-800 
                           transition disabled:opacity-50 disabled:cursor-not-allowed
                           font-medium shadow-sm cursor-pointer"
              >
                {loading ? (
                  <span className="flex items-center justify-center">
                    <svg
                      className="animate-spin -ml-1 mr-3 h-5 w-5 text-white"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                    >
                      <circle
                        className="opacity-25"
                        cx="12"
                        cy="12"
                        r="10"
                        stroke="currentColor"
                        strokeWidth="4"
                      ></circle>
                      <path
                        className="opacity-75"
                        fill="currentColor"
                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                      ></path>
                    </svg>
                    Enviando...
                  </span>
                ) : (
                  "Enviar Instru√ß√µes"
                )}
              </button>
            </form>

            <div className="text-center mt-6 pt-6 border-t border-gray-100 dark:border-gray-700">
              <p className="text-sm text-gray-600 dark:text-gray-400">
                Lembrou sua senha?{" "}
                <Link
                  href="/login"
                  className="text-[#990000] dark:text-red-400 font-medium hover:underline hover:text-red-800 dark:hover:text-red-300"
                >
                  Fazer login
                </Link>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}


### ARQUIVO: gerenciarListas\page.tsx ###
"use client";

import { useState, useEffect } from "react";
import LayoutWrapper from "../components/LayoutWrapper";
import {
  Bookmark,
  Heart,
  List,
  Plus,
  Trash2,
  Edit3,
  Users,
} from "lucide-react";
import Link from "next/link";

interface Lista {
  id: number;
  nome: string;
  count: number;
  tipo: "favoritos" | "personalizada";
  descricao?: string;
  cor: string;
  itens: string[];
}

const renderIcon = (tipo: string, cor: string) => {
  if (tipo === "favoritos") {
    return <Heart className="text-red-500" />;
  }
  return <List style={{ color: cor }} />;
};

export default function GerenciarListas() {
  const [listas, setListas] = useState<Lista[]>([]);
  const [showModal, setShowModal] = useState(false);
  const [novoNome, setNovoNome] = useState("");
  const [novaDescricao, setNovaDescricao] = useState("");
  const [corSelecionada, setCorSelecionada] = useState("#990000");
  const [listaEditando, setListaEditando] = useState<Lista | null>(null);

  const cores = [
    "#990000",
    "#dc2626",
    "#ea580c",
    "#d97706",
    "#059669",
    "#0891b2",
    "#3730a3",
    "#7c3aed",
  ];

  useEffect(() => {
    carregarListas();

    const handleFavoritosAtualizados = () => {
      carregarListas();
    };

    window.addEventListener("favoritosAtualizados", handleFavoritosAtualizados);

    return () => {
      window.removeEventListener(
        "favoritosAtualizados",
        handleFavoritosAtualizados
      );
    };
  }, []);

  const carregarListas = () => {
    const listasSalvas = localStorage.getItem("listasPersonalizadas");
    const curtidos = JSON.parse(localStorage.getItem("curtidos") || "[]");
    const salvos = JSON.parse(localStorage.getItem("salvos") || "[]");

    const listaFavoritos: Lista = {
      id: 1,
      nome: "Favoritos",
      count: curtidos.length,
      tipo: "favoritos",
      cor: "#dc2626",
      itens: curtidos,
    };

    if (listasSalvas) {
      const listasParse = JSON.parse(listasSalvas);
      setListas([listaFavoritos, ...listasParse]);
    } else {
      setListas([listaFavoritos]);
    }
  };

  const salvarListas = (novasListas: Lista[]) => {
    const listasPersonalizadas = novasListas.filter(
      (l) => l.tipo === "personalizada"
    );
    localStorage.setItem(
      "listasPersonalizadas",
      JSON.stringify(listasPersonalizadas)
    );
  };

  const adicionarLista = () => {
    if (novoNome.trim() === "") return;

    const novaLista: Lista = {
      id: Date.now(),
      nome: novoNome,
      count: 0,
      tipo: "personalizada",
      descricao: novaDescricao,
      cor: corSelecionada,
      itens: [],
    };

    const novasListas = [...listas, novaLista];
    setListas(novasListas);
    salvarListas(novasListas);
    setNovoNome("");
    setNovaDescricao("");
    setCorSelecionada("#990000");
    setShowModal(false);
  };

  const editarLista = () => {
    if (!listaEditando || novoNome.trim() === "") return;

    const novasListas = listas.map((lista) =>
      lista.id === listaEditando.id
        ? {
            ...lista,
            nome: novoNome,
            descricao: novaDescricao,
            cor: corSelecionada,
          }
        : lista
    );

    setListas(novasListas);
    salvarListas(novasListas);
    setListaEditando(null);
    setNovoNome("");
    setNovaDescricao("");
    setCorSelecionada("#990000");
    setShowModal(false);
  };

  const excluirLista = (id: number) => {
    const novasListas = listas.filter((lista) => lista.id !== id);
    setListas(novasListas);
    salvarListas(novasListas);
  };

  const abrirModalEdicao = (lista: Lista) => {
    setListaEditando(lista);
    setNovoNome(lista.nome);
    setNovaDescricao(lista.descricao || "");
    setCorSelecionada(lista.cor);
    setShowModal(true);
  };

  const fecharModal = () => {
    setShowModal(false);
    setListaEditando(null);
    setNovoNome("");
    setNovaDescricao("");
    setCorSelecionada("#990000");
  };

  const totalItens = listas.reduce((total, lista) => total + lista.count, 0);

  return (
    <LayoutWrapper>
      <div className="p-4 md:p-6">
        <div className="max-w-6xl mx-auto">
          <div className="flex justify-between items-center mb-6">
            <div>
              <h1 className="text-2xl md:text-3xl font-bold text-[#990000] dark:text-red-400">
                Minhas Listas
              </h1>
              <p className="text-gray-600 dark:text-gray-400 mt-2">
                Organize pesquisadores e empresas em listas personalizadas
              </p>
            </div>
            <button
              onClick={() => setShowModal(true)}
              className="bg-[#990000] text-white p-3 rounded-full shadow-lg hover:bg-red-800 transition flex items-center gap-2 cursor-pointer"
            >
              <Plus className="w-5 h-5" />
              <span className="hidden md:inline">Nova Lista</span>
            </button>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
            <div className="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-md">
              <div className="flex items-center gap-3">
                <div className="p-2 bg-red-100 dark:bg-red-900 rounded-lg">
                  <Bookmark className="w-6 h-6 text-red-600 dark:text-red-400" />
                </div>
                <div>
                  <p className="text-2xl font-bold text-gray-900 dark:text-white">
                    {listas.length}
                  </p>
                  <p className="text-sm text-gray-600 dark:text-gray-400">
                    Listas
                  </p>
                </div>
              </div>
            </div>
            <div className="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-md">
              <div className="flex items-center gap-3">
                <div className="p-2 bg-blue-100 dark:bg-blue-900 rounded-lg">
                  <Users className="w-6 h-6 text-blue-600 dark:text-blue-400" />
                </div>
                <div>
                  <p className="text-2xl font-bold text-gray-900 dark:text-white">
                    {totalItens}
                  </p>
                  <p className="text-sm text-gray-600 dark:text-gray-400">
                    Itens salvos
                  </p>
                </div>
              </div>
            </div>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {listas.map((lista) => (
              <div
                key={lista.id}
                className="bg-white dark:bg-gray-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 overflow-hidden"
              >
                <div
                  className="h-2 w-full"
                  style={{ backgroundColor: lista.cor }}
                ></div>

                <div className="p-6">
                  <div className="flex items-start justify-between mb-4">
                    <div className="flex items-center gap-3">
                      <div
                        className="p-2 rounded-lg"
                        style={{ backgroundColor: lista.cor + "20" }}
                      >
                        {renderIcon(lista.tipo, lista.cor)}
                      </div>
                      <div>
                        <h3 className="font-semibold text-gray-900 dark:text-white text-lg">
                          {lista.nome}
                        </h3>
                        <p className="text-sm text-gray-600 dark:text-gray-400">
                          {lista.count} itens
                        </p>
                      </div>
                    </div>

                    {lista.tipo === "personalizada" && (
                      <div className="flex gap-1">
                        <button
                          onClick={() => abrirModalEdicao(lista)}
                          className="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition cursor-pointer"
                          title="Editar lista"
                        >
                          <Edit3 className="w-4 h-4 text-gray-500" />
                        </button>
                        <button
                          onClick={() => excluirLista(lista.id)}
                          className="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition cursor-pointer"
                          title="Excluir lista"
                        >
                          <Trash2 className="w-4 h-4 text-gray-500" />
                        </button>
                      </div>
                    )}
                  </div>

                  {lista.descricao && (
                    <p className="text-gray-600 dark:text-gray-400 text-sm mb-4">
                      {lista.descricao}
                    </p>
                  )}

                  <Link
                    href={`/lista/${lista.id}`}
                    className="w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2 cursor-pointer"
                  >
                    <Bookmark className="w-4 h-4" />
                    Ver Lista
                  </Link>
                </div>
              </div>
            ))}

            <button
              onClick={() => setShowModal(true)}
              className="bg-white dark:bg-gray-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border-2 border-dashed border-gray-300 dark:border-gray-600 hover:border-[#990000] dark:hover:border-red-400 p-6 flex flex-col items-center justify-center gap-3 cursor-pointer group"
            >
              <div className="w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center group-hover:bg-red-100 dark:group-hover:bg-red-900 transition-colors">
                <Plus className="w-6 h-6 text-gray-500 group-hover:text-[#990000] dark:group-hover:text-red-400" />
              </div>
              <span className="font-semibold text-gray-700 dark:text-gray-300 group-hover:text-[#990000] dark:group-hover:text-red-400">
                Criar Nova Lista
              </span>
            </button>
          </div>
        </div>

        {showModal && (
          <div className="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-4">
            <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md">
              <div className="flex justify-between items-center border-b dark:border-gray-700 px-6 py-4">
                <h2 className="text-lg font-bold text-gray-900 dark:text-white">
                  {listaEditando ? "Editar Lista" : "Criar Nova Lista"}
                </h2>
                <button
                  onClick={fecharModal}
                  className="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer"
                >
                  ‚úï
                </button>
              </div>

              <div className="p-6 space-y-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Nome da lista *
                  </label>
                  <input
                    type="text"
                    placeholder="Digite o nome da lista"
                    value={novoNome}
                    onChange={(e) => setNovoNome(e.target.value)}
                    className="w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-[#990000]"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Descri√ß√£o (opcional)
                  </label>
                  <textarea
                    placeholder="Descreva o prop√≥sito desta lista"
                    value={novaDescricao}
                    onChange={(e) => setNovaDescricao(e.target.value)}
                    rows={3}
                    className="w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-[#990000] resize-none"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Cor da lista
                  </label>
                  <div className="flex gap-2 flex-wrap">
                    {cores.map((cor) => (
                      <button
                        key={cor}
                        onClick={() => setCorSelecionada(cor)}
                        className={`w-8 h-8 rounded-full border-2 ${
                          corSelecionada === cor
                            ? "border-gray-800 dark:border-white"
                            : "border-transparent"
                        } cursor-pointer`}
                        style={{ backgroundColor: cor }}
                      />
                    ))}
                  </div>
                </div>
              </div>

              <div className="flex justify-end gap-3 border-t dark:border-gray-700 px-6 py-4">
                <button
                  onClick={fecharModal}
                  className="px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition cursor-pointer"
                >
                  Cancelar
                </button>
                <button
                  onClick={listaEditando ? editarLista : adicionarLista}
                  disabled={!novoNome.trim()}
                  className="px-4 py-2 bg-[#990000] text-white rounded hover:bg-red-800 disabled:opacity-50 disabled:cursor-not-allowed transition cursor-pointer"
                >
                  {listaEditando ? "Salvar" : "Criar"}
                </button>
              </div>
            </div>
          </div>
        )}
      </div>
    </LayoutWrapper>
  );
}


### ARQUIVO: home\page.tsx ###
"use client";

import { useState, useEffect, useRef } from "react";
import { useRouter } from "next/navigation";
import LayoutWrapper from "../components/LayoutWrapper";
import { Swiper, SwiperSlide } from "swiper/react";
import { Navigation, A11y } from "swiper/modules";
import "swiper/css";
import "swiper/css/navigation";
import "swiper/css/a11y";
import {
  Search,
  User,
  Heart,
  Bookmark,
  X,
  ChevronLeft,
  ChevronRight,
} from "lucide-react";
import { useUser } from "../contexts/UserContext";

interface Recomendacao {
  id: number;
  nome: string;
  area: string;
  tags?: string[];
}

interface ResultadoBusca {
  id: number;
  nome: string;
  tipo: string;
  area: string;
  tags?: string[];
}

export default function Home() {
  const router = useRouter();
  const { userData, loading: userLoading, refreshUserData } = useUser();

  // üî• ADICIONE ESTE USEEFFECT
  useEffect(() => {
    // Garantir que o tema seja aplicado corretamente
    const html = document.documentElement;
    const savedTheme = localStorage.getItem("theme");

    if (savedTheme === "dark") {
      html.classList.add("dark");
      html.style.colorScheme = "dark";
      document.body.style.backgroundColor = "#111827";
    } else {
      html.classList.remove("dark");
      html.style.colorScheme = "light";
      document.body.style.backgroundColor = "#ffffff";
    }
  }, []);

  const [termoBusca, setTermoBusca] = useState("");
  const [resultadosBusca, setResultadosBusca] = useState<ResultadoBusca[]>([]);
  const [mostrarResultados, setMostrarResultados] = useState(false);
  const [carregandoBusca, setCarregandoBusca] = useState(false);
  const [nomeExibicao, setNomeExibicao] = useState("Usu√°rio");
  const searchRef = useRef<HTMLDivElement>(null);
  const swiperRef = useRef<any>(null);

  const [recomendacoes, setRecomendacoes] = useState<Recomendacao[]>([
    {
      id: 1,
      nome: "Dr. Carlos Silva",
      area: "Intelig√™ncia Artificial",
      tags: ["AI", "Machine Learning", "Deep Learning"],
    },
    {
      id: 2,
      nome: "Dra. Maria Santos",
      area: "Ci√™ncia de Dados",
      tags: ["Data Science", "Python", "Big Data"],
    },
    {
      id: 3,
      nome: "Dr. Jo√£o Pereira",
      area: "Seguran√ßa da Informa√ß√£o",
      tags: ["Cybersecurity", "Networking", "Firewall"],
    },
    {
      id: 4,
      nome: "Dra. Ana Oliveira",
      area: "Desenvolvimento Web",
      tags: ["React", "Node.js", "JavaScript"],
    },
    {
      id: 5,
      nome: "Dr. Pedro Costa",
      area: "Mobile Development",
      tags: ["Flutter", "Dart", "iOS"],
    },
    {
      id: 6,
      nome: "Dra. Julia Rodrigues",
      area: "Cloud Computing",
      tags: ["AWS", "Azure", "DevOps"],
    },
  ]);
  const [modalOpen, setModalOpen] = useState(false);
  const [selectedUser, setSelectedUser] = useState<Recomendacao | null>(null);

  // Garantir que o tema seja aplicado corretamente
  useEffect(() => {
    const html = document.documentElement;
    const savedTheme = localStorage.getItem("theme");

    if (savedTheme === "dark" && !html.classList.contains("dark")) {
      html.classList.add("dark");
      html.style.colorScheme = "dark";
    } else if (savedTheme === "light" && html.classList.contains("dark")) {
      html.classList.remove("dark");
      html.style.colorScheme = "light";
    }
  }, []);

  useEffect(() => {
    if (userData) {
      let nomeParaExibir =
        userData.pesquisador?.nomeCompleto ||
        userData.nome ||
        userData.login ||
        "Usu√°rio";

      setNomeExibicao(nomeParaExibir);
    } else {
      const storedUserData = localStorage.getItem("userData");
      if (storedUserData) {
        const parsedData = JSON.parse(storedUserData);
        const nomeFallback =
          parsedData.pesquisador?.nomeCompleto ||
          parsedData.nome ||
          parsedData.login ||
          "Usu√°rio";
        setNomeExibicao(nomeFallback);
      } else {
        const email = localStorage.getItem("email");
        setNomeExibicao(email || "Usu√°rio");
      }
    }
  }, [userData]);

  useEffect(() => {
    refreshUserData();
  }, []);

  useEffect(() => {
    function handleClickOutside(event: MouseEvent) {
      if (
        searchRef.current &&
        !searchRef.current.contains(event.target as Node)
      ) {
        setMostrarResultados(false);
      }
    }

    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, []);

  const handleBuscar = async (e?: React.FormEvent) => {
    if (e) e.preventDefault();

    if (!termoBusca.trim()) {
      setMostrarResultados(false);
      setResultadosBusca([]);
      return;
    }

    setCarregandoBusca(true);
    const token = localStorage.getItem("token");

    try {
      const response = await fetch(
        "http://localhost:8080/api/pesquisa/buscar",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
          body: JSON.stringify({
            termo: termoBusca,
            tipo: "todos",
          }),
        }
      );

      if (response.ok) {
        const dados = await response.json();
        setResultadosBusca(dados);
        setMostrarResultados(true);
      } else {
        console.error("Erro na busca");
        const resultadosMock = recomendacoes
          .filter(
            (item) =>
              item.nome.toLowerCase().includes(termoBusca.toLowerCase()) ||
              item.area.toLowerCase().includes(termoBusca.toLowerCase()) ||
              (item.tags &&
                item.tags.some((tag) =>
                  tag.toLowerCase().includes(termoBusca.toLowerCase())
                ))
          )
          .map((item) => ({
            id: item.id,
            nome: item.nome,
            tipo: "pesquisador",
            area: item.area,
            tags: item.tags,
          }));
        setResultadosBusca(resultadosMock);
        setMostrarResultados(true);
      }
    } catch (error) {
      console.error("Erro ao buscar:", error);
      const resultadosMock = recomendacoes
        .filter(
          (item) =>
            item.nome.toLowerCase().includes(termoBusca.toLowerCase()) ||
            item.area.toLowerCase().includes(termoBusca.toLowerCase()) ||
            (item.tags &&
              item.tags.some((tag) =>
                tag.toLowerCase().includes(termoBusca.toLowerCase())
              ))
        )
        .map((item) => ({
          id: item.id,
          nome: item.nome,
          tipo: "pesquisador",
          area: item.area,
          tags: item.tags,
        }));
      setResultadosBusca(resultadosMock);
      setMostrarResultados(true);
    } finally {
      setCarregandoBusca(false);
    }
  };

  useEffect(() => {
    if (termoBusca.length >= 2) {
      const timeoutId = setTimeout(() => {
        handleBuscar();
      }, 300);

      return () => clearTimeout(timeoutId);
    } else if (termoBusca.length === 0) {
      setMostrarResultados(false);
      setResultadosBusca([]);
    }
  }, [termoBusca]);

  const limparBusca = () => {
    setTermoBusca("");
    setMostrarResultados(false);
    setResultadosBusca([]);
  };

  const handleSelecionarResultado = (resultado: ResultadoBusca) => {
    if (resultado.tipo === "pesquisador") {
      router.push(`/perfilPesquisador/${resultado.id}`);
    } else if (resultado.tipo === "empresa") {
      router.push(`/perfilEmpresa/${resultado.id}`);
    }
    setMostrarResultados(false);
    setTermoBusca("");
  };

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === "Enter") {
      handleBuscar();
    }
  };

  const goNext = () => {
    if (swiperRef.current && swiperRef.current.swiper) {
      swiperRef.current.swiper.slideNext();
    }
  };

  const goPrev = () => {
    if (swiperRef.current && swiperRef.current.swiper) {
      swiperRef.current.swiper.slidePrev();
    }
  };

  const handleCurtir = (id: number) => {
    const listaCurtidos = JSON.parse(localStorage.getItem("curtidos") || "[]");
    if (listaCurtidos.includes(id)) {
      const novaLista = listaCurtidos.filter((itemId: number) => itemId !== id);
      localStorage.setItem("curtidos", JSON.stringify(novaLista));
    } else {
      listaCurtidos.push(id);
      localStorage.setItem("curtidos", JSON.stringify(listaCurtidos));
    }
  };

  const handleSalvarLista = (id: number) => {
    const listaSalvos = JSON.parse(localStorage.getItem("salvos") || "[]");
    if (listaSalvos.includes(id)) {
      const novaLista = listaSalvos.filter((itemId: number) => itemId !== id);
      localStorage.setItem("salvos", JSON.stringify(novaLista));
    } else {
      listaSalvos.push(id);
      localStorage.setItem("salvos", JSON.stringify(listaSalvos));
    }
  };

  if (userLoading) {
    return (
      <LayoutWrapper>
        <div className="flex items-center justify-center h-full bg-white dark:bg-gray-900">
          <div className="text-center">
            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-[#990000] mx-auto"></div>
            <p className="text-xl mt-4 dark:text-white">Carregando...</p>
          </div>
        </div>
      </LayoutWrapper>
    );
  }

  return (
    <LayoutWrapper>
      <div className="p-4 md:p-6 bg-white dark:bg-gray-900 min-h-screen">
        <header className="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
          <div className="relative w-full md:w-1/2" ref={searchRef}>
            <div className="flex items-center bg-white dark:bg-gray-800 px-3 py-2 rounded-lg shadow-md w-full">
              <Search className="text-gray-500 mr-2" />
              <input
                type="text"
                placeholder="Buscar por recrutador, pesquisa, tags..."
                value={termoBusca}
                onChange={(e) => setTermoBusca(e.target.value)}
                onKeyPress={handleKeyPress}
                className="flex-1 outline-none cursor-text dark:bg-gray-800 dark:text-white"
              />
              {termoBusca && (
                <button
                  type="button"
                  onClick={limparBusca}
                  className="text-gray-500 hover:text-gray-700 ml-2 cursor-pointer transition-colors"
                >
                  <X size={16} />
                </button>
              )}
              <button
                type="button"
                onClick={() => handleBuscar()}
                disabled={carregandoBusca}
                className="ml-2 bg-[#990000] text-white px-4 py-1 rounded-md hover:bg-red-700 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed transition-colors"
              >
                {carregandoBusca ? "..." : "Buscar"}
              </button>
            </div>

            {mostrarResultados && (
              <div className="absolute top-full left-0 right-0 bg-white dark:bg-gray-800 mt-1 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-96 overflow-y-auto z-50">
                {resultadosBusca.length > 0 ? (
                  resultadosBusca.map((resultado) => (
                    <div
                      key={`${resultado.tipo}-${resultado.id}`}
                      className="p-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-600 last:border-b-0 transition-colors"
                      onClick={() => handleSelecionarResultado(resultado)}
                    >
                      <div className="flex justify-between items-start">
                        <div className="flex-1">
                          <h3 className="font-semibold text-gray-900 dark:text-white">
                            {resultado.nome}
                          </h3>
                          <p className="text-sm text-gray-600 dark:text-gray-300 mt-1">
                            {resultado.area}
                          </p>
                          {resultado.tags && resultado.tags.length > 0 && (
                            <div className="flex flex-wrap gap-1 mt-2">
                              {resultado.tags.slice(0, 3).map((tag, idx) => (
                                <span
                                  key={idx}
                                  className="text-xs bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-2 py-1 rounded-full"
                                >
                                  {tag}
                                </span>
                              ))}
                              {resultado.tags.length > 3 && (
                                <span className="text-xs text-gray-500 dark:text-gray-400">
                                  +{resultado.tags.length - 3}
                                </span>
                              )}
                            </div>
                          )}
                        </div>
                        <span
                          className={`text-xs px-2 py-1 rounded-full ${
                            resultado.tipo === "pesquisador"
                              ? "bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300"
                              : "bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300"
                          }`}
                        >
                          {resultado.tipo === "pesquisador"
                            ? "Pesquisador"
                            : "Empresa"}
                        </span>
                      </div>
                    </div>
                  ))
                ) : (
                  <div className="p-4 text-center text-gray-500 dark:text-gray-400">
                    Nenhum resultado encontrado para "{termoBusca}"
                  </div>
                )}
              </div>
            )}
          </div>

          <div className="flex items-center gap-4 w-full md:w-auto">
            <div className="flex items-center bg-white dark:bg-gray-800 px-3 py-2 rounded-lg shadow-md w-full md:w-auto">
              <img
                src={userData?.fotoPerfil || "/images/user.png"}
                alt="user"
                className="w-8 h-8 rounded-full mr-2 cursor-pointer object-cover"
                onClick={() => router.push("/telaPerfil")}
                onError={(e) => {
                  e.currentTarget.src = "/images/user.png";
                }}
              />
              <span className="mr-2 cursor-default text-sm md:text-base dark:text-white">
                {nomeExibicao}
              </span>
              <button
                className="bg-[#990000] text-white px-3 py-1 rounded-md shadow-md hover:bg-red-700 cursor-pointer transition-colors text-sm md:text-base"
                onClick={() => router.push("/telaPerfil")}
              >
                Ver Perfil
              </button>
            </div>
          </div>
        </header>

        <div className="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 md:p-6 flex flex-col md:flex-row justify-between items-center mb-6 md:mb-8 max-w-7xl mx-auto">
          <div className="mb-4 md:mb-0">
            <h1 className="text-2xl md:text-4xl font-bold mb-2 text-[#990000] dark:text-red-400">
              Bem-vindo(a),{" "}
              <span className="text-black dark:text-white">{nomeExibicao}</span>
            </h1>
            <p className="text-bold text-[#990000] dark:text-red-400 font-semibold text-base md:text-lg">
              Encontre pesquisadores e empresas por tags e √°reas de interesse
            </p>
          </div>
          <img
            src="/images/boasvindas.png"
            alt="Boas vindas"
            className="w-48 md:w-68 cursor-default"
          />
        </div>

        <section className="relative mb-8 max-w-7xl mx-auto">
          <div className="flex justify-between items-center mb-4">
            <h2 className="text-xl font-bold text-gray-800 dark:text-white cursor-default">
              Recomenda√ß√µes
            </h2>
            <button
              className="px-4 py-2 bg-white dark:bg-gray-800 shadow-md rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 cursor-pointer transition-colors text-sm md:text-base"
              onClick={() => console.log("Ver mais clicado")}
            >
              Ver mais
            </button>
          </div>

          <div className="relative">
            <Swiper
              ref={swiperRef}
              spaceBetween={16}
              slidesPerView={1}
              breakpoints={{
                640: { slidesPerView: 2 },
                768: { slidesPerView: 3 },
                1024: { slidesPerView: 4 },
              }}
              modules={[Navigation, A11y]}
              className="pb-6"
              a11y={{
                prevSlideMessage: "Slide anterior",
                nextSlideMessage: "Pr√≥ximo slide",
              }}
            >
              {recomendacoes.map((item) => (
                <SwiperSlide key={item.id}>
                  <div className="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 flex flex-col items-center relative hover:shadow-lg transition-shadow cursor-default h-full">
                    <div className="absolute top-3 right-3 flex gap-2">
                      <button
                        className="p-1 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-blue-100 dark:hover:bg-blue-900 transition-colors cursor-pointer"
                        onClick={() => handleSalvarLista(item.id)}
                      >
                        <Bookmark className="w-5 h-5 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400" />
                      </button>
                      <button
                        className="p-1 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-red-100 dark:hover:bg-red-900 transition-colors cursor-pointer"
                        onClick={() => handleCurtir(item.id)}
                      >
                        <Heart className="w-5 h-5 text-gray-500 hover:text-red-600 dark:hover:text-red-400" />
                      </button>
                    </div>

                    <img
                      src="/images/user.png"
                      alt="user"
                      className="w-16 h-16 md:w-20 md:h-20 rounded-full mb-3 cursor-pointer object-cover"
                      onClick={() =>
                        router.push(`/perfilPesquisador/${item.id}`)
                      }
                    />
                    <h3 className="font-semibold text-gray-800 dark:text-white cursor-default text-center text-sm md:text-base">
                      {item.nome}
                    </h3>
                    <p className="text-gray-500 dark:text-gray-400 text-sm mb-4 cursor-default text-center">
                      {item.area}
                    </p>
                    <div className="flex gap-2 mt-2 flex-wrap justify-center cursor-default">
                      {item.tags &&
                        item.tags.slice(0, 3).map((tag, idx) => (
                          <span
                            key={idx}
                            className="text-xs bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded-full border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 cursor-default"
                          >
                            {tag}
                          </span>
                        ))}
                    </div>
                    <div className="bg-gray-200 dark:bg-gray-700 w-full h-0.5 my-3 cursor-default"></div>

                    <button
                      className="text-[#990000] dark:text-red-400 font-semibold hover:underline transition-colors cursor-pointer text-sm md:text-base"
                      onClick={() => {
                        setSelectedUser(item);
                        setModalOpen(true);
                      }}
                    >
                      Contato
                    </button>
                  </div>
                </SwiperSlide>
              ))}
            </Swiper>

            <button
              onClick={goPrev}
              className="absolute top-1/2 -left-2 md:-left-6 z-10 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 p-2 md:p-3 rounded-full shadow-md hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-[#990000] dark:hover:text-red-400 cursor-pointer transition-all duration-200 transform -translate-y-1/2"
              aria-label="Slide anterior"
            >
              <ChevronLeft size={16} className="md:w-5 md:h-5" />
            </button>
            <button
              onClick={goNext}
              className="absolute top-1/2 -right-2 md:-right-6 z-10 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 p-2 md:p-3 rounded-full shadow-md hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-[#990000] dark:hover:text-red-400 cursor-pointer transition-all duration-200 transform -translate-y-1/2"
              aria-label="Pr√≥ximo slide"
            >
              <ChevronRight size={16} className="md:w-5 md:h-5" />
            </button>
          </div>
        </section>

        <section className="mt-8 max-w-7xl mx-auto">
          <div className="flex justify-between items-center mb-4">
            <h2 className="text-xl font-bold text-gray-800 dark:text-white cursor-default">
              Tags Populares
            </h2>
          </div>
          <div className="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 md:p-6 cursor-default">
            <div className="flex flex-wrap gap-2 md:gap-3 justify-center">
              {[
                "Desenvolvimento de Software",
                "Banco de Dados",
                "Intelig√™ncia Artificial",
                "Ci√™ncia de Dados",
                "Redes de Computadores",
                "Seguran√ßa da Informa√ß√£o",
                "Cloud Computing",
                "Mobile Development",
                "UX/UI Design",
                "DevOps",
              ].map((tag, index) => (
                <button
                  key={index}
                  onClick={() => setTermoBusca(tag)}
                  className="px-3 py-1.5 md:px-4 md:py-2 bg-gray-100 dark:bg-gray-700 hover:bg-[#990000] hover:text-white text-gray-700 dark:text-gray-300 rounded-full transition-colors text-xs md:text-sm font-medium cursor-pointer"
                >
                  {tag}
                </button>
              ))}
            </div>
          </div>
        </section>
      </div>

      {modalOpen && (
        <div
          className="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 cursor-pointer p-4"
          onClick={() => setModalOpen(false)}
        >
          <div
            className="bg-white dark:bg-gray-800 p-4 md:p-6 rounded-lg shadow-lg w-full max-w-sm md:max-w-md cursor-default"
            onClick={(e) => e.stopPropagation()}
          >
            <h2 className="text-xl font-bold text-[#990000] dark:text-red-400 mb-4">
              Contato com {selectedUser?.nome}
            </h2>
            <p className="mb-4 text-gray-600 dark:text-gray-400 text-sm md:text-base">
              Aqui voc√™ pode abrir o chat ou enviar mensagem para{" "}
              {selectedUser?.nome}.
            </p>
            <div className="flex justify-end gap-3">
              <button
                className="px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors cursor-pointer text-sm md:text-base"
                onClick={() => setModalOpen(false)}
              >
                Cancelar
              </button>
              <button className="px-4 py-2 bg-[#990000] text-white rounded-lg hover:bg-red-700 transition-colors cursor-pointer text-sm md:text-base">
                Enviar Mensagem
              </button>
            </div>
          </div>
        </div>
      )}
    </LayoutWrapper>
  );
}


### ARQUIVO: hooks\useTheme.ts ###
"use client";

import { useTheme as useThemeOriginal } from "../contexts/ThemeProvider";

// Hook wrapper para garantir compatibilidade
export const useTheme = useThemeOriginal;


### ARQUIVO: lista\[id]\page.tsx ###
"use client";

import { useParams, useRouter } from "next/navigation";
import { useState, useEffect } from "react";
import MenuLateral from "../../components/MenuLateral";
import {
  Heart,
  Bookmark,
  Trash2,
  X,
  User,
  Building,
  MapPin,
  Mail,
} from "lucide-react";
import { useSidebar } from "../../contexts/SidebarContext";

interface ItemLista {
  id: string;
  tipo: "pesquisador" | "empresa";
  nome: string;
  area: string;
  localizacao?: string;
  email?: string;
  tags?: string[];
}

// Mock data fora do componente
const pesquisadoresMock = [
  {
    id: "pesquisador-1",
    tipo: "pesquisador" as const,
    nome: "Dr. Carlos Silva",
    area: "Intelig√™ncia Artificial",
    localizacao: "S√£o Paulo, SP",
    email: "carlos.silva@usp.br",
    tags: ["Machine Learning", "Deep Learning", "Python"],
  },
  {
    id: "pesquisador-2",
    tipo: "pesquisador" as const,
    nome: "Dra. Maria Santos",
    area: "Ci√™ncia de Dados",
    localizacao: "Rio de Janeiro, RJ",
    email: "maria.santos@ufrj.br",
    tags: ["Big Data", "Python", "Estat√≠stica"],
  },
  {
    id: "pesquisador-3",
    tipo: "pesquisador" as const,
    nome: "Dr. Jo√£o Pereira",
    area: "Seguran√ßa da Informa√ß√£o",
    localizacao: "Campinas, SP",
    email: "joao.pereira@unicamp.br",
    tags: ["Cybersecurity", "Networking"],
  },
];

const empresasMock = [
  {
    id: "empresa-1",
    tipo: "empresa" as const,
    nome: "Tech Solutions Ltda",
    area: "Desenvolvimento de Software",
    localizacao: "Curitiba, PR",
    email: "contato@techsolutions.com",
    tags: ["SaaS", "Cloud Computing", "Mobile"],
  },
  {
    id: "empresa-2",
    tipo: "empresa" as const,
    nome: "Inova Tech",
    area: "Consultoria em TI",
    localizacao: "Belo Horizonte, MG",
    email: "contato@inovatech.com",
    tags: ["Consultoria", "Digital Transformation"],
  },
];

export default function ListaPage() {
  const { id } = useParams();
  const router = useRouter();
  const [itens, setItens] = useState<ItemLista[]>([]);
  const [listaInfo, setListaInfo] = useState<any>(null);
  const [showModal, setShowModal] = useState(false);
  const [nomeLista, setNomeLista] = useState("");
  const { isCollapsed, isMobile } = useSidebar();

  const mainMargin = isCollapsed
    ? isMobile
      ? "ml-0"
      : "md:ml-20"
    : "md:ml-64";

  useEffect(() => {
    carregarLista();
  }, [id]);

  const criarItemMock = (itemId: string): ItemLista | null => {
    const [tipo, itemIdNum] = itemId.split("-");

    if (tipo === "pesquisador") {
      return pesquisadoresMock.find((p) => p.id === itemId) || null;
    } else if (tipo === "empresa") {
      return empresasMock.find((e) => e.id === itemId) || null;
    }
    return null;
  };

  const carregarLista = () => {
    const listasSalvas = localStorage.getItem("listasPersonalizadas");
    const curtidos = JSON.parse(localStorage.getItem("curtidos") || "[]");

    if (id === "1") {
      // Lista de Favoritos
      setListaInfo({
        id: 1,
        nome: "Favoritos",
        count: curtidos.length,
        cor: "#dc2626",
      });

      const itensFavoritos = curtidos
        .map((itemId: string) => {
          return criarItemMock(itemId);
        })
        .filter(Boolean) as ItemLista[];

      setItens(itensFavoritos);
    } else {
      // Listas personalizadas
      if (listasSalvas) {
        const listas = JSON.parse(listasSalvas);
        const lista = listas.find((l: any) => l.id === parseInt(id as string));

        if (lista) {
          setListaInfo(lista);
          setNomeLista(lista.nome);

          const itensLista = lista.itens
            .map((itemId: string) => {
              return criarItemMock(itemId);
            })
            .filter(Boolean) as ItemLista[];

          setItens(itensLista);
        }
      }
    }
  };

  const removerItem = (itemId: string) => {
    if (id === "1") {
      // Remover dos favoritos
      const curtidos = JSON.parse(localStorage.getItem("curtidos") || "[]");
      const novaLista = curtidos.filter((item: string) => item !== itemId);
      localStorage.setItem("curtidos", JSON.stringify(novaLista));
    } else {
      // Remover de lista personalizada
      const listasSalvas = localStorage.getItem("listasPersonalizadas");
      if (listasSalvas) {
        const listas = JSON.parse(listasSalvas);
        const listaIndex = listas.findIndex(
          (l: any) => l.id === parseInt(id as string)
        );

        if (listaIndex !== -1) {
          listas[listaIndex].itens = listas[listaIndex].itens.filter(
            (item: string) => item !== itemId
          );
          listas[listaIndex].count = listas[listaIndex].itens.length;
          localStorage.setItem("listasPersonalizadas", JSON.stringify(listas));
        }
      }
    }

    setItens((prev) => prev.filter((item) => item.id !== itemId));
    window.dispatchEvent(new Event("favoritosAtualizados"));
  };

  const excluirLista = () => {
    if (id !== "1") {
      const listasSalvas = localStorage.getItem("listasPersonalizadas");
      if (listasSalvas) {
        const listas = JSON.parse(listasSalvas);
        const novaLista = listas.filter(
          (l: any) => l.id !== parseInt(id as string)
        );
        localStorage.setItem("listasPersonalizadas", JSON.stringify(novaLista));
      }
    }
    router.push("/gerenciarListas");
  };

  const handleContato = (email: string) => {
    window.location.href = `mailto:${email}`;
  };

  const handleVerPerfil = (item: ItemLista) => {
    const itemId = item.id.split("-")[1];
    if (item.tipo === "pesquisador") {
      router.push(`/perfilPesquisador/${itemId}`);
    } else {
      router.push(`/perfilEmpresa/${itemId}`);
    }
  };

  if (!listaInfo) {
    return (
      <div className="flex min-h-screen bg-gray-100 dark:bg-gray-900">
        <MenuLateral />
        <main
          className={`flex-1 transition-all duration-300 ease-in-out ${mainMargin} w-full min-h-screen flex items-center justify-center`}
        >
          <div className="text-center">
            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-[#990000] mx-auto"></div>
            <p className="mt-4 text-gray-600 dark:text-gray-400">
              Carregando lista...
            </p>
          </div>
        </main>
      </div>
    );
  }

  return (
    <div className="flex min-h-screen bg-gray-100 dark:bg-gray-900">
      <MenuLateral />

      <div
        className={`flex-1 bg-gray-100 dark:bg-gray-900 p-6 transition-all duration-300 ease-in-out ${mainMargin}`}
      >
        <div className="max-w-7xl mx-auto">
          <div className="flex justify-between items-center mb-6">
            <div>
              <h1 className="text-2xl font-bold text-[#990000] dark:text-red-400">
                {listaInfo.nome}
              </h1>
              <p className="text-gray-600 dark:text-gray-400 mt-2">
                {itens.length} itens na lista
              </p>
            </div>
            <div className="flex gap-2">
              {id !== "1" && (
                <>
                  <button
                    onClick={() => setShowModal(true)}
                    className="bg-white dark:bg-gray-800 p-2 rounded-full shadow hover:bg-gray-100 dark:hover:bg-gray-700 transition cursor-pointer"
                    title="Editar lista"
                  >
                    <Bookmark className="text-[#990000] dark:text-red-400" />
                  </button>
                  <button className="bg-white dark:bg-gray-800 p-2 rounded-full shadow hover:bg-gray-100 dark:hover:bg-gray-700 transition cursor-pointer">
                    <Heart className="text-red-600" />
                  </button>
                </>
              )}
            </div>
          </div>

          <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            {itens.map((item) => (
              <div
                key={item.id}
                className="relative bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex flex-col items-center text-center hover:shadow-lg transition-shadow"
              >
                <button
                  onClick={() => removerItem(item.id)}
                  className="absolute top-2 right-2 p-1 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-red-100 dark:hover:bg-red-900 transition cursor-pointer"
                  title="Remover da lista"
                >
                  <Trash2 className="w-4 h-4 text-gray-600 hover:text-red-600 dark:hover:text-red-400" />
                </button>

                <div
                  className={`w-16 h-16 rounded-full flex items-center justify-center mb-3 ${
                    item.tipo === "pesquisador"
                      ? "bg-blue-100 dark:bg-blue-900"
                      : "bg-green-100 dark:bg-green-900"
                  }`}
                >
                  {item.tipo === "pesquisador" ? (
                    <User className="w-8 h-8 text-blue-600 dark:text-blue-400" />
                  ) : (
                    <Building className="w-8 h-8 text-green-600 dark:text-green-400" />
                  )}
                </div>

                <h2 className="font-semibold text-gray-900 dark:text-white mb-1">
                  {item.nome}
                </h2>
                <p className="text-sm text-gray-600 dark:text-gray-400 mb-2">
                  {item.area}
                </p>

                {item.localizacao && (
                  <div className="flex items-center text-xs text-gray-500 dark:text-gray-400 mb-2">
                    <MapPin className="w-3 h-3 mr-1" />
                    {item.localizacao}
                  </div>
                )}

                {item.tags && item.tags.length > 0 && (
                  <div className="flex flex-wrap gap-1 justify-center my-2">
                    {item.tags.slice(0, 2).map((tag, idx) => (
                      <span
                        key={idx}
                        className="px-2 py-1 text-xs rounded bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"
                      >
                        {tag}
                      </span>
                    ))}
                    {item.tags.length > 2 && (
                      <span className="px-2 py-1 text-xs text-gray-500 dark:text-gray-400">
                        +{item.tags.length - 2}
                      </span>
                    )}
                  </div>
                )}

                <div className="flex gap-2 w-full mt-auto">
                  <button
                    onClick={() => handleVerPerfil(item)}
                    className="flex-1 bg-[#990000] text-white py-1 px-2 rounded text-xs hover:bg-red-800 transition-colors cursor-pointer"
                  >
                    Ver Perfil
                  </button>
                  {item.email && (
                    <button
                      onClick={() => handleContato(item.email!)}
                      className="p-1 border border-[#990000] text-[#990000] dark:text-red-400 rounded hover:bg-[#990000] hover:text-white transition-colors cursor-pointer"
                    >
                      <Mail className="w-3 h-3" />
                    </button>
                  )}
                </div>
              </div>
            ))}

            {itens.length === 0 && (
              <div className="col-span-full text-center py-12">
                <Bookmark className="w-16 h-16 text-gray-400 mx-auto mb-4" />
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  Lista vazia
                </h3>
                <p className="text-gray-600 dark:text-gray-400">
                  {id === "1"
                    ? "Nenhum item favoritado ainda."
                    : "Adicione itens a esta lista para v√™-los aqui."}
                </p>
              </div>
            )}
          </div>
        </div>
      </div>

      {showModal && (
        <div className="fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50">
          <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg w-96">
            <div className="flex justify-between items-center border-b dark:border-gray-700 px-4 py-3">
              <h2 className="text-lg font-bold text-[#990000] dark:text-red-400">
                Editar lista
              </h2>
              <button
                onClick={() => setShowModal(false)}
                className="cursor-pointer text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"
              >
                <X className="w-5 h-5" />
              </button>
            </div>

            <div className="p-6">
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Nome da lista
              </label>
              <input
                type="text"
                value={nomeLista}
                onChange={(e) => setNomeLista(e.target.value)}
                className="w-full border px-3 py-2 rounded mb-4 dark:bg-gray-700 dark:text-white dark:border-gray-600"
              />

              <button
                onClick={excluirLista}
                className="w-full flex items-center justify-center gap-2 px-4 py-2 rounded bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-400 border border-red-300 dark:border-red-700 hover:bg-red-200 dark:hover:bg-red-800 transition mb-6 cursor-pointer"
              >
                <Trash2 className="w-4 h-4" />
                Excluir Lista
              </button>

              <div className="flex justify-end gap-2">
                <button
                  onClick={() => setShowModal(false)}
                  className="px-4 py-2 rounded bg-gray-300 dark:bg-gray-600 text-white hover:bg-gray-400 dark:hover:bg-gray-500 transition cursor-pointer"
                >
                  Cancelar
                </button>
                <button
                  onClick={() => setShowModal(false)}
                  className="px-4 py-2 rounded bg-[#990000] text-white hover:bg-red-800 transition cursor-pointer"
                >
                  Gravar
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}


### ARQUIVO: login\page.tsx ###
"use client";

import { useRouter } from "next/navigation";
import Image from "next/image";
import { useState, useEffect } from "react";
import Link from "next/link";

// Fallback hook para quando ThemeProvider n√£o estiver dispon√≠vel
const useThemeFallback = () => {
  const [isDarkMode, setIsDarkMode] = useState(false);
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
    const savedTheme = localStorage.getItem("theme");
    const systemPrefersDark = window.matchMedia(
      "(prefers-color-scheme: dark)"
    ).matches;

    const shouldBeDark =
      savedTheme === "dark" || (!savedTheme && systemPrefersDark);
    setIsDarkMode(shouldBeDark);

    // Aplicar o tema
    const html = document.documentElement;
    if (shouldBeDark) {
      html.classList.add("dark");
      html.style.colorScheme = "dark";
    } else {
      html.classList.remove("dark");
      html.style.colorScheme = "light";
    }
  }, []);

  return { isDarkMode, toggleTheme: () => {} }; // toggleTheme vazio pois n√£o √© usado no login
};

// Hook seguro que tenta usar o ThemeProvider primeiro
const useThemeSafe = () => {
  try {
    const { useTheme } = require("../contexts/ThemeProvider");
    return useTheme();
  } catch (error) {
    return useThemeFallback();
  }
};

export default function Login() {
  const router = useRouter();
  const { isDarkMode } = useThemeSafe(); // Usando o hook seguro

  const [email, setEmail] = useState("");
  const [senha, setSenha] = useState("");
  const [erro, setErro] = useState("");
  const [loading, setLoading] = useState(false);
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
  }, []);

  const validarEmail = (email: string) =>
    /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    // Valida√ß√µes
    if (!validarEmail(email)) {
      setErro("Digite um email v√°lido.");
      return;
    }
    if (!senha) {
      setErro("Senha √© obrigat√≥ria.");
      return;
    }

    setErro("");
    setLoading(true);

    try {
      // Fazer login
      const res = await fetch("http://localhost:8080/api/usuarios/login", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          login: email,
          password: senha,
        }),
      });

      if (res.ok) {
        const data = await res.json();
        console.log("Login bem-sucedido:", data);

        // Salvar token e email
        localStorage.setItem("token", data.token);
        localStorage.setItem("email", email);
        localStorage.setItem("usuarioId", data.usuarioId);

        // Buscar e salvar dados completos do usu√°rio
        try {
          const userResponse = await fetch(
            `http://localhost:8080/api/usuarios/listarUsuario/${encodeURIComponent(
              email
            )}`,
            {
              headers: {
                "Content-Type": "application/json",
                Authorization: `Bearer ${data.token}`,
              },
            }
          );

          if (userResponse.ok) {
            const userData = await userResponse.json();
            localStorage.setItem("userData", JSON.stringify(userData));

            // Disparar evento para atualizar outros componentes
            window.dispatchEvent(new Event("userDataUpdated"));
          }
        } catch (userError) {
          console.error("Erro ao buscar dados do usu√°rio:", userError);
        }

        // Verificar se o email est√° verificado
        if (data.emailVerificado === false) {
          localStorage.setItem("email", email);
          router.push("/aguardandoVerificacao");
        } else {
          // Redirecionar para home
          router.push("/home");
        }
      } else {
        const errorData = await res.json();
        setErro(errorData.message || "Credenciais inv√°lidas");
      }
    } catch (error) {
      console.error("Erro no login:", error);
      setErro("Erro ao conectar com o servidor");
    } finally {
      setLoading(false);
    }
  };

  if (!mounted) {
    return (
      <div className="flex flex-col md:flex-row h-screen bg-white dark:bg-gray-900">
        <div className="flex-1 flex items-center justify-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-[#990000]"></div>
        </div>
      </div>
    );
  }

  return (
    <div className="flex flex-col md:flex-row h-screen bg-white dark:bg-gray-900">
      {/* Lado esquerdo: imagem */}
      <div className="hidden md:flex w-1/3 bg-red-800 items-end justify-start overflow-visible relative">
        <div className="relative h-auto w-[120%] -right-[11.11%]">
          <Image
            src="/images/login.png"
            alt="Login"
            width={500}
            height={900}
            quality={100}
            priority
            className="object-contain drop-shadow-lg absolute bottom-0"
          />
        </div>
      </div>

      {/* Lado direito: formul√°rio */}
      <div className="flex-1 flex items-start justify-center bg-white dark:bg-gray-900 pt-12 px-4 md:px-0">
        <div className="w-full max-w-md">
          <Image
            src="/images/logo_1.png"
            alt="Logo"
            width={150}
            height={150}
            quality={100}
            priority
            className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer mx-auto"
          />

          <h2 className="text-xl font-semibold mb-8 mt-32 text-center md:text-left dark:text-white">
            Entrar
          </h2>

          {/* Formul√°rio */}
          <form onSubmit={handleSubmit} className="space-y-6">
            <div className="relative">
              <input
                type="email"
                placeholder=" "
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                required
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-900
                         focus:border-red-700 focus:outline-none focus:ring-0
                         text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-2 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                             peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                             peer-placeholder-shown:top-2
                             peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Email*
              </label>
            </div>

            <div className="relative">
              <input
                type="password"
                placeholder=" "
                value={senha}
                onChange={(e) => setSenha(e.target.value)}
                required
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-900
                         focus:border-red-700 focus:outline-none focus:ring-0
                         text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-2 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                             peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                             peer-placeholder-shown:top-2
                             peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Senha*
              </label>
            </div>

            {erro && <p className="text-red-600 text-sm">{erro}</p>}

            <button
              type="submit"
              disabled={loading}
              className="w-full bg-red-800 text-white p-3 rounded-lg hover:bg-red-900 transition disabled:opacity-50 cursor-pointer"
            >
              {loading ? "Entrando..." : "Entrar"}
            </button>
          </form>

          <div className="text-center mt-4 space-y-2">
            <p className="text-sm dark:text-gray-400">
              Ainda n√£o possui uma conta?{" "}
              <Link
                href="/criarConta"
                className="text-red-700 dark:text-red-400 font-medium hover:underline"
              >
                Criar conta
              </Link>
            </p>
            <p className="text-sm dark:text-gray-400">
              <Link
                href="/esqueci-senha"
                className="text-red-700 dark:text-red-400 font-medium hover:underline"
              >
                Esqueci minha senha
              </Link>
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}


### ARQUIVO: perfilEmpresa\[id]\CompanyProfile.tsx ###
"use client";

import { useState, useEffect } from "react";
import { useParams, useRouter } from "next/navigation";
import MenuLateral from "../../components/MenuLateral";
import { useSidebar } from "../../contexts/SidebarContext";

interface Empresa {
  id: number;
  nomeComercial: string;
  frase: string;
  cidade: string;
  estado: string;
  site: string;
  setor: string;
  telefone: string;
  email: string;
  textoEmpresa: string;
}

export default function CompanyProfile() {
  const router = useRouter();
  const { id } = useParams(); // pega o id da rota
  const [infoEmpresa, setInfoEmpresa] = useState<Empresa | null>(null);
  const [loading, setLoading] = useState(false);
  const { isCollapsed, isMobile } = useSidebar();

  const mainMargin = isCollapsed
    ? isMobile
      ? "ml-0"
      : "md:ml-20"
    : "md:ml-64";

  const buscarInfoEmpresa = async () => {
    const token = localStorage.getItem("token");
    console.log(token);
    try {
      const res = await fetch(
        `http://localhost:8080/api/empresas/listarEmpresa/${id}`,
        {
          method: "GET",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
        }
      );

      const data = await res.json();
      setInfoEmpresa(data);
    } catch (error) {
      console.error("Erro ao buscar empresa:", error);
    }
  };

  useEffect(() => {
    if (id) {
      buscarInfoEmpresa();
    }
  }, [id]);

  const handleEditar = () => {
    if (infoEmpresa) {
      setLoading(true); // ativa loading
      setTimeout(() => {
        router.push(`/edicaoEmpresa?id=${infoEmpresa.id}`);
      }, 1000); // atraso pequeno s√≥ para mostrar o loading
    }
  };

  return (
    <div className="flex h-screen bg-gray-100">
      {/* Menu lateral fixo */}
      <MenuLateral />

      {/* Conte√∫do principal */}
      <main
        className={`flex-1 overflow-y-auto transition-all duration-300 ease-in-out ${mainMargin}`}
      >
        {/* Card principal da empresa */}
        <section className="bg-gray-300 shadow-md p-6 pl-20 flex flex-col md:flex-row gap-6 relative">
          {/* Imagem/√≠cone da empresa */}
          <div className="bg-purple-500 rounded-xl flex items-center justify-center w-full md:w-80 h-80 md:h-80 shadow">
            {/* Imagem de perfil da empresa */}
          </div>

          {/* Infos da empresa */}
          <div className="flex-1 flex flex-col justify-between">
            <div>
              {infoEmpresa && (
                <h1 className="text-5xl font-bold text-gray-700 mb-2">
                  {infoEmpresa.nomeComercial}
                </h1>
              )}
              {infoEmpresa && (
                <h2 className="text-2xl text-gray-700">{infoEmpresa.frase}</h2>
              )}

              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 text-sm text-white">
                <div>
                  <p>
                    <span className="font-bold text-gray-700">Sede</span>
                  </p>
                  {infoEmpresa && (
                    <p className="text-gray-700 mb-2">
                      üìç{infoEmpresa.cidade}, {infoEmpresa.estado}
                    </p>
                  )}
                  <p>
                    <span className="font-bold text-gray-700">Site</span>
                  </p>
                  {infoEmpresa && (
                    <p className="text-gray-700 mb-2">{infoEmpresa.site}</p>
                  )}
                  <p>
                    <span className="font-bold text-gray-700">Setor</span>
                  </p>
                  {infoEmpresa && (
                    <p className="text-gray-700">{infoEmpresa.setor}</p>
                  )}
                </div>
                <div>
                  <p>
                    <span className="font-bold text-gray-700">Telefone</span>
                  </p>
                  {infoEmpresa && (
                    <p className="text-gray-700 mb-2">{infoEmpresa.telefone}</p>
                  )}
                  <p>
                    <span className="font-bold text-gray-700">Email</span>
                  </p>
                  {infoEmpresa && (
                    <p className="text-gray-700">{infoEmpresa.email}</p>
                  )}
                </div>
              </div>
            </div>

            {/* Bot√£o */}
            <button className="bg-red-700 text-white px-4 py-2 mt-6 rounded-lg hover:bg-red-800 w-fit cursor-pointer">
              Gerenciar Listas
            </button>
          </div>

          {/* Bot√£o editar */}
          <button
            className="absolute top-4 right-4 bg-white p-2 rounded-full shadow hover:bg-gray-100 cursor-pointer"
            onClick={handleEditar}
            disabled={loading}
          >
            {loading ? "‚è≥" : "‚úèÔ∏è"}
          </button>

          {/* √öltima atualiza√ß√£o */}
          <span className="absolute bottom-4 right-6 text-xs text-gray-700">
            √öltima atualiza√ß√£o h√° 7 horas
          </span>
        </section>

        {/* Se√ß√£o Vis√£o Geral */}
        <section className="bg-gray-100 p-12 pt-6">
          <h2 className="text-md font-semibold mb-4">Sobre a Empresa</h2>

          <div className="bg-white rounded-xl shadow-md p-6 space-y-4">
            {infoEmpresa && <p>{infoEmpresa.textoEmpresa}</p>}
          </div>
        </section>
      </main>
      {/* Overlay de loading */}
      {loading && (
        <div className="fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50">
          <div className="w-12 h-12 border-4 border-t-transparent border-white rounded-full animate-spin"></div>
        </div>
      )}
    </div>
  );
}


### ARQUIVO: perfilEmpresa\[id]\page.tsx ###
import { Suspense } from 'react';
import CompanyProfile from './CompanyProfile';

export default function Empresa() {
  return (
    <div>
      <Suspense fallback={<p>Carregando...</p>}>
        <CompanyProfile />
      </Suspense>
    </div>
  );
}


### ARQUIVO: perfilPesquisador\page.tsx ###
import { Suspense } from 'react';
import ResearcherProfile from './ResearcherProfile';

export default function Home() {
  return (
      <div>
        <Suspense fallback={<p>Carregando...</p>}>
          <ResearcherProfile />
        </Suspense>
      </div>
    );
}


### ARQUIVO: perfilPesquisador\ResearcherProfile.tsx ###
"use client";

import { useState, useRef } from "react";
import { useRouter } from "next/navigation";
import Image from "next/image";
import { motion, AnimatePresence } from "framer-motion";

export default function ResearcherProfile() {
  const [arquivo, setArquivo] = useState<File | null>(null);
  const [isDragging, setIsDragging] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const fileInputRef = useRef<HTMLInputElement>(null);
  const router = useRouter();

  const handleDragEnter = (e: React.DragEvent<HTMLDivElement>) => {
    e.preventDefault();
    e.stopPropagation();
    setIsDragging(true);
    setError(null);
  };

  const handleDragLeave = (e: React.DragEvent<HTMLDivElement>) => {
    e.preventDefault();
    e.stopPropagation();
    setIsDragging(false);
  };

  const handleDragOver = (e: React.DragEvent<HTMLDivElement>) => {
    e.preventDefault();
    e.stopPropagation();
  };

  const handleDrop = (e: React.DragEvent<HTMLDivElement>) => {
    e.preventDefault();
    e.stopPropagation();
    setIsDragging(false);

    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {
      const file = e.dataTransfer.files[0];
      if (file.type === "text/xml" || file.name.endsWith(".xml")) {
        setArquivo(file);
        setError(null);
      } else {
        setError("Por favor, selecione um arquivo XML v√°lido.");
      }
    }
  };

  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    if (e.target.files && e.target.files.length > 0) {
      const file = e.target.files[0];
      if (file.type === "text/xml" || file.name.endsWith(".xml")) {
        setArquivo(file);
        setError(null);
      } else {
        setError("Por favor, selecione um arquivo XML v√°lido.");
      }
    }
  };

  const enviarArquivo = async (e: React.FormEvent) => {
    e.preventDefault();

    const token = localStorage.getItem("token");
    console.log(token);

    if (!arquivo) {
      setError("Selecione um arquivo XML.");
      return;
    }

    setIsLoading(true);
    setError(null);

    try {
      const idSalvo = localStorage.getItem("usuarioId");
      console.log(idSalvo);

      if (!idSalvo || idSalvo === "null" || idSalvo === "undefined") {
        console.error("ID do usu√°rio inv√°lido no localStorage:", idSalvo);
        setError("Erro: ID do usu√°rio n√£o encontrado. Fa√ßa o login novamente.");
        setIsLoading(false);
        return;
      }

      const formData = new FormData();
      const email = localStorage.getItem("email") || "";
      console.log(email);
      formData.append("xml", arquivo);
      formData.append("usuarioEmail", email);
      // Faz upload do XML
      const respostaUpload = await fetch("http://localhost:8080/api/upload", {
        method: "POST",
        body: formData,
      });

      if (!respostaUpload.ok) {
        throw new Error("Erro ao enviar o arquivo para upload.");
      }

      // L√™ o conte√∫do de palavras-chave que o backend respondeu
      const resultadoUpload = await respostaUpload.json();
      const palavrasChave = resultadoUpload.keywords || ["Engenharia Qu√≠mica"];

      // Agora l√™ o conte√∫do do arquivo localmente para extrair dados (nome, nacionalidade, etc)
      const xmlText = await arquivo.text();
      const parser = new DOMParser();
      const xmlDoc = parser.parseFromString(xmlText, "application/xml");

      const nomeNode = xmlDoc.querySelector("DADOS-GERAIS");
      const nomeCompleto = nomeNode?.getAttribute("NOME-COMPLETO") || "";
      const nacionalidade = nomeNode?.getAttribute("NACIONALIDADE") || "";
      const paisNascimento = nomeNode?.getAttribute("PAIS-DE-NASCIMENTO") || "";
      const dataAtualizacaoRaw =
        xmlDoc.documentElement.getAttribute("DATA-ATUALIZACAO") || "";

      const partesNome = nomeCompleto.split(" ");
      const nomePesquisador = partesNome.slice(0, -1).join(" ");
      const sobrenome = partesNome.slice(-1).join(" ");

      let dataAtualizacao = null;
      if (dataAtualizacaoRaw.length === 8) {
        dataAtualizacao = `${dataAtualizacaoRaw.substring(
          4,
          8
        )}-${dataAtualizacaoRaw.substring(2, 4)}-${dataAtualizacaoRaw.substring(
          0,
          2
        )}`;
      }

      const jsonData = {
        usuario: { id: parseInt(idSalvo) }, // Troque por id do usu√°rio logado se tiver auth
        nomePesquisador: nomePesquisador,
        sobrenome: sobrenome,
        dataNascimento: null,
        nomeCitacoesBibliograficas: nomeCompleto,
        dataAtualizacao: dataAtualizacao,
        horaAtualizacao: "10:00:00",
        nacionalidade: nacionalidade,
        paisNascimento: paisNascimento,
        lattesId: null,
      };

      // Agora envia o pesquisador para o backend
      const respostaPesquisador = await fetch(
        "http://localhost:8080/api/pesquisadores/salvarPesquisador",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
          body: JSON.stringify(jsonData),
        }
      );

      if (!respostaPesquisador.ok) {
        console.error("### FALHA AO SALVAR PESQUISADOR ###");
        console.error("STATUS HTTP:", respostaPesquisador.status); // Ex: 400, 401, 500
        console.error("STATUS TEXT:", respostaPesquisador.statusText); // Ex: Bad Request, Unauthorized

        // Tenta ler a mensagem de erro que o seu backend (Java) enviou
        const errorText = await respostaPesquisador.text();
        console.error("RESPOSTA DO BACKEND:", errorText);

        throw new Error(
          `Erro ao salvar pesquisador. Status: ${respostaPesquisador.status}`
        );
      }

      const resultadoPesquisador = await respostaPesquisador.json();
      const idPesquisador = resultadoPesquisador.id;

      console.log("ID Pesquisador criado:", idPesquisador);

      // Por fim, redireciona para a tela de tags com id + tags
      const tagsQuery = encodeURIComponent(palavrasChave.join(","));
      router.push(
        `/selecionandoTags?tags=${tagsQuery}&idPesquisador=${idPesquisador}`
      );
    } catch (error) {
      console.error("Erro no processo:", error);
      setError("Erro ao processar o arquivo ou salvar o pesquisador.");
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="flex flex-col md:flex-row min-h-screen font-[family-name:var(--font-geist-sans)] bg-white dark:bg-gray-900">
      {/* Lado esquerdo */}
      <motion.div
        initial={{ opacity: 0, x: -20 }}
        animate={{ opacity: 1, x: 0 }}
        transition={{ duration: 0.5 }}
        className="w-full md:w-1/2 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 flex flex-col items-center justify-center py-8 md:py-12 px-4"
      >
        <div className="w-full max-w-md flex flex-col items-center justify-center">
          <motion.div
            initial={{ scale: 0.9 }}
            animate={{ scale: 1 }}
            transition={{ type: "spring", stiffness: 200, damping: 10 }}
            className="flex flex-col items-center"
          >
            <Image
              src="/images/logo_1.png"
              alt="Logo"
              width={200}
              height={200}
              quality={100}
              priority
              className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer"
            />
            <motion.p
              className="text-center mt-6 text-gray-700 dark:text-gray-300 text-xl md:text-2xl font-medium"
              initial={{ opacity: 0, y: 10 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: 0.2, duration: 0.5 }}
            >
              Fa√ßa o Upload do seu curr√≠culo Lattes para finalizar o seu
              cadastro
            </motion.p>
          </motion.div>
        </div>

        <motion.div
          className="w-full max-w-2xl flex justify-center mt-8"
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          transition={{ delay: 0.4, duration: 0.5 }}
        >
          <Image
            src="/images/ilustracao-importacao.png"
            alt="ilustracao-importacao"
            width={600}
            height={600}
            className="w-full max-w-md md:max-w-lg lg:max-w-xl h-auto object-contain transform hover:scale-105 transition-transform duration-500"
            quality={100}
            priority
          />
        </motion.div>
      </motion.div>

      {/* Lado direito */}
      <motion.div
        initial={{ opacity: 0, x: 20 }}
        animate={{ opacity: 1, x: 0 }}
        transition={{ duration: 0.5 }}
        className="w-full md:w-1/2 bg-gradient-to-br from-[#990000] to-[#660000] text-white flex flex-col items-center justify-center py-12 px-4"
      >
        <div className="w-full max-w-md flex flex-col items-center">
          <motion.h1
            className="text-2xl md:text-3xl font-bold mb-6 text-center"
            initial={{ opacity: 0, y: -10 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.2, duration: 0.5 }}
          >
            Upload do Curr√≠culo Lattes (XML)
          </motion.h1>

          <form onSubmit={enviarArquivo} className="w-full max-w-sm">
            <input
              id="arquivo"
              type="file"
              accept=".xml"
              onChange={handleFileChange}
              ref={fileInputRef}
              className="hidden"
            />

            <motion.div
              className={`w-full p-8 rounded-xl border-2 border-dashed min-h-[250px] ${
                isDragging ? "border-white bg-[#b30000]" : "border-[#ff9999]"
              } flex flex-col items-center justify-center cursor-pointer transition-all duration-300 mb-4`}
              onClick={() => fileInputRef.current?.click()}
              onDragEnter={handleDragEnter}
              onDragLeave={handleDragLeave}
              onDragOver={handleDragOver}
              onDrop={handleDrop}
              whileHover={{ scale: 1.02 }}
              whileTap={{ scale: 0.95 }}
            >
              <motion.div
                animate={{ y: isDragging ? [0, -5, 0] : 0 }}
                transition={{
                  repeat: isDragging ? Infinity : 0,
                  duration: 1,
                }}
              >
                <Image
                  src="/images/upload.png"
                  alt="curriculo-import"
                  width={120}
                  height={120}
                  className="mb-4"
                />
              </motion.div>

              <p className="text-center text-lg font-medium mb-2">
                {isDragging
                  ? "Solte seu arquivo aqui"
                  : "Arraste e solte ou clique para selecionar"}
              </p>
              <p className="text-center text-sm opacity-80">
                Apenas arquivos XML s√£o aceitos
              </p>
            </motion.div>

            {/* Mensagem de erro */}
            <AnimatePresence>
              {error && (
                <motion.div
                  initial={{ opacity: 0, height: 0 }}
                  animate={{ opacity: 1, height: "auto" }}
                  exit={{ opacity: 0, height: 0 }}
                  className="mb-4 w-full overflow-hidden"
                >
                  <div className="bg-red-100 dark:bg-red-900/20 border-l-4 border-red-500 text-red-700 dark:text-red-400 p-3 rounded">
                    <div className="flex items-center">
                      <svg
                        className="w-5 h-5 mr-2"
                        fill="currentColor"
                        viewBox="0 0 20 20"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          fillRule="evenodd"
                          d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                          clipRule="evenodd"
                        />
                      </svg>
                      <span className="font-medium">{error}</span>
                    </div>
                  </div>
                </motion.div>
              )}
            </AnimatePresence>

            {/* Arquivo selecionado */}
            <AnimatePresence>
              {arquivo && (
                <motion.div
                  initial={{ opacity: 0, height: 0 }}
                  animate={{ opacity: 1, height: "auto" }}
                  exit={{ opacity: 0, height: 0 }}
                  className="mb-6 overflow-hidden"
                >
                  <div className="bg-[#b30000] rounded-lg p-4 flex items-center justify-between">
                    <div className="flex items-center">
                      <svg
                        className="w-6 h-6 mr-2"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          strokeWidth={2}
                          d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                        />
                      </svg>
                      <span className="truncate max-w-xs">{arquivo.name}</span>
                    </div>
                    <button
                      type="button"
                      onClick={() => setArquivo(null)}
                      className="text-white hover:text-gray-200 transition-colors duration-200 cursor-pointer"
                    >
                      <svg
                        className="w-5 h-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          strokeWidth={2}
                          d="M6 18L18 6M6 6l12 12"
                        />
                      </svg>
                    </button>
                  </div>
                </motion.div>
              )}
            </AnimatePresence>

            <motion.button
              type="submit"
              className={`w-full py-3 px-6 rounded-lg font-medium text-[#990000] bg-white hover:bg-gray-100 transition-colors duration-300 flex items-center justify-center ${
                !arquivo ? "opacity-50 cursor-not-allowed" : "cursor-pointer"
              }`}
              disabled={!arquivo || isLoading}
              whileHover={arquivo ? { scale: 1.02 } : {}}
              whileTap={arquivo ? { scale: 0.95 } : {}}
            >
              {isLoading ? (
                <>
                  <svg
                    className="animate-spin -ml-1 mr-3 h-5 w-5 text-[#990000]"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                  >
                    <circle
                      className="opacity-25"
                      cx="12"
                      cy="12"
                      r="10"
                      stroke="currentColor"
                      strokeWidth="4"
                    ></circle>
                    <path
                      className="opacity-75"
                      fill="currentColor"
                      d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                    ></path>
                  </svg>
                  Processando...
                </>
              ) : (
                "Enviar para a API"
              )}
            </motion.button>
          </form>
        </div>
      </motion.div>

      <style jsx global>{`
        .cursor-pointer {
          cursor: pointer;
        }
        .cursor-pointer:hover {
          cursor: pointer;
        }
        button,
        input[type="text"],
        .tag-item {
          transition: all 0.3s ease;
        }
      `}</style>
    </div>
  );
}


### ARQUIVO: pesquisadores\page.tsx ###
"use client";

import { useState, useEffect } from "react";
import LayoutWrapper from "../components/LayoutWrapper";
import {
  Search,
  Filter,
  User,
  MapPin,
  Mail,
  Bookmark,
  Heart,
  Plus,
} from "lucide-react";
import { useRouter } from "next/navigation";

interface Pesquisador {
  id: number;
  nome: string;
  area: string;
  instituicao: string;
  localizacao: string;
  email: string;
  tags: string[];
  especialidades: string[];
  curtido: boolean;
  salvo: boolean;
}

export default function Pesquisadores() {
  const [pesquisadores, setPesquisadores] = useState<Pesquisador[]>([]);
  const [pesquisadoresFiltrados, setPesquisadoresFiltrados] = useState<
    Pesquisador[]
  >([]);
  const [termoBusca, setTermoBusca] = useState("");
  const [filtroArea, setFiltroArea] = useState("todas");
  const [carregando, setCarregando] = useState(true);
  const [showAddToList, setShowAddToList] = useState<number | null>(null);
  const [listas, setListas] = useState<any[]>([]);
  const router = useRouter();

  const mockPesquisadores: Pesquisador[] = [
    {
      id: 1,
      nome: "Dr. Carlos Silva",
      area: "Intelig√™ncia Artificial",
      instituicao: "Universidade de S√£o Paulo",
      localizacao: "S√£o Paulo, SP",
      email: "carlos.silva@usp.br",
      tags: ["Machine Learning", "Deep Learning", "Python", "TensorFlow"],
      especialidades: ["AI", "Computer Vision", "NLP"],
      curtido: false,
      salvo: false,
    },
    {
      id: 2,
      nome: "Dra. Maria Santos",
      area: "Ci√™ncia de Dados",
      instituicao: "Universidade Federal do Rio de Janeiro",
      localizacao: "Rio de Janeiro, RJ",
      email: "maria.santos@ufrj.br",
      tags: ["Big Data", "Python", "Estat√≠stica", "SQL"],
      especialidades: ["Data Analysis", "Business Intelligence", "Analytics"],
      curtido: true,
      salvo: false,
    },
    {
      id: 3,
      nome: "Dr. Jo√£o Pereira",
      area: "Seguran√ßa da Informa√ß√£o",
      instituicao: "Universidade Estadual de Campinas",
      localizacao: "Campinas, SP",
      email: "joao.pereira@unicamp.br",
      tags: ["Cybersecurity", "Networking", "Cryptography"],
      especialidades: ["Security", "Network Protection", "Encryption"],
      curtido: false,
      salvo: true,
    },
    {
      id: 4,
      nome: "Dra. Ana Oliveira",
      area: "Desenvolvimento Web",
      instituicao: "Universidade Federal de Minas Gerais",
      localizacao: "Belo Horizonte, MG",
      email: "ana.oliveira@ufmg.br",
      tags: ["React", "Node.js", "JavaScript", "TypeScript"],
      especialidades: ["Frontend", "Backend", "Full Stack"],
      curtido: false,
      salvo: false,
    },
    {
      id: 5,
      nome: "Dr. Pedro Costa",
      area: "Mobile Development",
      instituicao: "Universidade de Bras√≠lia",
      localizacao: "Bras√≠lia, DF",
      email: "pedro.costa@unb.br",
      tags: ["Flutter", "React Native", "iOS", "Android"],
      especialidades: ["Mobile", "Cross-platform", "UI/UX"],
      curtido: false,
      salvo: false,
    },
  ];

  useEffect(() => {
    setTimeout(() => {
      const pesquisadoresComEstado = mockPesquisadores.map((p) => ({
        ...p,
        curtido:
          localStorage.getItem("curtidos")?.includes(`pesquisador-${p.id}`) ||
          false,
        salvo:
          localStorage.getItem("salvos")?.includes(`pesquisador-${p.id}`) ||
          false,
      }));
      setPesquisadores(pesquisadoresComEstado);
      setPesquisadoresFiltrados(pesquisadoresComEstado);
      setCarregando(false);
    }, 1000);

    const listasSalvas = localStorage.getItem("listasPersonalizadas");
    if (listasSalvas) {
      setListas(JSON.parse(listasSalvas));
    }
  }, []);

  useEffect(() => {
    filtrarPesquisadores();
  }, [termoBusca, filtroArea, pesquisadores]);

  const filtrarPesquisadores = () => {
    let filtrados = pesquisadores;

    if (filtroArea !== "todas") {
      filtrados = filtrados.filter((p) => p.area === filtroArea);
    }

    if (termoBusca.trim()) {
      const termo = termoBusca.toLowerCase();
      filtrados = filtrados.filter(
        (p) =>
          p.nome.toLowerCase().includes(termo) ||
          p.area.toLowerCase().includes(termo) ||
          p.instituicao.toLowerCase().includes(termo) ||
          p.tags.some((tag) => tag.toLowerCase().includes(termo)) ||
          p.especialidades.some((esp) => esp.toLowerCase().includes(termo))
      );
    }

    setPesquisadoresFiltrados(filtrados);
  };

  const handleCurtir = (id: number) => {
    const listaCurtidos = JSON.parse(localStorage.getItem("curtidos") || "[]");
    const itemId = `pesquisador-${id}`;

    let novaLista;
    if (listaCurtidos.includes(itemId)) {
      novaLista = listaCurtidos.filter((item: string) => item !== itemId);
    } else {
      novaLista = [...listaCurtidos, itemId];
    }

    localStorage.setItem("curtidos", JSON.stringify(novaLista));

    setPesquisadores((prev) =>
      prev.map((p) => (p.id === id ? { ...p, curtido: !p.curtido } : p))
    );

    window.dispatchEvent(new Event("favoritosAtualizados"));
  };

  const handleSalvar = (id: number) => {
    const listaSalvos = JSON.parse(localStorage.getItem("salvos") || "[]");
    const itemId = `pesquisador-${id}`;

    let novaLista;
    if (listaSalvos.includes(itemId)) {
      novaLista = listaSalvos.filter((item: string) => item !== itemId);
    } else {
      novaLista = [...listaSalvos, itemId];
    }

    localStorage.setItem("salvos", JSON.stringify(novaLista));

    setPesquisadores((prev) =>
      prev.map((p) => (p.id === id ? { ...p, salvo: !p.salvo } : p))
    );
  };

  const handleAdicionarLista = (pesquisadorId: number, listaId: number) => {
    const listasAtualizadas = listas.map((lista) => {
      if (lista.id === listaId) {
        const itemId = `pesquisador-${pesquisadorId}`;
        if (!lista.itens.includes(itemId)) {
          return {
            ...lista,
            itens: [...lista.itens, itemId],
            count: lista.count + 1,
          };
        }
      }
      return lista;
    });

    setListas(listasAtualizadas);
    localStorage.setItem(
      "listasPersonalizadas",
      JSON.stringify(listasAtualizadas)
    );
    setShowAddToList(null);
  };

  const handleContato = (email: string) => {
    window.location.href = `mailto:${email}`;
  };

  const areasUnicas = [...new Set(pesquisadores.map((p) => p.area))];

  if (carregando) {
    return (
      <LayoutWrapper>
        <div className="flex items-center justify-center h-full">
          <div className="text-center">
            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-[#990000] mx-auto"></div>
            <p className="mt-4 text-gray-600 dark:text-gray-400">
              Carregando pesquisadores...
            </p>
          </div>
        </div>
      </LayoutWrapper>
    );
  }

  return (
    <LayoutWrapper>
      <div className="p-4 md:p-6">
        <div className="max-w-7xl mx-auto">
          <h1 className="text-2xl md:text-3xl font-bold text-[#990000] dark:text-red-400 mb-6">
            Pesquisadores
          </h1>

          <div className="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 md:p-6 mb-6">
            <div className="flex flex-col md:flex-row gap-4 mb-6">
              <div className="flex-1 relative">
                <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" />
                <input
                  type="text"
                  placeholder="Buscar pesquisadores por nome, √°rea, tags..."
                  value={termoBusca}
                  onChange={(e) => setTermoBusca(e.target.value)}
                  className="w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#990000] dark:bg-gray-700 dark:text-white"
                />
              </div>

              <div className="flex items-center space-x-2">
                <Filter className="text-gray-400" />
                <select
                  value={filtroArea}
                  onChange={(e) => setFiltroArea(e.target.value)}
                  className="border border-gray-300 dark:border-gray-600 rounded px-3 py-3 dark:bg-gray-700 dark:text-white cursor-pointer"
                >
                  <option value="todas">Todas as √°reas</option>
                  {areasUnicas.map((area) => (
                    <option key={area} value={area}>
                      {area}
                    </option>
                  ))}
                </select>
              </div>
            </div>

            <div className="flex justify-between items-center mb-6">
              <p className="text-gray-600 dark:text-gray-400">
                {pesquisadoresFiltrados.length} pesquisador(es) encontrado(s)
              </p>
            </div>

            <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
              {pesquisadoresFiltrados.map((pesquisador) => (
                <div
                  key={pesquisador.id}
                  className="border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:shadow-lg transition-all bg-white dark:bg-gray-800 relative"
                >
                  <div className="flex justify-between items-start mb-4">
                    <div className="flex items-center space-x-3">
                      <div className="w-12 h-12 bg-[#990000] rounded-full flex items-center justify-center">
                        <User className="w-6 h-6 text-white" />
                      </div>
                      <div>
                        <h3 className="font-semibold text-gray-900 dark:text-white">
                          {pesquisador.nome}
                        </h3>
                        <p className="text-sm text-[#990000] dark:text-red-400">
                          {pesquisador.area}
                        </p>
                      </div>
                    </div>
                    <div className="flex space-x-2">
                      <button
                        onClick={() => handleCurtir(pesquisador.id)}
                        className={`p-2 rounded-full ${
                          pesquisador.curtido
                            ? "bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-400"
                            : "bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"
                        } cursor-pointer`}
                      >
                        <Heart
                          className="w-4 h-4"
                          fill={pesquisador.curtido ? "currentColor" : "none"}
                        />
                      </button>
                      <button
                        onClick={() => handleSalvar(pesquisador.id)}
                        className={`p-2 rounded-full ${
                          pesquisador.salvo
                            ? "bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400"
                            : "bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"
                        } cursor-pointer`}
                      >
                        <Bookmark
                          className="w-4 h-4"
                          fill={pesquisador.salvo ? "currentColor" : "none"}
                        />
                      </button>
                      <button
                        onClick={() =>
                          setShowAddToList(
                            showAddToList === pesquisador.id
                              ? null
                              : pesquisador.id
                          )
                        }
                        className="p-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 cursor-pointer"
                      >
                        <Plus className="w-4 h-4" />
                      </button>
                    </div>
                  </div>

                  {showAddToList === pesquisador.id && (
                    <div className="absolute top-16 right-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 p-2 min-w-48">
                      <p className="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 px-2">
                        Adicionar √† lista:
                      </p>
                      {listas.length > 0 ? (
                        listas.map((lista) => (
                          <button
                            key={lista.id}
                            onClick={() =>
                              handleAdicionarLista(pesquisador.id, lista.id)
                            }
                            className="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-600 rounded cursor-pointer"
                          >
                            {lista.nome}
                          </button>
                        ))
                      ) : (
                        <p className="text-sm text-gray-500 dark:text-gray-400 px-2 py-1">
                          Nenhuma lista criada
                        </p>
                      )}
                    </div>
                  )}

                  <div className="space-y-2 mb-4">
                    <div className="flex items-center text-sm text-gray-600 dark:text-gray-400">
                      <MapPin className="w-4 h-4 mr-2" />
                      {pesquisador.instituicao}
                    </div>
                    <div className="flex items-center text-sm text-gray-600 dark:text-gray-400">
                      <MapPin className="w-4 h-4 mr-2" />
                      {pesquisador.localizacao}
                    </div>
                  </div>

                  <div className="mb-4">
                    <div className="flex flex-wrap gap-1">
                      {pesquisador.tags.slice(0, 3).map((tag, index) => (
                        <span
                          key={index}
                          className="px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs rounded-full"
                        >
                          {tag}
                        </span>
                      ))}
                      {pesquisador.tags.length > 3 && (
                        <span className="px-2 py-1 text-xs text-gray-500 dark:text-gray-400">
                          +{pesquisador.tags.length - 3}
                        </span>
                      )}
                    </div>
                  </div>

                  <div className="flex space-x-2">
                    <button
                      onClick={() =>
                        router.push(`/perfilPesquisador/${pesquisador.id}`)
                      }
                      className="flex-1 bg-[#990000] text-white py-2 px-4 rounded-lg hover:bg-red-800 transition-colors text-sm cursor-pointer"
                    >
                      Ver Perfil
                    </button>
                    <button
                      onClick={() => handleContato(pesquisador.email)}
                      className="flex items-center justify-center p-2 border border-[#990000] text-[#990000] dark:text-red-400 rounded-lg hover:bg-[#990000] hover:text-white transition-colors cursor-pointer"
                    >
                      <Mail className="w-4 h-4" />
                    </button>
                  </div>
                </div>
              ))}
            </div>

            {pesquisadoresFiltrados.length === 0 && (
              <div className="text-center py-12">
                <User className="w-16 h-16 text-gray-400 mx-auto mb-4" />
                <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                  Nenhum pesquisador encontrado
                </h3>
                <p className="text-gray-600 dark:text-gray-400">
                  Tente ajustar seus filtros ou termos de busca.
                </p>
              </div>
            )}
          </div>
        </div>
      </div>
    </LayoutWrapper>
  );
}


### ARQUIVO: redefinir-senha\page.tsx ###
"use client";

import { useRouter, useSearchParams } from "next/navigation";
import Image from "next/image";
import { useState, useEffect } from "react";
import Link from "next/link";

export default function RedefinirSenha() {
  const router = useRouter();
  const searchParams = useSearchParams();
  const token = searchParams.get("token");

  const [senha, setSenha] = useState("");
  const [confirmarSenha, setConfirmarSenha] = useState("");
  const [erro, setErro] = useState("");
  const [sucesso, setSucesso] = useState("");
  const [loading, setLoading] = useState(false);
  const [tokenValido, setTokenValido] = useState(false);
  const [verificandoToken, setVerificandoToken] = useState(true);

  // Verificar se o token √© v√°lido
  useEffect(() => {
    const verificarToken = async () => {
      if (!token) {
        setErro("Token de redefini√ß√£o inv√°lido ou expirado.");
        setVerificandoToken(false);
        return;
      }

      try {
        // Aqui voc√™ pode fazer uma chamada para verificar se o token √© v√°lido
        // Por enquanto, vamos assumir que √© v√°lido se existir
        setTokenValido(true);
      } catch (error) {
        setErro("Token de redefini√ß√£o inv√°lido ou expirado.");
      } finally {
        setVerificandoToken(false);
      }
    };

    verificarToken();
  }, [token]);

  const validarSenha = (senha: string) => {
    return /^(?=.*[0-9])(?=.*[!@#$%^&*]).{8,}$/.test(senha);
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    if (!token) {
      setErro("Token de redefini√ß√£o n√£o encontrado.");
      return;
    }

    if (!validarSenha(senha)) {
      setErro(
        "A senha deve ter no m√≠nimo 8 caracteres, incluir um n√∫mero e um caractere especial."
      );
      return;
    }

    if (senha !== confirmarSenha) {
      setErro("As senhas n√£o coincidem.");
      return;
    }

    setErro("");
    setSucesso("");
    setLoading(true);

    try {
      const res = await fetch(
        "http://localhost:8080/api/usuarios/redefinir-senha",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            token: token,
            novaSenha: senha,
          }),
        }
      );

      if (res.ok) {
        setSucesso(
          "Senha redefinida com sucesso! Redirecionando para o login..."
        );
        setSenha("");
        setConfirmarSenha("");

        // Redirecionar para login ap√≥s 3 segundos
        setTimeout(() => {
          router.push("/login");
        }, 3000);
      } else {
        const errorData = await res.json();
        setErro(errorData.message || "Erro ao redefinir senha");
      }
    } catch (error) {
      console.error("Erro:", error);
      setErro("Erro ao conectar com o servidor");
    } finally {
      setLoading(false);
    }
  };

  if (verificandoToken) {
    return (
      <div className="flex flex-col md:flex-row h-screen bg-white dark:bg-gray-900">
        <div className="hidden md:flex w-1/3 bg-red-800 items-end justify-start overflow-visible relative">
          <div className="relative h-auto w-[120%] -right-[11.11%]">
            <Image
              src="/images/login.png"
              alt="Login"
              width={500}
              height={900}
              quality={100}
              priority
              className="object-contain drop-shadow-lg absolute bottom-0"
            />
          </div>
        </div>
        <div className="flex-1 flex items-center justify-center bg-white dark:bg-gray-900">
          <div className="text-center">
            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-[#990000] mx-auto"></div>
            <p className="text-xl mt-4 dark:text-white">Verificando token...</p>
          </div>
        </div>
      </div>
    );
  }

  if (!tokenValido) {
    return (
      <div className="flex flex-col md:flex-row h-screen bg-white dark:bg-gray-900">
        <div className="hidden md:flex w-1/3 bg-red-800 items-end justify-start overflow-visible relative">
          <div className="relative h-auto w-[120%] -right-[11.11%]">
            <Image
              src="/images/login.png"
              alt="Login"
              width={500}
              height={900}
              quality={100}
              priority
              className="object-contain drop-shadow-lg absolute bottom-0"
            />
          </div>
        </div>
        <div className="flex-1 flex items-center justify-center bg-white dark:bg-gray-900">
          <div className="text-center">
            <Image
              src="/images/logo_1.png"
              alt="Logo"
              width={150}
              height={150}
              className="mx-auto mb-6"
            />
            <h2 className="text-2xl font-bold text-red-600 mb-4">
              Token Inv√°lido
            </h2>
            <p className="text-gray-600 dark:text-gray-300 mb-6">{erro}</p>
            <Link
              href="/esqueci-senha"
              className="text-[#990000] dark:text-red-400 font-medium hover:underline"
            >
              Solicitar novo link de redefini√ß√£o
            </Link>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="flex flex-col md:flex-row h-screen bg-white dark:bg-gray-900">
      {/* Lado esquerdo: imagem */}
      <div className="hidden md:flex w-1/3 bg-red-800 items-end justify-start overflow-visible relative">
        <div className="relative h-auto w-[120%] -right-[11.11%]">
          <Image
            src="/images/login.png"
            alt="Login"
            width={500}
            height={900}
            quality={100}
            priority
            className="object-contain drop-shadow-lg absolute bottom-0"
          />
        </div>
      </div>

      {/* Lado direito: formul√°rio */}
      <div className="flex-1 flex items-start justify-center bg-white dark:bg-gray-900 pt-12 px-4 md:px-0">
        <div className="w-full max-w-md">
          <Image
            src="/images/logo_1.png"
            alt="Logo"
            width={150}
            height={150}
            quality={100}
            priority
            className="drop-shadow-lg transform hover:scale-105 transition-transform duration-300 cursor-pointer mx-auto"
          />

          <h2 className="text-xl font-semibold mb-4 mt-12 text-center md:text-left dark:text-white">
            Redefinir Senha
          </h2>

          <p className="text-gray-600 dark:text-gray-300 mb-6 text-center md:text-left">
            Digite sua nova senha abaixo.
          </p>

          {/* Formul√°rio */}
          <form onSubmit={handleSubmit} className="space-y-6">
            <div className="relative">
              <input
                type="password"
                placeholder=" "
                value={senha}
                onChange={(e) => setSenha(e.target.value)}
                required
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-900
                           focus:border-red-700 focus:outline-none focus:ring-0
                           text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-2 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                               peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                               peer-placeholder-shown:top-2
                               peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Nova Senha*
              </label>
            </div>

            <div className="relative">
              <input
                type="password"
                placeholder=" "
                value={confirmarSenha}
                onChange={(e) => setConfirmarSenha(e.target.value)}
                required
                className="peer w-full border-0 border-b-2 border-gray-500 dark:border-gray-400 bg-transparent dark:bg-gray-900
                           focus:border-red-700 focus:outline-none focus:ring-0
                           text-gray-700 dark:text-white py-2 px-2 transition-colors duration-300"
              />
              <label
                className="absolute left-2 -top-3.5 text-gray-500 dark:text-gray-400 text-sm transition-all
                               peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-700 dark:peer-placeholder-shown:text-gray-400
                               peer-placeholder-shown:top-2
                               peer-focus:-top-3.5 peer-focus:text-red-700 peer-focus:text-sm"
              >
                Confirmar Nova Senha*
              </label>
            </div>

            {erro && <p className="text-red-600 text-sm">{erro}</p>}
            {sucesso && <p className="text-green-600 text-sm">{sucesso}</p>}

            <button
              type="submit"
              disabled={loading}
              className="w-full bg-red-800 text-white p-3 rounded-lg hover:bg-red-900 transition disabled:opacity-50 cursor-pointer"
            >
              {loading ? "Redefinindo..." : "Redefinir Senha"}
            </button>
          </form>

          <div className="text-center mt-4">
            <p className="text-sm dark:text-gray-400">
              Lembrou sua senha?{" "}
              <Link
                href="/login"
                className="text-red-700 dark:text-red-400 font-medium hover:underline"
              >
                Fazer login
              </Link>
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}


### ARQUIVO: selecionandoTags\page.tsx ###
import { Suspense } from 'react';
import TagsSelector from './TagsSelector';

export default function SelecionandoTagsPage() {
  return (
    <div>
      <Suspense fallback={<p>Carregando...</p>}>
        <TagsSelector />
      </Suspense>
    </div>
  );
}

### ARQUIVO: selecionandoTags\TagsSelector.tsx ###
"use client";

import { useSearchParams, useRouter } from "next/navigation";
import { useState, useEffect } from "react";
import { FiSearch, FiX, FiArrowRight, FiAlertCircle } from "react-icons/fi";
import { motion, AnimatePresence } from "framer-motion";

export default function TagsSelector() {
  const router = useRouter();
  const searchParams = useSearchParams();
  const tagsQuery = searchParams.get("tags");
  const idPesquisador = searchParams.get("idPesquisador");

  const [tagsSelecionadas, setTagsSelecionadas] = useState<string[]>([]);
  const [novaTag, setNovaTag] = useState("");
  const [isLoading, setIsLoading] = useState(true);
  const [erro, setErro] = useState("");

  useEffect(() => {
    if (tagsQuery) {
      const tagsArray = tagsQuery
        .split(",")
        .map((tag) => tag.trim())
        .filter((tag) => tag !== "");
      setTagsSelecionadas(tagsArray);
    }
    setIsLoading(false);
  }, [tagsQuery]);

  const handleAddTag = () => {
    const tagFormatada = novaTag.trim();

    if (tagFormatada === "") {
      setErro("Por favor, digite uma tag v√°lida");
      return;
    }

    if (tagsSelecionadas.includes(tagFormatada)) {
      setErro("Esta tag j√° foi adicionada");
      return;
    }

    setTagsSelecionadas([...tagsSelecionadas, tagFormatada]);
    setNovaTag("");
    setErro("");
  };

  const handleRemoveTag = (tagParaRemover: string) => {
    setTagsSelecionadas(
      tagsSelecionadas.filter((tag) => tag !== tagParaRemover)
    );
    setErro("");
  };

  const handleContinuar = async () => {
    if (!idPesquisador) {
      setErro("ID do pesquisador n√£o encontrado");
      return;
    }

    if (tagsSelecionadas.length === 0) {
      setErro("Adicione pelo menos uma tag antes de continuar");
      return;
    }

    setIsLoading(true);

    try {
      const token = localStorage.getItem("token");
      if (!token) {
        throw new Error("Token n√£o encontrado");
      }

      const tagData = {
        pesquisador: { id: Number(idPesquisador) },
        listaTags: tagsSelecionadas,
      };

      const resposta = await fetch("http://localhost:8080/api/tags/salvarTag", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${token}`,
        },
        body: JSON.stringify(tagData),
      });

      if (!resposta.ok) {
        const errorText = await resposta.text();
        throw new Error(`Erro ao salvar tags: ${errorText}`);
      }

      const data = await resposta.json();

      localStorage.setItem(
        `tags_${idPesquisador}`,
        JSON.stringify(tagsSelecionadas)
      );

      window.dispatchEvent(
        new CustomEvent("tagsUpdated", {
          detail: { tags: tagsSelecionadas, pesquisadorId: idPesquisador },
        })
      );

      window.dispatchEvent(new Event("userDataUpdated"));

      router.push(
        `/telaPerfil?tagsUpdated=true&pesquisadorId=${idPesquisador}`
      );
    } catch (error) {
      setErro("N√£o foi poss√≠vel salvar as tags. Tente novamente.");
    } finally {
      setIsLoading(false);
    }
  };

  const PulsePlaceholder = () => (
    <div className="flex space-x-2 animate-pulse">
      <div className="h-3 w-3 rounded-full bg-gray-300"></div>
      <div className="h-3 w-3 rounded-full bg-gray-300"></div>
      <div className="h-3 w-3 rounded-full bg-gray-300"></div>
    </div>
  );

  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{ duration: 0.5 }}
      className="flex flex-col items-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 px-4 sm:px-6 lg:px-8 py-8 sm:py-12"
    >
      {/* Cabe√ßalho */}
      <div className="w-full max-w-4xl mb-6 sm:mb-8 lg:mb-10 text-center">
        <motion.h1
          initial={{ y: -20, opacity: 0 }}
          animate={{ y: 0, opacity: 1 }}
          transition={{ delay: 0.2, duration: 0.5 }}
          className="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white mb-3 sm:mb-4"
        >
          Escolha as tags que mais combinam com voc√™!
        </motion.h1>

        <motion.p
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          transition={{ delay: 0.3 }}
          className="text-sm sm:text-base lg:text-lg text-gray-600 dark:text-gray-300 px-2 sm:px-0"
        >
          Elas foram geradas automaticamente a partir das palavras-chave
          encontradas no seu curr√≠culo e ajudam a destacar suas √°reas de
          atua√ß√£o. Voc√™ pode edit√°-las a qualquer momento, se desejar.
        </motion.p>
      </div>

      {/* Container principal */}
      <motion.div
        initial={{ scale: 0.98, opacity: 0 }}
        animate={{ scale: 1, opacity: 1 }}
        transition={{ delay: 0.4, duration: 0.5 }}
        className="bg-white dark:bg-gray-800 rounded-xl sm:rounded-2xl w-full max-w-4xl shadow-md sm:shadow-lg border border-gray-200 dark:border-gray-700 p-4 sm:p-6 md:p-8 lg:p-10"
      >
        {/* Campo de input */}
        <div className="mb-2 sm:mb-3">
          <motion.div whileHover={{ scale: 1.005 }} className="relative w-full">
            <input
              type="text"
              placeholder="Adicionar outras tags"
              value={novaTag}
              onChange={(e) => {
                setNovaTag(e.target.value);
                setErro("");
              }}
              onKeyDown={(e) => {
                if (e.key === "Enter") {
                  e.preventDefault();
                  handleAddTag();
                }
              }}
              className={`w-full border-2 ${
                erro ? "border-red-500" : "border-gray-200 dark:border-gray-600"
              } rounded-full px-4 sm:px-6 py-2 sm:py-3 text-base sm:text-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 ${
                erro ? "focus:ring-red-200" : "focus:ring-red-200"
              } pr-12 sm:pr-14 placeholder-gray-500 dark:placeholder-gray-400 bg-white dark:bg-gray-700 shadow-sm transition-all duration-300`}
            />
            <motion.button
              whileHover={{ scale: 1.1 }}
              whileTap={{ scale: 0.9 }}
              onClick={handleAddTag}
              className="absolute right-3 sm:right-4 top-1/2 transform -translate-y-1/2 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 cursor-pointer transition-colors duration-200"
              aria-label="Adicionar tag"
            >
              <FiSearch size={20} className="sm:w-6 sm:h-6" />
            </motion.button>
          </motion.div>

          {/* Mensagem de erro */}
          <AnimatePresence>
            {erro && (
              <motion.div
                initial={{ opacity: 0, y: -10 }}
                animate={{ opacity: 1, y: 0 }}
                exit={{ opacity: 0, y: -10 }}
                transition={{ duration: 0.2 }}
                className="flex items-center mt-1 sm:mt-2 ml-3 sm:ml-4 text-red-600 dark:text-red-400 text-xs sm:text-sm"
              >
                <FiAlertCircle className="mr-1 w-3 h-3 sm:w-4 sm:h-4" />
                <span>{erro}</span>
              </motion.div>
            )}
          </AnimatePresence>
        </div>

        {/* √Årea de tags */}
        <div className="w-full min-h-40 sm:min-h-52 p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl bg-gray-50 dark:bg-gray-700 border-2 border-gray-200 dark:border-gray-600 transition-all duration-300 hover:border-gray-300 dark:hover:border-gray-500">
          {isLoading ? (
            <div className="flex items-center justify-center h-32 sm:h-40">
              <PulsePlaceholder />
            </div>
          ) : (
            <AnimatePresence>
              {tagsSelecionadas.length > 0 ? (
                <div className="flex flex-wrap gap-2 sm:gap-3 md:gap-4">
                  {tagsSelecionadas.map((tag) => (
                    <motion.div
                      key={tag}
                      layout
                      initial={{ opacity: 0, scale: 0.95, y: 10 }}
                      animate={{ opacity: 1, scale: 1, y: 0 }}
                      exit={{ opacity: 0, scale: 0.9, x: 20 }}
                      transition={{
                        type: "spring",
                        stiffness: 500,
                        damping: 30,
                      }}
                      whileHover={{ scale: 1.05 }}
                      className="flex items-center gap-2 sm:gap-3 border-2 border-gray-200 dark:border-gray-600 rounded-full px-3 sm:px-4 md:px-5 py-1 sm:py-2 md:py-3 bg-white dark:bg-gray-800 text-gray-800 dark:text-white text-sm sm:text-base font-semibold shadow-sm hover:shadow-md transition-all duration-200"
                    >
                      <motion.span
                        whileHover={{ scale: 1.2 }}
                        whileTap={{ scale: 0.8 }}
                      >
                        <FiX
                          size={14}
                          className="sm:w-4 sm:h-4 md:w-[18px] md:h-[18px] text-red-600 dark:text-red-400 cursor-pointer hover:text-red-800 dark:hover:text-red-300 transition-colors duration-200"
                          onClick={() => handleRemoveTag(tag)}
                          aria-label={`Remover tag ${tag}`}
                        />
                      </motion.span>
                      <span className="truncate max-w-[120px] sm:max-w-[150px] md:max-w-xs">
                        {tag}
                      </span>
                    </motion.div>
                  ))}
                </div>
              ) : (
                <motion.div
                  initial={{ opacity: 0 }}
                  animate={{ opacity: 1 }}
                  className="flex items-center justify-center h-32 sm:h-40"
                >
                  <p className="text-gray-500 dark:text-gray-400 text-sm sm:text-base md:text-lg">
                    Adicione tags para come√ßar...
                  </p>
                </motion.div>
              )}
            </AnimatePresence>
          )}
        </div>
      </motion.div>

      {/* Bot√£o continuar */}
      <motion.div
        className="flex justify-end w-full max-w-4xl mt-4 sm:mt-5 md:mt-6"
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ delay: 0.6 }}
      >
        <motion.button
          onClick={handleContinuar}
          disabled={tagsSelecionadas.length === 0 || isLoading}
          whileHover={
            tagsSelecionadas.length > 0 && !isLoading
              ? {
                  scale: 1.03,
                  boxShadow: "0px 5px 15px rgba(176, 0, 0, 0.3)",
                }
              : {}
          }
          whileTap={
            tagsSelecionadas.length > 0 && !isLoading ? { scale: 0.97 } : {}
          }
          className={`flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 md:px-10 py-2 sm:py-2.5 md:py-3 rounded-md font-semibold text-white text-base sm:text-lg transition-all duration-300 ${
            tagsSelecionadas.length === 0 || isLoading
              ? "bg-gray-400 cursor-not-allowed"
              : "bg-[#b00000] hover:bg-[#900000] cursor-pointer shadow-md"
          }`}
          aria-label="Continuar para o pr√≥ximo passo"
        >
          {isLoading ? (
            <>
              <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-white"></div>
              Salvando...
            </>
          ) : (
            <>
              Continuar
              <motion.span
                animate={tagsSelecionadas.length > 0 ? { x: [0, 5, 0] } : {}}
                transition={
                  tagsSelecionadas.length > 0
                    ? {
                        repeat: Infinity,
                        duration: 1.5,
                        ease: "easeInOut",
                      }
                    : {}
                }
              >
                <FiArrowRight size={18} className="sm:w-5 sm:h-5" />
              </motion.span>
            </>
          )}
        </motion.button>
      </motion.div>
    </motion.div>
  );
}


### ARQUIVO: telaEdicaoPesquisador\EditProfileForm.tsx ###
"use client";

import { useState, useEffect, useRef } from "react";
import { Trash2, Search, Camera } from "lucide-react";
import Image from "next/image";
import { useRouter } from "next/navigation";
import LayoutWrapper from "../components/LayoutWrapper";
import { useUser } from "../contexts/UserContext";

export default function EditProfileForm() {
  const router = useRouter();
  const { userData, refreshUserData, updateUserPhoto } = useUser();

  const [loading, setLoading] = useState(false);
  const [imagePreview, setImagePreview] = useState<string | null>(null);
  const [selectedImage, setSelectedImage] = useState<File | null>(null);
  const fileInputRef = useRef<HTMLInputElement>(null);

  const [formData, setFormData] = useState({
    nomePesquisador: "",
    sobrenome: "",
    dataNascimento: "",
    nacionalidade: "",
    paisNascimento: "",
    nomeCitacoesBibliograficas: "",
    telefone: "",
    email: "",
  });

  const [tags, setTags] = useState<string[]>([]);
  const [newTag, setNewTag] = useState("");
  const [tagId, setTagId] = useState<number | null>(null);
  const [pesquisadorId, setPesquisadorId] = useState<number | null>(null);
  const [dadosCarregados, setDadosCarregados] = useState(false);

  const formatarTelefone = (value: string) => {
    const numbers = value.replace(/\D/g, "");
    const limited = numbers.slice(0, 11);

    if (limited.length <= 10) {
      return limited
        .replace(/(\d{2})(\d)/, "($1) $2")
        .replace(/(\d{4})(\d)/, "$1-$2");
    } else {
      return limited
        .replace(/(\d{2})(\d)/, "($1) $2")
        .replace(/(\d{5})(\d)/, "$1-$2");
    }
  };

  useEffect(() => {
    const carregarDados = async () => {
      if (!userData) {
        return;
      }

      const id = userData.pesquisador?.id;
      if (!id) {
        return;
      }

      setPesquisadorId(id);

      if (userData.pesquisador) {
        let telefoneParaPreencher = userData.pesquisador.telefone || "";

        if (!telefoneParaPreencher && userData.id) {
          const telefoneSalvo = localStorage.getItem(`telefone_${userData.id}`);
          if (telefoneSalvo) {
            telefoneParaPreencher = telefoneSalvo;
          }
        }

        setFormData({
          nomePesquisador: userData.pesquisador.nomePesquisador || "",
          sobrenome: userData.pesquisador.sobrenome || "",
          dataNascimento: userData.pesquisador.dataNascimento || "",
          nacionalidade: userData.pesquisador.nacionalidade || "",
          paisNascimento: userData.pesquisador.paisNascimento || "",
          nomeCitacoesBibliograficas:
            userData.pesquisador.nomeCitacoesBibliograficas || "",
          telefone: telefoneParaPreencher,
          email: userData.login || "",
        });
      }

      await carregarTags(id);
      carregarImagemPerfil();

      setDadosCarregados(true);
    };

    carregarDados();
  }, [userData]);

  const carregarTags = async (id: number) => {
    try {
      const token = localStorage.getItem("token");
      if (!token) {
        return;
      }

      const response = await fetch(
        `http://localhost:8080/api/tags/pesquisador/${id}`,
        {
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
        }
      );

      if (response.ok) {
        const tagsData = await response.json();

        let tagsArray: string[] = [];

        if (tagsData && typeof tagsData === "object") {
          if (Array.isArray(tagsData)) {
            tagsArray = tagsData;
          } else if (Array.isArray(tagsData.listaTags)) {
            tagsArray = tagsData.listaTags;
          } else if (Array.isArray(tagsData.tags)) {
            tagsArray = tagsData.tags;
          } else if (tagsData.id && Array.isArray(tagsData.listaTags)) {
            tagsArray = tagsData.listaTags;
            setTagId(tagsData.id);
          } else if (tagsData.nome) {
            tagsArray = [tagsData.nome];
          } else {
            for (const key in tagsData) {
              if (Array.isArray(tagsData[key]) && tagsData[key].length > 0) {
                tagsArray = tagsData[key];
                break;
              }
            }
          }
        }

        if (tagsArray.length > 0) {
          setTags(tagsArray);
          localStorage.setItem(`tags_${id}`, JSON.stringify(tagsArray));
        } else {
          await carregarTagsDoLocalStorage(id);
        }
      } else if (response.status === 404) {
        await carregarTagsDoLocalStorage(id);
      } else {
        await carregarTagsDoLocalStorage(id);
      }
    } catch (error) {
      await carregarTagsDoLocalStorage(id);
    }
  };

  const carregarTagsDoLocalStorage = async (id: number) => {
    const tagsSalvas = localStorage.getItem(`tags_${id}`);

    if (tagsSalvas) {
      try {
        const tagsArray = JSON.parse(tagsSalvas);
        if (tagsArray.length > 0) {
          setTags(tagsArray);
        } else {
          setTags([]);
        }
      } catch (error) {
        setTags([]);
      }
    } else {
      setTags([]);
    }
  };

  const carregarImagemPerfil = () => {
    if (userData?.fotoPerfil) {
      setImagePreview(userData.fotoPerfil);
    } else {
      const savedPhoto = localStorage.getItem(`userPhoto_${userData?.id}`);
      if (savedPhoto) {
        setImagePreview(savedPhoto);
      } else {
        setImagePreview("/images/user.png");
      }
    }
  };

  const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0];
    if (file) {
      if (!file.type.startsWith("image/")) {
        alert("Por favor, selecione um arquivo de imagem v√°lido.");
        return;
      }

      if (file.size > 5 * 1024 * 1024) {
        alert("A imagem deve ter no m√°ximo 5MB.");
        return;
      }

      setSelectedImage(file);

      const reader = new FileReader();
      reader.onload = (e) => {
        const result = e.target?.result as string;
        setImagePreview(result);
      };
      reader.readAsDataURL(file);
    }
  };

  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const { name, value } = e.target;

    if (name === "telefone") {
      const formattedValue = formatarTelefone(value);
      setFormData((prev) => ({
        ...prev,
        [name]: formattedValue,
      }));
    } else {
      setFormData((prev) => ({
        ...prev,
        [name]: value,
      }));
    }
  };

  const addTag = () => {
    const tagFormatada = newTag.trim();

    if (tagFormatada === "") {
      alert("Por favor, digite uma tag v√°lida");
      return;
    }

    if (tags.includes(tagFormatada)) {
      alert("Esta tag j√° foi adicionada");
      return;
    }

    const novasTags = [...tags, tagFormatada];
    setTags(novasTags);
    setNewTag("");

    if (pesquisadorId) {
      localStorage.setItem(`tags_${pesquisadorId}`, JSON.stringify(novasTags));
    }
  };

  const removeTag = (tagParaRemover: string) => {
    const novasTags = tags.filter((tag) => tag !== tagParaRemover);
    setTags(novasTags);

    if (pesquisadorId) {
      localStorage.setItem(`tags_${pesquisadorId}`, JSON.stringify(novasTags));
    }
  };

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === "Enter") {
      e.preventDefault();
      addTag();
    }
  };

  const updateTags = async (): Promise<boolean> => {
    if (!pesquisadorId) {
      return false;
    }

    try {
      const token = localStorage.getItem("token");
      if (!token) {
        return false;
      }

      const tagData = {
        pesquisador: { id: pesquisadorId },
        listaTags: tags,
      };

      const response = await fetch(`http://localhost:8080/api/tags/salvarTag`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${token}`,
        },
        body: JSON.stringify(tagData),
      });

      if (response.ok) {
        localStorage.setItem(`tags_${pesquisadorId}`, JSON.stringify(tags));
        return true;
      } else {
        localStorage.setItem(`tags_${pesquisadorId}`, JSON.stringify(tags));
        return false;
      }
    } catch (error) {
      localStorage.setItem(`tags_${pesquisadorId}`, JSON.stringify(tags));
      return false;
    }
  };

  const handleUpdateProfile = async () => {
    if (!pesquisadorId) {
      alert("ID do pesquisador n√£o encontrado.");
      return;
    }

    if (!formData.nomePesquisador.trim() || !formData.sobrenome.trim()) {
      alert("Nome e sobrenome s√£o obrigat√≥rios.");
      return;
    }

    setLoading(true);

    try {
      const token = localStorage.getItem("token");
      if (!token) {
        throw new Error("Token n√£o encontrado");
      }

      const telefoneParaEnviar =
        formData.telefone.trim() !== ""
          ? formData.telefone
          : userData?.pesquisador?.telefone || "";

      const perfilResponse = await fetch(
        `http://localhost:8080/api/pesquisadores/atualizarPerfil/${pesquisadorId}`,
        {
          method: "PUT",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
          body: JSON.stringify({
            nomePesquisador: formData.nomePesquisador,
            sobrenome: formData.sobrenome,
            dataNascimento: formData.dataNascimento || null,
            nacionalidade: formData.nacionalidade,
            paisNascimento: formData.paisNascimento,
            nomeCitacoesBibliograficas: formData.nomeCitacoesBibliograficas,
            telefone: telefoneParaEnviar,
          }),
        }
      );

      if (!perfilResponse.ok) {
        const errorText = await perfilResponse.text();
        throw new Error(`Erro ao atualizar perfil: ${errorText}`);
      }

      if (selectedImage) {
        await uploadImage();
      }

      await updateTags();
      await refreshUserData();

      if (userData) {
        const userDataAtualizado = {
          ...userData,
          nome: `${formData.nomePesquisador} ${formData.sobrenome}`.trim(),
          pesquisador: {
            ...userData.pesquisador,
            id: pesquisadorId,
            nomePesquisador: formData.nomePesquisador,
            sobrenome: formData.sobrenome,
            nomeCompleto:
              `${formData.nomePesquisador} ${formData.sobrenome}`.trim(),
            telefone: telefoneParaEnviar,
            nacionalidade: formData.nacionalidade,
            paisNascimento: formData.paisNascimento,
            dataNascimento: formData.dataNascimento,
            nomeCitacoesBibliograficas: formData.nomeCitacoesBibliograficas,
          },
        };
        localStorage.setItem("userData", JSON.stringify(userDataAtualizado));

        if (telefoneParaEnviar) {
          localStorage.setItem(`telefone_${userData.id}`, telefoneParaEnviar);
        }
      }

      window.dispatchEvent(new Event("userDataUpdated"));
      window.dispatchEvent(new CustomEvent("profileUpdated"));
      window.dispatchEvent(
        new CustomEvent("telefoneUpdated", {
          detail: { telefone: telefoneParaEnviar },
        })
      );
      window.dispatchEvent(
        new CustomEvent("tagsUpdated", {
          detail: { tags: tags },
        })
      );

      alert("Perfil atualizado com sucesso!");
      router.push("/telaPerfil");
    } catch (error: any) {
      alert(error.message || "Erro ao atualizar perfil. Tente novamente.");
    } finally {
      setLoading(false);
    }
  };

  const uploadImage = async (): Promise<boolean> => {
    if (!selectedImage || !pesquisadorId) return true;

    const formData = new FormData();
    formData.append("file", selectedImage);

    try {
      const token = localStorage.getItem("token");
      const response = await fetch(
        `http://localhost:8080/api/pesquisadores/${pesquisadorId}/imagem`,
        {
          method: "PUT",
          headers: {
            Authorization: `Bearer ${token}`,
          },
          body: formData,
        }
      );

      if (response.ok) {
        if (imagePreview && userData) {
          updateUserPhoto(imagePreview);
          localStorage.setItem(`userPhoto_${userData.id}`, imagePreview);
        }
        return true;
      } else {
        return false;
      }
    } catch (error) {
      return false;
    }
  };

  return (
    <LayoutWrapper>
      <div className="p-4 md:p-8">
        <div className="max-w-4xl mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 md:p-8 space-y-8">
          {/* Cabe√ßalho */}
          <div className="flex justify-between items-center border-b pb-6">
            <div>
              <h1 className="text-2xl font-bold text-[#990000] dark:text-red-400">
                Editar Perfil
              </h1>
            </div>
            <button
              onClick={() => router.push("/telaPerfil")}
              className="px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition cursor-pointer"
            >
              Cancelar
            </button>
          </div>

          {/* Se√ß√£o de Foto */}
          <div className="flex flex-col items-center space-y-4">
            <div className="relative">
              <div className="w-32 h-32 rounded-full overflow-hidden border-4 border-white shadow-lg bg-gray-200">
                <Image
                  src={imagePreview || "/images/user.png"}
                  alt="Foto do perfil"
                  width={128}
                  height={128}
                  className="w-full h-full object-cover"
                  onError={(e) => {
                    e.currentTarget.src = "/images/user.png";
                  }}
                />
              </div>
              <button
                onClick={() => fileInputRef.current?.click()}
                className="absolute bottom-2 right-2 bg-[#990000] text-white p-2 rounded-full shadow-lg hover:bg-red-800 transition cursor-pointer"
                title="Alterar foto"
              >
                <Camera size={16} />
              </button>
              <input
                type="file"
                ref={fileInputRef}
                onChange={handleImageUpload}
                accept="image/*"
                className="hidden"
              />
            </div>
          </div>

          {/* Formul√°rio */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div className="space-y-6">
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Nome *
                </label>
                <input
                  type="text"
                  name="nomePesquisador"
                  value={formData.nomePesquisador}
                  onChange={handleInputChange}
                  className="w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#990000] focus:border-transparent transition dark:bg-gray-700 dark:text-white"
                  placeholder="Seu nome"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Sobrenome *
                </label>
                <input
                  type="text"
                  name="sobrenome"
                  value={formData.sobrenome}
                  onChange={handleInputChange}
                  className="w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#990000] focus:border-transparent transition dark:bg-gray-700 dark:text-white"
                  placeholder="Seu sobrenome"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Data de Nascimento
                </label>
                <input
                  type="date"
                  name="dataNascimento"
                  value={formData.dataNascimento}
                  onChange={handleInputChange}
                  className="w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#990000] focus:border-transparent transition dark:bg-gray-700 dark:text-white"
                />
              </div>
            </div>

            <div className="space-y-6">
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Nacionalidade
                </label>
                <input
                  type="text"
                  name="nacionalidade"
                  value={formData.nacionalidade}
                  onChange={handleInputChange}
                  className="w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#990000] focus:border-transparent transition dark:bg-gray-700 dark:text-white"
                  placeholder="Sua nacionalidade"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Pa√≠s de Nascimento
                </label>
                <input
                  type="text"
                  name="paisNascimento"
                  value={formData.paisNascimento}
                  onChange={handleInputChange}
                  className="w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#990000] focus:border-transparent transition dark:bg-gray-700 dark:text-white"
                  placeholder="Pa√≠s onde nasceu"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                  Nome em Cita√ß√µes
                </label>
                <input
                  type="text"
                  name="nomeCitacoesBibliograficas"
                  value={formData.nomeCitacoesBibliograficas}
                  onChange={handleInputChange}
                  className="w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#990000] focus:border-transparent transition dark:bg-gray-700 dark:text-white"
                  placeholder="Nome para cita√ß√µes bibliogr√°ficas"
                />
              </div>
            </div>
          </div>

          {/* Tags */}
          <div className="border-t pt-8">
            <label className="block text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4">
              Tags de Especializa√ß√£o ({tags.length})
            </label>

            <div className="w-full min-h-32 p-4 rounded-lg bg-gray-50 dark:bg-gray-700 border-2 border-gray-200 dark:border-gray-600 mb-4">
              {tags.length > 0 ? (
                <div className="flex flex-wrap gap-2">
                  {tags.map((tag, index) => (
                    <div
                      key={index}
                      className="flex items-center gap-2 border-2 border-gray-200 dark:border-gray-600 rounded-full px-4 py-2 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 text-sm font-semibold shadow-sm"
                    >
                      <span>{tag}</span>
                      <button
                        onClick={() => removeTag(tag)}
                        className="text-red-600 hover:text-red-800 transition-colors cursor-pointer ml-1"
                        title="Remover tag"
                      >
                        <Trash2 size={14} />
                      </button>
                    </div>
                  ))}
                </div>
              ) : (
                <div className="flex items-center justify-center h-20">
                  <p className="text-gray-500 dark:text-gray-400">
                    Nenhuma tag adicionada
                  </p>
                </div>
              )}
            </div>

            <div className="flex gap-3">
              <input
                type="text"
                value={newTag}
                onChange={(e) => setNewTag(e.target.value)}
                onKeyPress={handleKeyPress}
                placeholder="Digite uma tag e pressione Enter"
                className="flex-1 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#990000] focus:border-transparent transition dark:bg-gray-700 dark:text-white"
              />
              <button
                onClick={addTag}
                className="bg-[#990000] text-white px-6 py-3 rounded-lg hover:bg-red-800 transition cursor-pointer flex items-center gap-2"
                type="button"
              >
                <Search size={16} />
                Adicionar
              </button>
            </div>
          </div>

          {/* Informa√ß√µes de Contato */}
          <div className="border-t pt-8">
            <h3 className="text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4">
              Informa√ß√µes de Contato
            </h3>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label className="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-2">
                  Email
                </label>
                <input
                  type="email"
                  value={formData.email}
                  readOnly
                  className="w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-400 cursor-not-allowed"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-2">
                  Telefone
                </label>
                <input
                  type="text"
                  name="telefone"
                  value={formData.telefone}
                  onChange={handleInputChange}
                  maxLength={15}
                  className="w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#990000] focus:border-transparent transition dark:bg-gray-700 dark:text-white"
                  placeholder="(XX) XXXXX-XXXX"
                />
                <p className="text-xs text-gray-500 dark:text-gray-400 mt-1"></p>
              </div>
            </div>
          </div>

          {/* Bot√£o Salvar */}
          <div className="flex justify-end pt-8 border-t">
            <button
              onClick={handleUpdateProfile}
              disabled={loading}
              className="bg-[#990000] text-white px-8 py-4 rounded-lg hover:bg-red-800 disabled:opacity-50 disabled:cursor-not-allowed transition cursor-pointer flex items-center gap-3 font-semibold text-lg"
            >
              {loading ? (
                <>
                  <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-white"></div>
                  Salvando...
                </>
              ) : (
                "Salvar Altera√ß√µes"
              )}
            </button>
          </div>
        </div>
      </div>
    </LayoutWrapper>
  );
}


### ARQUIVO: telaEdicaoPesquisador\page.tsx ###
import { Suspense } from "react";
import EditProfileForm from "./EditProfileForm";

export default function EditProfilePage() {
  return (
    <div>
      <Suspense
        fallback={
          <div className="flex h-screen items-center justify-center">
            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-[#990000]"></div>
          </div>
        }
      >
        <EditProfileForm />
      </Suspense>
    </div>
  );
}


### ARQUIVO: telaPerfil\page.tsx ###
import { Suspense } from "react";
import ProfileScreen from "./ProfileScreen";

export default function TelaPerfil() {
  return (
    <div>
      <Suspense fallback={<p>Carregando...</p>}>
        <ProfileScreen />
      </Suspense>
    </div>
  );
}


### ARQUIVO: telaPerfil\ProfileScreen.tsx ###
"use client";

import { useRouter } from "next/navigation";
import { Pencil } from "lucide-react";
import Link from "next/link";
import Image from "next/image";
import { useEffect, useState } from "react";
import LayoutWrapper from "../components/LayoutWrapper";
import { useUser } from "../contexts/UserContext";

interface Artigo {
  id: number;
  titulo: string;
  ano: string;
  doi: string;
}

interface FormacaoAcademica {
  id: number;
  curso: string;
  instituicao: string;
  anoConclusao: string;
  nivel: string;
}

interface DadosPesquisador {
  artigos: Artigo[];
  formacoesAcademicas: FormacaoAcademica[];
  idiomas: any[];
  atuacoesProfissionais: any[];
  projetosPesquisa: any[];
}

export default function ProfileScreen() {
  const router = useRouter();
  const { userData, refreshUserData } = useUser();

  const [nomeExibicao, setNomeExibicao] = useState("Carregando...");
  const [especialidade, setEspecialidade] = useState("Carregando...");
  const [paisNascimento, setPaisNascimento] = useState("Carregando...");
  const [dataAtualizacao, setDataAtualizacao] = useState("");
  const [horaAtualizacao, setHoraAtualizacao] = useState("");
  const [aberto, setAberto] = useState(false);
  const [listaDeTags, setListaDeTags] = useState<string[]>([]);
  const [loading, setLoading] = useState(true);
  const [dadosPesquisador, setDadosPesquisador] =
    useState<DadosPesquisador | null>(null);
  const [telefone, setTelefone] = useState("N√£o informado");

  const email = userData?.login || "usuario@exemplo.com";

  const carregarTags = async () => {
    if (!userData?.pesquisador?.id) {
      return;
    }

    const pesquisadorId = userData.pesquisador.id;

    try {
      const token = localStorage.getItem("token");
      if (!token) {
        return;
      }

      const response = await fetch(
        `http://localhost:8080/api/tags/pesquisador/${pesquisadorId}`,
        {
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
        }
      );

      if (response.ok) {
        const tagsData = await response.json();

        let tagsArray: string[] = [];

        if (tagsData && typeof tagsData === "object") {
          if (
            Array.isArray(tagsData) &&
            tagsData.every((item) => typeof item === "string")
          ) {
            tagsArray = tagsData;
          } else if (Array.isArray(tagsData.listaTags)) {
            tagsArray = tagsData.listaTags;
          } else if (Array.isArray(tagsData.tags)) {
            tagsArray = tagsData.tags;
          } else if (tagsData.id && Array.isArray(tagsData.listaTags)) {
            tagsArray = tagsData.listaTags;
          } else if (tagsData.nome && typeof tagsData.nome === "string") {
            tagsArray = [tagsData.nome];
          } else {
            for (const key in tagsData) {
              if (
                Array.isArray(tagsData[key]) &&
                tagsData[key].length > 0 &&
                tagsData[key].every((item) => typeof item === "string")
              ) {
                tagsArray = tagsData[key];
                break;
              }
            }
          }
        }

        if (tagsArray.length > 0) {
          setListaDeTags(tagsArray);
          setEspecialidade(tagsArray[0]);
          localStorage.setItem(
            `tags_${pesquisadorId}`,
            JSON.stringify(tagsArray)
          );
        } else {
          await carregarTagsDoLocalStorage(pesquisadorId);
        }
      } else if (response.status === 404) {
        await carregarTagsDoLocalStorage(pesquisadorId);
      } else {
        await carregarTagsDoLocalStorage(pesquisadorId);
      }
    } catch (error) {
      await carregarTagsDoLocalStorage(userData.pesquisador.id);
    }
  };

  const carregarTagsDoLocalStorage = async (pesquisadorId: number) => {
    const tagsSalvas = localStorage.getItem(`tags_${pesquisadorId}`);

    if (tagsSalvas) {
      try {
        const tagsArray = JSON.parse(tagsSalvas);
        if (tagsArray.length > 0) {
          setListaDeTags(tagsArray);
          setEspecialidade(tagsArray[0]);
        } else {
          setListaDeTags([]);
          setEspecialidade("Nenhuma especialidade definida");
        }
      } catch (error) {
        setListaDeTags([]);
        setEspecialidade("Nenhuma especialidade definida");
      }
    } else {
      setListaDeTags([]);
      setEspecialidade("Nenhuma especialidade definida");
    }
  };

  const carregarDadosCompletos = async () => {
    if (!userData?.pesquisador?.id) return;

    const pesquisadorId = userData.pesquisador.id;
    const token = localStorage.getItem("token");

    if (!token) return;

    try {
      const response = await fetch(
        `http://localhost:8080/api/dadosPesquisador/${pesquisadorId}`,
        {
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
        }
      );

      if (response.ok) {
        const dadosCompletos = await response.json();
        setDadosPesquisador(dadosCompletos);
      } else {
        await carregarDadosIndividuais(pesquisadorId, token);
      }
    } catch (error) {
      if (userData?.pesquisador?.id && token) {
        await carregarDadosIndividuais(userData.pesquisador.id, token);
      }
    }
  };

  const carregarDadosIndividuais = async (
    pesquisadorId: number,
    token: string
  ) => {
    try {
      const artigosResponse = await fetch(
        `http://localhost:8080/api/artigos/pesquisador/${pesquisadorId}`,
        {
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
        }
      );

      const formacoesResponse = await fetch(
        `http://localhost:8080/api/formacoes/pesquisador/${pesquisadorId}`,
        {
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
        }
      );

      const artigos = artigosResponse.ok ? await artigosResponse.json() : [];
      const formacoes = formacoesResponse.ok
        ? await formacoesResponse.json()
        : [];

      setDadosPesquisador({
        artigos: artigos || [],
        formacoesAcademicas: formacoes || [],
        idiomas: [],
        atuacoesProfissionais: [],
        projetosPesquisa: [],
      });
    } catch (error) {
      setDadosPesquisador({
        artigos: [],
        formacoesAcademicas: [],
        idiomas: [],
        atuacoesProfissionais: [],
        projetosPesquisa: [],
      });
    }
  };

  const atualizarTelefone = () => {
    if (
      userData?.pesquisador?.telefone &&
      userData.pesquisador.telefone.trim() !== ""
    ) {
      setTelefone(userData.pesquisador.telefone);
    } else {
      const telefoneSalvo = localStorage.getItem(`telefone_${userData?.id}`);
      if (telefoneSalvo) {
        setTelefone(telefoneSalvo);
      } else {
        setTelefone("N√£o informado");
      }
    }
  };

  useEffect(() => {
    const atualizarDados = async () => {
      if (!userData) {
        return;
      }

      const nomeParaExibir =
        userData.pesquisador?.nomeCompleto ||
        userData.nome ||
        userData.login ||
        "Usu√°rio";
      setNomeExibicao(nomeParaExibir);

      if (userData.pesquisador) {
        setPaisNascimento(
          userData.pesquisador.paisNascimento || "N√£o informado"
        );
        setDataAtualizacao(userData.pesquisador.dataAtualizacao || "");
        setHoraAtualizacao(userData.pesquisador.horaAtualizacao || "");
        atualizarTelefone();
      }

      await Promise.all([carregarTags(), carregarDadosCompletos()]);

      setLoading(false);
    };

    if (userData) {
      atualizarDados();
    }
  }, [userData]);

  useEffect(() => {
    const handleUserDataUpdated = () => {
      refreshUserData();
    };

    const handleProfileUpdated = () => {
      refreshUserData();
    };

    const handleTelefoneUpdated = (event: CustomEvent) => {
      if (event.detail?.telefone) {
        setTelefone(event.detail.telefone);
        if (userData?.id) {
          localStorage.setItem(
            `telefone_${userData.id}`,
            event.detail.telefone
          );
        }
      }
    };

    const handleTagsUpdated = (event: CustomEvent) => {
      if (event.detail?.tags && Array.isArray(event.detail.tags)) {
        setListaDeTags(event.detail.tags);
        if (event.detail.tags.length > 0) {
          setEspecialidade(event.detail.tags[0]);
        }
      } else {
        carregarTags();
      }
    };

    const handleStorageChange = (e: StorageEvent) => {
      if (e.key === "userData") {
        refreshUserData();
      }

      if (e.key && e.key.startsWith("tags_") && userData?.pesquisador?.id) {
        const pesquisadorId = e.key.replace("tags_", "");
        if (pesquisadorId === userData.pesquisador.id.toString()) {
          try {
            const novasTags = JSON.parse(e.newValue || "[]");
            setListaDeTags(novasTags);
            if (novasTags.length > 0) {
              setEspecialidade(novasTags[0]);
            }
          } catch (error) {}
        }
      }

      if (e.key && e.key.startsWith("telefone_") && userData?.id) {
        const userId = e.key.replace("telefone_", "");
        if (userId === userData.id.toString()) {
          setTelefone(e.newValue || "N√£o informado");
        }
      }
    };

    window.addEventListener("userDataUpdated", handleUserDataUpdated);
    window.addEventListener("profileUpdated", handleProfileUpdated);
    window.addEventListener(
      "telefoneUpdated",
      handleTelefoneUpdated as EventListener
    );
    window.addEventListener("tagsUpdated", handleTagsUpdated as EventListener);
    window.addEventListener("storage", handleStorageChange);

    return () => {
      window.removeEventListener("userDataUpdated", handleUserDataUpdated);
      window.removeEventListener("profileUpdated", handleProfileUpdated);
      window.removeEventListener(
        "telefoneUpdated",
        handleTelefoneUpdated as EventListener
      );
      window.removeEventListener(
        "tagsUpdated",
        handleTagsUpdated as EventListener
      );
      window.removeEventListener("storage", handleStorageChange);
    };
  }, [userData, refreshUserData]);

  useEffect(() => {
    refreshUserData();
  }, [refreshUserData]);

  const formatarData = (data: string) => {
    if (!data) return "Data n√£o informada";
    try {
      const date = new Date(data);
      return date.toLocaleDateString("pt-BR");
    } catch (error) {
      return data;
    }
  };

  if (loading) {
    return (
      <LayoutWrapper>
        <div className="flex flex-col bg-white dark:bg-gray-900 w-full min-h-screen items-center justify-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-[#990000]"></div>
          <p className="mt-4 text-gray-600 dark:text-gray-400">
            Carregando perfil...
          </p>
        </div>
      </LayoutWrapper>
    );
  }

  return (
    <LayoutWrapper>
      <div className="flex flex-col bg-white dark:bg-gray-900 w-full min-h-screen">
        {/* Topo Vermelho */}
        <div className="bg-[#990000] p-4 md:p-6 text-white w-full">
          {/* Bot√£o de Edi√ß√£o */}
          <Link
            href={`/telaEdicaoPesquisador`}
            className="absolute top-4 right-4 bg-white text-[#990000] p-2 rounded-full shadow hover:bg-gray-100 transition cursor-pointer"
            title="Editar Perfil"
          >
            <Pencil size={20} />
          </Link>

          <div className="flex flex-col md:flex-row items-start gap-4 md:gap-6 w-full">
            {/* Foto do usu√°rio */}
            <div className="rounded-md flex-shrink-0">
              <Image
                src={userData?.fotoPerfil || "/images/user.png"}
                alt="Foto do usu√°rio"
                width={100}
                height={100}
                className="rounded-lg object-cover w-24 h-24 md:w-32 md:h-32"
                onError={(e) => {
                  e.currentTarget.src = "/images/user.png";
                }}
              />
            </div>

            {/* Nome, Cargo e Tags */}
            <div className="flex-1 min-w-0">
              <h1 className="text-xl md:text-3xl font-bold mb-1 truncate">
                {nomeExibicao}
              </h1>
              <h2 className="text-base md:text-lg mb-3 text-gray-200">
                {especialidade}
              </h2>

              {/* Tags */}
              <div className="flex flex-wrap gap-2 mb-4">
                {listaDeTags.length > 0 ? (
                  listaDeTags.map((tag, index) => (
                    <span
                      key={index}
                      className="bg-white text-black px-3 py-1 rounded-full text-xs md:text-sm shadow-sm whitespace-nowrap"
                    >
                      {tag}
                    </span>
                  ))
                ) : (
                  <span className="text-gray-200 text-sm">
                    Nenhuma tag cadastrada
                  </span>
                )}
              </div>

              {/* Bot√µes de Contato e Gerenciar */}
              <div className="flex gap-3 flex-wrap">
                <button
                  className="border border-white text-white px-3 py-2 rounded hover:bg-white hover:text-[#990000] transition whitespace-nowrap text-sm cursor-pointer"
                  onClick={() => setAberto(true)}
                >
                  Contato
                </button>

                <Link
                  href="/gerenciarListas"
                  className="border border-white text-white px-3 py-2 rounded hover:bg-white hover:text-[#990000] transition flex items-center justify-center whitespace-nowrap text-sm cursor-pointer"
                >
                  Gerenciar Listas
                </Link>
              </div>
            </div>

            {/* Info de localiza√ß√£o e √∫ltima atualiza√ß√£o */}
            <div className="text-xs md:text-sm text-right self-end text-gray-200">
              <p className="mb-1">{paisNascimento}</p>
              <p>
                √öltima atualiza√ß√£o em {formatarData(dataAtualizacao)} √†s{" "}
                {horaAtualizacao}
              </p>
            </div>
          </div>
        </div>

        {/* Se√ß√£o de Conte√∫do */}
        <div className="flex-1 p-4 md:p-6 flex flex-col lg:flex-row gap-4 md:gap-6 bg-white dark:bg-gray-900 justify-center items-start">
          {/* Card 1 - Linha do tempo com Artigos */}
          <div className="flex-1 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 md:p-6 min-w-0 max-w-4xl">
            <h2 className="text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4">
              Linha do tempo - Artigos Publicados
            </h2>

            <div className="relative border-l-2 border-gray-300 ml-4 space-y-4">
              {dadosPesquisador?.artigos &&
              dadosPesquisador.artigos.length > 0 ? (
                dadosPesquisador.artigos.slice(0, 5).map((artigo, idx) => (
                  <div key={artigo.id || idx} className="flex items-start">
                    <div className="absolute w-3 h-3 bg-red-700 rounded-full -left-1.5 mt-1.5"></div>
                    <div className="ml-6 flex-1 min-w-0">
                      <div className="flex flex-col sm:flex-row sm:items-center gap-2 mb-2">
                        <p className="text-base font-semibold text-black dark:text-white whitespace-nowrap">
                          {artigo.ano || "Ano n√£o informado"}
                        </p>
                        <p className="text-sm text-gray-800 dark:text-gray-300 truncate">
                          {artigo.titulo || "Artigo sem t√≠tulo"}
                        </p>
                      </div>
                      {artigo.doi && (
                        <a
                          href={`https://doi.org/${artigo.doi}`}
                          target="_blank"
                          rel="noopener noreferrer"
                          className="text-blue-600 hover:text-blue-800 text-xs mb-2 inline-block"
                        >
                          DOI: {artigo.doi}
                        </a>
                      )}
                      <button
                        onClick={() =>
                          artigo.doi &&
                          window.open(`https://doi.org/${artigo.doi}`, "_blank")
                        }
                        disabled={!artigo.doi}
                        className="mt-auto w-full border border-[#990000] text-[#990000] dark:text-red-400 py-1 rounded hover:bg-[#990000] hover:text-white transition cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"
                      >
                        {artigo.doi ? "Acessar Artigo" : "DOI n√£o dispon√≠vel"}
                      </button>
                    </div>
                  </div>
                ))
              ) : (
                <div className="text-center py-8">
                  <p className="text-gray-500 dark:text-gray-400">
                    Nenhum artigo publicado encontrado
                  </p>
                </div>
              )}
            </div>
          </div>

          {/* Card 2 - Forma√ß√£o Acad√™mica Real */}
          <div className="flex-1 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 md:p-6 min-w-0 max-w-4xl">
            <h2 className="text-lg font-semibold mb-4 text-black dark:text-white">
              Forma√ß√£o Acad√™mica
            </h2>
            {dadosPesquisador?.formacoesAcademicas &&
            dadosPesquisador.formacoesAcademicas.length > 0 ? (
              <ul className="space-y-3">
                {dadosPesquisador.formacoesAcademicas
                  .slice(0, 3)
                  .map((formacao, idx) => (
                    <li
                      key={formacao.id || idx}
                      className="bg-gray-100 dark:bg-gray-700 p-3 rounded shadow-sm text-black dark:text-white text-sm"
                    >
                      <strong>{formacao.curso || "Curso n√£o informado"}</strong>
                      <br />
                      <span className="text-gray-600 dark:text-gray-300">
                        {formacao.instituicao || "Institui√ß√£o n√£o informada"}
                      </span>
                      {formacao.anoConclusao && (
                        <span className="text-gray-500 dark:text-gray-400 block mt-1">
                          Conclus√£o: {formacao.anoConclusao}
                        </span>
                      )}
                      {formacao.nivel && (
                        <span className="text-gray-500 dark:text-gray-400">
                          ‚Ä¢ {formacao.nivel}
                        </span>
                      )}
                    </li>
                  ))}
              </ul>
            ) : (
              <ul className="space-y-3">
                <li className="bg-gray-100 dark:bg-gray-700 p-3 rounded shadow-sm text-black dark:text-white text-sm">
                  Nenhuma forma√ß√£o acad√™mica cadastrada
                </li>
              </ul>
            )}
          </div>
        </div>

        {/* Modal Contato com telefone atualizado */}
        {aberto && (
          <div
            className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 cursor-pointer"
            onClick={() => setAberto(false)}
          >
            <div
              className="bg-white dark:bg-gray-800 rounded-lg p-6 w-11/12 max-w-md relative mx-4"
              onClick={(e) => e.stopPropagation()}
            >
              <h3 className="text-xl font-semibold mb-4 text-black dark:text-white">
                Contato
              </h3>
              <p className="mb-2">
                <strong className="text-black dark:text-white">
                  Telefone:
                </strong>{" "}
                {telefone}
              </p>
              <p className="mb-4">
                <strong className="text-black dark:text-white">Email:</strong>{" "}
                {email}
              </p>
              <button
                className="absolute top-2 right-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer"
                onClick={() => setAberto(false)}
                aria-label="Fechar modal"
              >
                ‚úñ
              </button>
              <button
                className="mt-2 bg-[#990000] text-white px-4 py-2 rounded hover:bg-red-700 transition w-full cursor-pointer"
                onClick={() => setAberto(false)}
              >
                Fechar
              </button>
            </div>
          </div>
        )}
      </div>
    </LayoutWrapper>
  );
}


### ARQUIVO: verificarEmail\page.tsx ###
import { Suspense } from 'react';
import VerifyEmail from './VerifyEmail';

export default function Home() {
  return (
      <div>
        <Suspense fallback={<p>Carregando...</p>}>
          <VerifyEmail/>
        </Suspense>
      </div>
    );
}






### ARQUIVO: verificarEmail\VerifyEmail.tsx ###
"use client";

import { useSearchParams, useRouter } from "next/navigation";
import { useEffect, useState } from "react";
import Image from "next/image";

export default function VerificarEmail() {
  const params = useSearchParams();
  const uniqueId = params.get("codigo");
  const router = useRouter();
  const token =
    typeof window !== "undefined" ? localStorage.getItem("token") : null;

  const [status, setStatus] = useState<"loading" | "success" | "error">(
    "loading"
  );
  const [mensagem, setMensagem] = useState("");
  const [tipoUsuario, setTipoUsuario] = useState<string | null>(null);

  useEffect(() => {
    if (!uniqueId) {
      setStatus("error");
      setMensagem("Token de verifica√ß√£o ausente.");
      return;
    }

    const verificar = async () => {
      try {
        const res = await fetch(
          `http://localhost:8080/api/usuarios/verificarEmail?codigo=${uniqueId}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
          }
        );

        if (res.ok) {
          const data = await res.json();

          setTipoUsuario(data.tipo);

          setStatus("success");
          setMensagem("Seu e-mail foi confirmado com sucesso!");
        } else {
          const data = await res.json();
          setStatus("error");
          setMensagem(data.message || "Token inv√°lido ou expirado.");
        }
      } catch (err) {
        setStatus("error");
        setMensagem("Erro ao conectar com o servidor.");
      }
    };

    verificar();
  }, [uniqueId, token, router]);

  const rotaPorTipo = () => {
    if (tipoUsuario === "PESQUISADOR") return "/perfilPesquisador";
    if (tipoUsuario === "EMPRESA") return "/cadastroEmpresa";
    return "/login";
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex">
      <div className="hidden lg:flex lg:w-2/5 bg-gradient-to-br from-[#990000] to-red-900 relative overflow-hidden">
        <div className="absolute inset-0 opacity-10">
          <div className="absolute top-0 right-0 w-64 h-64 bg-white rounded-full -translate-y-32 translate-x-32"></div>
          <div className="absolute bottom-0 left-0 w-96 h-96 bg-white rounded-full translate-y-48 -translate-x-48"></div>
        </div>
      </div>

      <div className="flex-1 flex items-center justify-center px-6 py-12">
        <div className="w-full max-w-md">
          <div className="lg:hidden mb-8 flex justify-center">
            <Image
              src="/images/logo_1.png"
              alt="Logo"
              width={120}
              height={120}
              quality={100}
              priority
            />
          </div>

          {status === "loading" && (
            <div className="text-center">
              <div className="mb-8 flex justify-center">
                <div className="relative">
                  <div className="w-32 h-32 rounded-full border-8 border-gray-200 dark:border-gray-700 flex items-center justify-center">
                    <svg
                      className="w-16 h-16 animate-spin text-[#990000]"
                      fill="none"
                      viewBox="0 0 24 24"
                    >
                      <circle
                        className="opacity-25"
                        cx="12"
                        cy="12"
                        r="10"
                        stroke="currentColor"
                        strokeWidth="3"
                      ></circle>
                      <path
                        className="opacity-75"
                        fill="currentColor"
                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"
                      ></path>
                    </svg>
                  </div>
                </div>
              </div>
              <h1 className="text-3xl font-bold text-gray-900 dark:text-white mb-3">
                Verificando seu e-mail
              </h1>
              <p className="text-gray-600 dark:text-gray-300 text-lg">
                Isso n√£o vai demorar...
              </p>
            </div>
          )}

          {status === "success" && (
            <div className="text-center">
              <div className="mb-8 flex justify-center">
                <div className="w-32 h-32 rounded-full bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center shadow-2xl">
                  <svg
                    className="w-16 h-16 text-white"
                    fill="none"
                    stroke="currentColor"
                    strokeWidth={3}
                    viewBox="0 0 24 24"
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                </div>
              </div>

              <h1 className="text-4xl font-bold text-gray-900 dark:text-white mb-4">
                Tudo certo!
              </h1>
              <p className="text-gray-600 dark:text-gray-300 text-lg mb-8">
                {mensagem}
              </p>

              <button
                onClick={() => router.push(rotaPorTipo())}
                className="w-full bg-gradient-to-r from-[#b30000] to-[#660000] text-white font-semibold px-8 py-4 rounded-xl transition-all shadow-lg hover:shadow-2xl hover:scale-105 focus:ring-4 focus:ring-red-300 cursor-pointer"
              >
                Continuar Cadastro
              </button>
            </div>
          )}

          {status === "error" && (
            <div className="text-center">
              <div className="mb-8 flex justify-center">
                <div className="w-32 h-32 rounded-full bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center shadow-2xl">
                  <svg
                    className="w-16 h-16 text-white"
                    fill="none"
                    stroke="currentColor"
                    strokeWidth={3}
                    viewBox="0 0 24 24"
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      d="M6 18L18 6M6 6l12 12"
                    />
                  </svg>
                </div>
              </div>

              <h1 className="text-4xl font-bold text-gray-900 dark:text-white mb-4">
                Ops, algo deu errado!
              </h1>
              <p className="text-gray-600 dark:text-gray-300 text-lg mb-8">
                {mensagem}
              </p>

              <div className="bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-6 mb-8">
                <div className="flex items-start gap-3">
                  <svg
                    className="w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fillRule="evenodd"
                      d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                      clipRule="evenodd"
                    />
                  </svg>
                  <p className="text-sm text-red-800 dark:text-red-300 font-medium text-left">
                    O link pode ter expirado ou j√° foi utilizado anteriormente.
                    Tente fazer login ou solicite um novo e-mail de verifica√ß√£o.
                  </p>
                </div>
              </div>

              <button
                onClick={() => router.push("/login")}
                className="w-full bg-[#990000] hover:bg-red-900 text-white font-semibold px-8 py-4 rounded-xl transition-all shadow-lg hover:shadow-xl cursor-pointer"
              >
                Ir para o Login
              </button>
            </div>
          )}
        </div>
      </div>
    </div>
  );
}
